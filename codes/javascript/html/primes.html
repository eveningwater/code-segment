<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>primes - è´¨æ•°æŸ¥è¯¢å·¥å…·</title>
    <!-- å¼•å…¥æ’ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --card-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
            --accent-color: #06b6d4;
            --success-color: #10b981;
            --warning-color: #f59e0b;
        }

        [data-theme="dark"] {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --accent-color: #22d3ee;
            --success-color: #34d399;
            --warning-color: #fbbf24;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            transition: background 0.3s ease, color 0.3s ease;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: var(--bg-primary);
            border-radius: 15px;
            padding: 24px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        .card h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .info-box {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            border-left: 4px solid var(--accent-color);
        }

        .info-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .info-value {
            font-size: 1.2rem;
            color: var(--accent-color);
            font-weight: 700;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 100px;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #047857);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .input-group input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .prime-display {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
            max-height: 150px;
            overflow-y: auto;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: flex-start;
        }

        .prime-badge {
            background: var(--accent-color);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .feature-list {
            list-style: none;
            margin-top: 16px;
        }

        .feature-list li {
            padding: 10px;
            margin-bottom: 8px;
            background: var(--bg-secondary);
            border-radius: 6px;
            border-left: 3px solid var(--accent-color);
            font-size: 0.9rem;
        }

        .feature-list li:before {
            content: "âœ“ ";
            color: var(--success-color);
            font-weight: bold;
            margin-right: 8px;
        }

        .example-section {
            background: var(--bg-primary);
            border-radius: 15px;
            padding: 24px;
            box-shadow: var(--card-shadow);
            margin-top: 24px;
        }

        .example-section h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .example-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .example-card:hover {
            border-color: var(--accent-color);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.1);
            transform: translateY(-2px);
        }

        .example-card h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .example-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .example-code {
            background: var(--bg-primary);
            padding: 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: var(--accent-color);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-item {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 6px;
        }

        .analysis-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .analysis-label {
            flex: 0 0 120px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .analysis-value {
            flex: 1;
            color: var(--accent-color);
            font-weight: 600;
        }

        .quick-example {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 8px;
            margin-bottom: 16px;
        }

        .quick-btn {
            padding: 8px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.85rem;
        }

        .quick-btn:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .quick-btn:active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .twin-primes-display {
            display: grid;
            gap: 8px;
            margin-top: 12px;
        }

        .twin-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: var(--bg-secondary);
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .twin-badge {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>âœ¨ è´¨æ•°æŸ¥è¯¢å·¥å…·</h1>
            <p>å¿«é€Ÿæ‰¾å‡ºæŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰è´¨æ•°ï¼Œæ”¯æŒè´¨æ•°ç»Ÿè®¡å’Œåˆ†æ</p>
        </div>

        <div class="main-content">
            <!-- è´¨æ•°ç”Ÿæˆ -->
            <div class="card">
                <h2>ğŸ” è´¨æ•°ç”Ÿæˆ</h2>
                
                <div class="input-group">
                    <div id="numberInputContainer" style="flex: 1;"></div>
                    <button class="btn btn-primary" style="flex: 0 0 auto;" onclick="generatePrimes()">ç”Ÿæˆ</button>
                </div>

                <div class="info-box">
                    <div class="info-label">è´¨æ•°ä¸ªæ•°ï¼š</div>
                    <div class="info-value" id="primeCount">-</div>
                </div>

                <div style="margin-bottom: 16px;">
                    <div class="info-label">è´¨æ•°åˆ—è¡¨ï¼š</div>
                    <div class="prime-display" id="primeDisplay">ç­‰å¾…è¾“å…¥...</div>
                </div>

                <div class="quick-example">
                    <button class="quick-btn" onclick="quickGenerate(10)">10</button>
                    <button class="quick-btn" onclick="quickGenerate(20)">20</button>
                    <button class="quick-btn" onclick="quickGenerate(50)">50</button>
                    <button class="quick-btn" onclick="quickGenerate(100)">100</button>
                    <button class="quick-btn" onclick="quickGenerate(500)">500</button>
                    <button class="quick-btn" onclick="quickGenerate(1000)">1000</button>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">ç”Ÿæˆæ¬¡æ•°</div>
                        <div class="stat-value" id="generateCount">0</div>
                    </div>
                </div>
            </div>

            <!-- è´¨æ•°åˆ†æ -->
            <div class="card">
                <h2>ğŸ“Š è´¨æ•°åˆ†æ</h2>
                
                <div style="margin-top: 16px;">
                    <h3 style="color: var(--text-primary); margin-bottom: 12px;">ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯ï¼š</h3>
                    <div class="analysis-item">
                        <div class="analysis-label">æœ€å°è´¨æ•°ï¼š</div>
                        <div class="analysis-value" id="minPrime">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">æœ€å¤§è´¨æ•°ï¼š</div>
                        <div class="analysis-value" id="maxPrime">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">è´¨æ•°å¯†åº¦ï¼š</div>
                        <div class="analysis-value" id="primeDensity">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">å­ªç”Ÿè´¨æ•°å¯¹ï¼š</div>
                        <div class="analysis-value" id="twinCount">-</div>
                    </div>
                </div>

                <div id="twinPrimesBox" style="display: none;">
                    <h3 style="color: var(--text-primary); margin-top: 16px; margin-bottom: 12px;">ğŸ‘¯ å­ªç”Ÿè´¨æ•°ï¼š</h3>
                    <div class="twin-primes-display" id="twinPrimesDisplay"></div>
                </div>

                <h3 style="color: var(--text-primary); margin-top: 16px; margin-bottom: 12px;">ğŸ“‹ è´¨æ•°çŸ¥è¯†ï¼š</h3>
                <ul class="feature-list">
                    <li>è´¨æ•°åªèƒ½è¢« 1 å’Œè‡ªå·±æ•´é™¤</li>
                    <li>2 æ˜¯å”¯ä¸€çš„å¶è´¨æ•°</li>
                    <li>å­ªç”Ÿè´¨æ•°ç›¸å·®æ°å¥½ä¸º 2</li>
                    <li>è´¨æ•°åœ¨å¯†ç å­¦ä¸­è‡³å…³é‡è¦</li>
                </ul>
            </div>
        </div>

        <!-- åº”ç”¨ç¤ºä¾‹ -->
        <div class="example-section">
            <h2>ğŸ“š å®æˆ˜åº”ç”¨ç¤ºä¾‹</h2>
            <div class="example-grid">
                <div class="example-card" onclick="runExample('sieve')">
                    <h3>âš¡ åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•</h3>
                    <div class="example-desc">é«˜æ•ˆç”Ÿæˆè´¨æ•°çš„ç»å…¸ç®—æ³•</div>
                    <div class="example-code">primes(num)</div>
                </div>

                <div class="example-card" onclick="runExample('cryptography')">
                    <h3>ğŸ” å¯†ç å­¦åº”ç”¨</h3>
                    <div class="example-desc">RSA å’Œå¯†é’¥ç”ŸæˆåŸºç¡€</div>
                    <div class="example-code">é€‰æ‹©å¤§è´¨æ•°</div>
                </div>

                <div class="example-card" onclick="runExample('hash')">
                    <h3>ğŸ—‚ï¸ å“ˆå¸Œè¡¨è®¾è®¡</h3>
                    <div class="example-desc">å“ˆå¸Œè¡¨å¤§å°é€šå¸¸ä¸ºè´¨æ•°</div>
                    <div class="example-code">table.length = prime</div>
                </div>

                <div class="example-card" onclick="runExample('loadbalance')">
                    <h3>âš–ï¸ è´Ÿè½½å‡è¡¡</h3>
                    <div class="example-desc">ä½¿ç”¨è´¨æ•°åˆ†å¸ƒè¯·æ±‚</div>
                    <div class="example-code">hash % prime</div>
                </div>

                <div class="example-card" onclick="runExample('testing')">
                    <h3>ğŸ§ª è½¯ä»¶æµ‹è¯•</h3>
                    <div class="example-desc">ç”Ÿæˆæµ‹è¯•æ•°æ®é›†</div>
                    <div class="example-code">primes() ç”Ÿæˆè¾¹ç•Œ</div>
                </div>

                <div class="example-card" onclick="runExample('math')">
                    <h3>ğŸ“ æ•°å­¦ç ”ç©¶</h3>
                    <div class="example-desc">è´¨æ•°åˆ†å¸ƒå’Œç†è®ºç ”ç©¶</div>
                    <div class="example-code">Ï€(n) è´¨æ•°å®šç†</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶è„šæœ¬ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>

    <script>
        // Core primes function
        const primes = num => {
            let arr = Array.from({ length: num - 1 }).map((x, i) => i + 2),
                sqrtRoot = Math.floor(Math.sqrt(num)),
                arrTillSqrRoot = Array.from({ length: sqrtRoot - 1 }).map((x, i) => i + 2);
            arrTillSqrRoot.forEach(x => (arr = arr.filter(y => y === x || y % x !== 0)));
            return arr;
        };

        let stats = {
            generateCount: 0
        };

        let plugins = {
            modal: null,
            notification: null,
            numberInput: null
        };

        // åˆå§‹åŒ–æ’ä»¶
        function initPlugins() {
            try {
                plugins.modal = new Modal();
                plugins.notification = new Notification();
                plugins.numberInput = new InputNumber({
                    container: '#numberInputContainer',
                    min: 2,
                    placeholder: 'è¾“å…¥ä¸Šé™æ•°å­—',
                    value: 100
                });
            } catch (error) {
                console.warn('æ’ä»¶åŠ è½½å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            if (plugins.notification) {
                plugins.notification.show(message, type);
            } else {
                alert(message);
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(content) {
            if (plugins.modal) {
                plugins.modal.alert(content);
            } else {
                alert(content);
            }
        }

        // æŸ¥æ‰¾å­ªç”Ÿè´¨æ•°
        function findTwinPrimes(primeList) {
            const twins = [];
            for (let i = 0; i < primeList.length - 1; i++) {
                if (primeList[i + 1] - primeList[i] === 2) {
                    twins.push([primeList[i], primeList[i + 1]]);
                }
            }
            return twins;
        }

        // ç”Ÿæˆè´¨æ•°
        function generatePrimes() {
            const num = parseInt(plugins.numberInput ? plugins.numberInput.getValue() : document.getElementById('numberInput').value);
            
            if (isNaN(num) || num < 2) {
                showNotification('è¯·è¾“å…¥å¤§äºç­‰äº 2 çš„æ•°å­—', 'warning');
                return;
            }

            const primeList = primes(num);
            const twinPrimes = findTwinPrimes(primeList);
            const density = ((primeList.length / num) * 100).toFixed(2);

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('primeCount').textContent = primeList.length;
            
            // æ˜¾ç¤ºè´¨æ•°
            const primeDisplay = document.getElementById('primeDisplay');
            primeDisplay.innerHTML = primeList
                .map(p => `<span class="prime-badge">${p}</span>`)
                .join('');

            // åˆ†æ
            document.getElementById('minPrime').textContent = primeList[0];
            document.getElementById('maxPrime').textContent = primeList[primeList.length - 1];
            document.getElementById('primeDensity').textContent = `${density}%`;
            document.getElementById('twinCount').textContent = twinPrimes.length;

            // æ˜¾ç¤ºå­ªç”Ÿè´¨æ•°
            if (twinPrimes.length > 0) {
                const twinBox = document.getElementById('twinPrimesBox');
                const twinDisplay = document.getElementById('twinPrimesDisplay');
                twinBox.style.display = 'block';
                twinDisplay.innerHTML = twinPrimes
                    .map(([a, b]) => `
                        <div class="twin-item">
                            <span class="twin-badge">${a}</span>
                            <span style="color: var(--text-secondary);">å’Œ</span>
                            <span class="twin-badge">${b}</span>
                        </div>
                    `).join('');
            } else {
                document.getElementById('twinPrimesBox').style.display = 'none';
            }

            stats.generateCount++;
            document.getElementById('generateCount').textContent = stats.generateCount;

            showNotification(`å·²ç”Ÿæˆ ${primeList.length} ä¸ªè´¨æ•°ï¼Œå…± ${twinPrimes.length} å¯¹å­ªç”Ÿè´¨æ•°`, 'success');
        }

        // å¿«é€Ÿç”Ÿæˆ
        function quickGenerate(num) {
            if (plugins.numberInput) {
                plugins.numberInput.setValue(num);
            } else {
                document.getElementById('numberInput').value = num;
            }
            generatePrimes();
        }

        // è¿è¡Œç¤ºä¾‹
        function runExample(type) {
            const examples = {
                sieve: () => {
                    const msg = `âš¡ åŸƒæ‹‰æ‰˜æ–¯ç‰¹å°¼ç­›æ³•:\n\n` +
                        `åŸç†ï¼š\n` +
                        `1. ä» 2 å¼€å§‹ï¼Œæ ‡è®°ä¸ºè´¨æ•°\n` +
                        `2. æ ‡è®°æ‰€æœ‰ 2 çš„å€æ•°ä¸ºåˆæ•°\n` +
                        `3. æ‰¾ä¸‹ä¸€ä¸ªæœªæ ‡è®°çš„æ•°ï¼Œé‡å¤\n` +
                        `4. ç›´åˆ°å¤„ç†å®Œ âˆšn\n\n` +
                        `æ—¶é—´å¤æ‚åº¦ï¼š\n` +
                        `O(n log log n)\n\n` +
                        `ç¤ºä¾‹ (ç”Ÿæˆ 30 ä»¥å†…çš„è´¨æ•°)ï¼š\n` +
                        `åˆå§‹ï¼š2, 3, 4, 5, 6, 7, 8, 9, 10...\n` +
                        `æ¶ˆé™¤ 2 çš„å€æ•°ï¼š2, 3, 5, 7, 9, 11...\n` +
                        `æ¶ˆé™¤ 3 çš„å€æ•°ï¼š2, 3, 5, 7, 11...\n` +
                        `ç»“æœï¼š2, 3, 5, 7, 11, 13, 17, 19, 23, 29\n\n` +
                        `å®ç°ä»£ç æ€è·¯ï¼š\n` +
                        `const primes = (num) => {\n` +
                        `  let arr = [2, 3, 4, ..., num];\n` +
                        `  const sqrtRoot = Math.sqrt(num);\n` +
                        `  for (let p of arr) {\n` +
                        `    if (p <= sqrtRoot) {\n` +
                        `      arr = arr.filter(x => x === p || x % p !== 0);\n` +
                        `    }\n` +
                        `  }\n` +
                        `  return arr;\n` +
                        `}\n\n` +
                        `æ•ˆç‡ï¼š\n` +
                        `æ¯”é€ä¸ªåˆ¤æ–­è´¨æ•°å¿«å¾—å¤š`;
                    showModal(msg);
                },

                cryptography: () => {
                    const msg = `ğŸ” å¯†ç å­¦åº”ç”¨:\n\n` +
                        `RSA ç®—æ³•åŸºç¡€ï¼š\n` +
                        `1. é€‰æ‹©ä¸¤ä¸ªå¤§è´¨æ•° p å’Œ q\n` +
                        `2. è®¡ç®— n = p Ã— q\n` +
                        `3. n ä½œä¸ºæ¨¡æ•°\n` +
                        `4. å¯¹ n çš„å› æ•°åˆ†è§£æ˜¯å›°éš¾çš„\n\n` +
                        `å®é™…ç¤ºä¾‹ï¼š\n` +
                        `â€¢ p = 61, q = 53\n` +
                        `â€¢ n = 61 Ã— 53 = 3233\n` +
                        `â€¢ å…¬é’¥ï¼š(e, n)\n` +
                        `â€¢ ç§é’¥ï¼š(d, n)\n\n` +
                        `è´¨æ•°è¦æ±‚ï¼š\n` +
                        `â€¢ è¶³å¤Ÿå¤§ï¼ˆ1024-4096 ä½ï¼‰\n` +
                        `â€¢ éš¾ä»¥å› æ•°åˆ†è§£\n` +
                        `â€¢ ç”Ÿæˆçš„ n æ›´å®‰å…¨\n\n` +
                        `åº”ç”¨åœºæ™¯ï¼š\n` +
                        `â€¢ HTTPS åŠ å¯†\n` +
                        `â€¢ æ•°å­—ç­¾å\n` +
                        `â€¢ é‚®ä»¶åŠ å¯†\n\n` +
                        `å®ç°æ­¥éª¤ï¼š\n` +
                        `1. ç”Ÿæˆå¤§è´¨æ•°æ± \n` +
                        `2. éšæœºé€‰æ‹©ä¸¤ä¸ªè´¨æ•°\n` +
                        `3. è®¡ç®—å…¬ç§é’¥\n` +
                        `4. åŠ å¯†/è§£å¯†æ•°æ®`;
                    showModal(msg);
                },

                hash: () => {
                    const msg = `ğŸ—‚ï¸ å“ˆå¸Œè¡¨è®¾è®¡:\n\n` +
                        `ä¸ºä»€ä¹ˆç”¨è´¨æ•°ï¼š\n` +
                        `â€¢ å“ˆå¸Œç¢°æ’æ›´å°‘\n` +
                        `â€¢ æ•£åˆ—åˆ†å¸ƒæ›´å‡åŒ€\n` +
                        `â€¢ ç®—æ³•æ€§èƒ½æ›´ä¼˜\n\n` +
                        `å®é™…ä¾‹å­ï¼š\n` +
                        `â€¢ HashMap åˆå§‹å®¹é‡ï¼š16\n` +
                        `â€¢ å¸¸ç”¨å®¹é‡ï¼š32, 64, 128...\n` +
                        `â€¢ æ‰©å®¹æ—¶ä½¿ç”¨è´¨æ•°å¤§å°\n\n` +
                        `è´¨æ•°é€‰æ‹©ç­–ç•¥ï¼š\n` +
                        `const tableSizes = [\n` +
                        `  7, 13, 31, 61, 127, 251,\n` +
                        `  509, 1021, 2039, 4093\n` +
                        `];\n\n` +
                        `å®ç°ä¾‹å­ï¼š\n` +
                        `class HashMap {\n` +
                        `  constructor(capacity) {\n` +
                        `    this.size = nextPrime(capacity);\n` +
                        `    this.table = new Array(this.size);\n` +
                        `  }\n\n` +
                        `  hash(key) {\n` +
                        `    return hashCode(key) % this.size;\n` +
                        `  }\n` +
                        `}\n\n` +
                        `æ€§èƒ½å¯¹æ¯”ï¼š\n` +
                        `â€¢ è´¨æ•°å¤§å°ï¼šå°‘é‡ç¢°æ’\n` +
                        `â€¢ 2çš„å¹‚æ¬¡ï¼šæ›´å¤šç¢°æ’`;
                    showModal(msg);
                },

                loadbalance: () => {
                    const msg = `âš–ï¸ è´Ÿè½½å‡è¡¡:\n\n` +
                        `ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼š\n` +
                        `1. ä½¿ç”¨è´¨æ•°ä½œä¸ºæ¨¡\n` +
                        `2. å‡åŒ€åˆ†å¸ƒæœåŠ¡å™¨\n` +
                        `3. æœ€å°åŒ–èŠ‚ç‚¹å˜åŒ–å½±å“\n\n` +
                        `å®ç°åŸç†ï¼š\n` +
                        `const mod = 31; // è´¨æ•°\n` +
                        `const routeRequest = (key) => {\n` +
                        `  return hash(key) % mod;\n` +
                        `};\n\n` +
                        `åˆ†å¸ƒç¤ºä¾‹ï¼š\n` +
                        `â€¢ 31 ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹\n` +
                        `â€¢ è¯·æ±‚ hash % 31\n` +
                        `â€¢ å‡åŒ€åˆ†é…åˆ°å„èŠ‚ç‚¹\n\n` +
                        `ä¼˜åŠ¿ï¼š\n` +
                        `â€¢ å‡å°‘ç¼“å­˜å¤±æ•ˆ\n` +
                        `â€¢ æé«˜æ€§èƒ½\n` +
                        `â€¢ èŠ‚ç‚¹å˜åŒ–å½±å“å°\n\n` +
                        `å®é™…åº”ç”¨ï¼š\n` +
                        `â€¢ åˆ†å¸ƒå¼ç¼“å­˜\n` +
                        `â€¢ CDN èŠ‚ç‚¹é€‰æ‹©\n` +
                        `â€¢ æ¶ˆæ¯é˜Ÿåˆ—åˆ†ç‰‡\n\n` +
                        `å¯¹æ¯”ç¤ºä¾‹ï¼š\n` +
                        `ä½¿ç”¨ 2^n (å¦‚ 32)ï¼š\n` +
                        `hash & (32-1)\n\n` +
                        `ä½¿ç”¨è´¨æ•° (å¦‚ 31)ï¼š\n` +
                        `hash % 31`;
                    showModal(msg);
                },

                testing: () => {
                    const msg = `ğŸ§ª è½¯ä»¶æµ‹è¯•:\n\n` +
                        `æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆï¼š\n` +
                        `ä½¿ç”¨è´¨æ•°ç”Ÿæˆè¾¹ç•Œå€¼\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `const testValues = primes(1000);\n` +
                        `// ç”Ÿæˆä»£è¡¨æ€§æµ‹è¯•æ•°æ®\n\n` +
                        `è¾¹ç•Œæµ‹è¯•ï¼š\n` +
                        `â€¢ æœ€å°è´¨æ•°ï¼š2\n` +
                        `â€¢ æœ€å¤§è´¨æ•°ï¼š999983\n` +
                        `â€¢ ä¸­é—´å€¼ï¼šå„ç§è§„æ¨¡\n\n` +
                        `åº”ç”¨åœºæ™¯ï¼š\n` +
                        `1. å®¹é‡æµ‹è¯•\n` +
                        `   const primes = primes(10000);\n` +
                        `   testCapacity(primes);\n\n` +
                        `2. æ€§èƒ½æµ‹è¯•\n` +
                        `   primes.forEach(p => {\n` +
                        `     measureTime(p);\n` +
                        `   });\n\n` +
                        `3. å›å½’æµ‹è¯•\n` +
                        `   const testSet = primes(100);\n` +
                        `   runRegressionTests(testSet);\n\n` +
                        `ä¼˜åŠ¿ï¼š\n` +
                        `â€¢ è¦†ç›–ç‡é«˜\n` +
                        `â€¢ è¾¹ç•Œå®Œæ•´\n` +
                        `â€¢ ä»£è¡¨æ€§å¼º`;
                    showModal(msg);
                },

                math: () => {
                    const msg = `ğŸ“ æ•°å­¦ç ”ç©¶:\n\n` +
                        `è´¨æ•°å®šç†ï¼š\n` +
                        `Ï€(n) â‰ˆ n / ln(n)\n\n` +
                        `å…¶ä¸­ Ï€(n) æ˜¯å°äºç­‰äº n çš„è´¨æ•°ä¸ªæ•°\n\n` +
                        `å®é™…æ•°æ®ï¼š\n` +
                        `â€¢ Ï€(100) = 25\n` +
                        `â€¢ Ï€(1000) = 168\n` +
                        `â€¢ Ï€(10000) = 1229\n` +
                        `â€¢ Ï€(100000) = 9592\n\n` +
                        `å“¥å¾·å·´èµ«çŒœæƒ³ï¼š\n` +
                        `ä»»ä½•å¤§äº 2 çš„å¶æ•°\n` +
                        `éƒ½å¯è¡¨ç¤ºä¸ºä¸¤ä¸ªè´¨æ•°ä¹‹å’Œ\n\n` +
                        `ä¾‹å­ï¼š\n` +
                        `â€¢ 4 = 2 + 2\n` +
                        `â€¢ 6 = 3 + 3\n` +
                        `â€¢ 8 = 3 + 5\n` +
                        `â€¢ 10 = 5 + 5\n\n` +
                        `å­ªç”Ÿè´¨æ•°çŒœæƒ³ï¼š\n` +
                        `å­˜åœ¨æ— ç©·å¤šå¯¹å­ªç”Ÿè´¨æ•°\n` +
                        `(ç›¸å·®ä¸º 2 çš„è´¨æ•°å¯¹)\n\n` +
                        `å·²çŸ¥å­ªç”Ÿè´¨æ•°å¯¹ï¼š\n` +
                        `(3,5), (5,7), (11,13),\n` +
                        `(17,19), (29,31)...\n\n` +
                        `ç ”ç©¶æ„ä¹‰ï¼š\n` +
                        `â€¢ æ•°è®ºåŸºç¡€\n` +
                        `â€¢ å¯†ç å­¦ç†è®º\n` +
                        `â€¢ åˆ†å¸ƒå¼ç³»ç»Ÿä¼˜åŒ–`;
                    showModal(msg);
                }
            };

            examples[type]?.();
        }

        // å›è½¦ç”Ÿæˆ
        document.addEventListener('DOMContentLoaded', () => {
            if (document.getElementById('numberInput')) {
                document.getElementById('numberInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        generatePrimes();
                    }
                });
            }
            
            // ä¸ºæ’ä»¶è¾“å…¥æ¡†æ·»åŠ å›è½¦äº‹ä»¶
            setTimeout(() => {
                if (plugins.numberInput && plugins.numberInput.input) {
                    plugins.numberInput.input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            generatePrimes();
                        }
                    });
                }
            }, 500);
        });

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initPlugins();
            generatePrimes();
        });
    </script>
</body>

</html>