<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>primeFactors - è´¨å› æ•°åˆ†è§£å·¥å…·</title>
    <!-- å¼•å…¥æ’ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --card-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
            --accent-color: #ec4899;
            --success-color: #10b981;
            --warning-color: #f59e0b;
        }

        [data-theme="dark"] {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --accent-color: #f472b6;
            --success-color: #34d399;
            --warning-color: #fbbf24;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
            transition: background 0.3s ease, color 0.3s ease;
        }

        [data-theme="dark"] body {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: var(--bg-primary);
            border-radius: 15px;
            padding: 24px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }

        .card h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .info-box {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            border-left: 4px solid var(--accent-color);
        }

        .info-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .info-value {
            font-size: 1.3rem;
            color: var(--accent-color);
            font-weight: 700;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 100px;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ec4899, #be185d);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #047857);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .input-group {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .factor-display {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 16px;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .factor-badge {
            background: var(--accent-color);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .factor-operator {
            color: var(--text-secondary);
            font-weight: 600;
        }

        .feature-list {
            list-style: none;
            margin-top: 16px;
        }

        .feature-list li {
            padding: 10px;
            margin-bottom: 8px;
            background: var(--bg-secondary);
            border-radius: 6px;
            border-left: 3px solid var(--accent-color);
            font-size: 0.9rem;
        }

        .feature-list li:before {
            content: "âœ“ ";
            color: var(--success-color);
            font-weight: bold;
            margin-right: 8px;
        }

        .example-section {
            background: var(--bg-primary);
            border-radius: 15px;
            padding: 24px;
            box-shadow: var(--card-shadow);
            margin-top: 24px;
        }

        .example-section h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .example-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 16px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .example-card:hover {
            border-color: var(--accent-color);
            box-shadow: 0 4px 12px rgba(236, 72, 153, 0.1);
            transform: translateY(-2px);
        }

        .example-card h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .example-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .example-code {
            background: var(--bg-primary);
            padding: 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: var(--accent-color);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-item {
            background: linear-gradient(135deg, #ec4899, #be185d);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 6px;
        }

        .factor-analysis {
            margin-top: 16px;
        }

        .analysis-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .analysis-label {
            flex: 0 0 100px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .analysis-value {
            flex: 1;
            color: var(--accent-color);
            font-family: 'Courier New', monospace;
            font-weight: 600;
        }

        .quick-example {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 8px;
            margin-bottom: 16px;
        }

        .quick-btn {
            padding: 8px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.85rem;
        }

        .quick-btn:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .quick-btn:active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¢ è´¨å› æ•°åˆ†è§£å·¥å…·</h1>
            <p>åˆ†è§£ä»»æ„æ­£æ•´æ•°çš„è´¨å› æ•°ï¼ˆç´ å› æ•°ï¼‰ï¼Œç”¨äºæ•°å­¦æ•™å­¦å’Œç®—æ³•ä¼˜åŒ–</p>
        </div>

        <div class="main-content">
            <!-- è´¨å› æ•°åˆ†è§£ -->
            <div class="card">
                <h2>ğŸ” è´¨å› æ•°åˆ†è§£</h2>
                
                <div class="input-group">
                    <div id="numberInputContainer" style="flex: 1;"></div>
                    <button class="btn btn-primary" style="flex: 0 0 auto;" onclick="factorize()">åˆ†è§£</button>
                </div>

                <div class="info-box">
                    <div class="info-label">è¾“å…¥æ•°å­—ï¼š</div>
                    <div class="info-value" id="inputNumber">-</div>
                </div>

                <div class="info-box">
                    <div class="info-label">è´¨å› æ•°ï¼š</div>
                    <div class="factor-display" id="factorDisplay">ç­‰å¾…è¾“å…¥...</div>
                </div>

                <div class="info-box">
                    <div class="info-label">è´¨å› æ•°å¼ï¼š</div>
                    <div class="info-value" id="factorExpression">-</div>
                </div>

                <div class="quick-example">
                    <button class="quick-btn" onclick="quickFactorize(12)">12</button>
                    <button class="quick-btn" onclick="quickFactorize(60)">60</button>
                    <button class="quick-btn" onclick="quickFactorize(100)">100</button>
                    <button class="quick-btn" onclick="quickFactorize(360)">360</button>
                    <button class="quick-btn" onclick="quickFactorize(1000)">1000</button>
                    <button class="quick-btn" onclick="quickFactorize(97)">97</button>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">åˆ†è§£æ¬¡æ•°</div>
                        <div class="stat-value" id="factorCount">0</div>
                    </div>
                </div>
            </div>

            <!-- å› æ•°åˆ†æ -->
            <div class="card">
                <h2>ğŸ“Š å› æ•°åˆ†æ</h2>
                
                <div class="factor-analysis">
                    <div class="analysis-item">
                        <div class="analysis-label">æ˜¯å¦è´¨æ•°ï¼š</div>
                        <div class="analysis-value" id="isPrime">å¾…æ£€æµ‹</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">ä¸åŒè´¨å› æ•°ï¼š</div>
                        <div class="analysis-value" id="distinctCount">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">è´¨å› æ•°ä¸ªæ•°ï¼š</div>
                        <div class="analysis-value" id="totalFactorCount">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">æœ€å¤§è´¨å› æ•°ï¼š</div>
                        <div class="analysis-value" id="maxFactor">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">æœ€å°è´¨å› æ•°ï¼š</div>
                        <div class="analysis-value" id="minFactor">-</div>
                    </div>
                    <div class="analysis-item">
                        <div class="analysis-label">æ•°å­—è§„å¾‹ï¼š</div>
                        <div class="analysis-value" id="pattern">-</div>
                    </div>
                </div>

                <h3 style="color: var(--text-primary); margin-top: 16px; margin-bottom: 12px;">ğŸ“‹ è´¨å› æ•°çŸ¥è¯†ï¼š</h3>
                <ul class="feature-list">
                    <li>è´¨æ•°åªèƒ½è¢« 1 å’Œè‡ªå·±æ•´é™¤</li>
                    <li>æ¯ä¸ªæ­£æ•´æ•°éƒ½æœ‰å”¯ä¸€çš„è´¨å› æ•°åˆ†è§£</li>
                    <li>è´¨å› æ•°åˆ†è§£åœ¨å¯†ç å­¦ä¸­å¾ˆé‡è¦</li>
                    <li>å¯ç”¨äºæ±‚æœ€å¤§å…¬çº¦æ•°å’Œæœ€å°å…¬å€æ•°</li>
                </ul>
            </div>
        </div>

        <!-- åº”ç”¨ç¤ºä¾‹ -->
        <div class="example-section">
            <h2>ğŸ“š å®æˆ˜åº”ç”¨ç¤ºä¾‹</h2>
            <div class="example-grid">
                <div class="example-card" onclick="runExample('gcd')">
                    <h3>ğŸ”— æœ€å¤§å…¬çº¦æ•°</h3>
                    <div class="example-desc">ä½¿ç”¨è´¨å› æ•°åˆ†è§£æ±‚ GCD</div>
                    <div class="example-code">primeFactors(a) å’Œ primeFactors(b)</div>
                </div>

                <div class="example-card" onclick="runExample('lcm')">
                    <h3>âš¡ æœ€å°å…¬å€æ•°</h3>
                    <div class="example-desc">åˆ©ç”¨è´¨å› æ•°æ±‚ LCM</div>
                    <div class="example-code">primeFactors() ç»“åˆé›†åˆ</div>
                </div>

                <div class="example-card" onclick="runExample('divisor')">
                    <h3>ğŸ¯ å› æ•°ä¸ªæ•°</h3>
                    <div class="example-desc">å¿«é€Ÿè®¡ç®—ä¸€ä¸ªæ•°çš„å› æ•°ä¸ªæ•°</div>
                    <div class="example-code">è´¨å› æ•°å¹‚æ¬¡ + 1</div>
                </div>

                <div class="example-card" onclick="runExample('cryptography')">
                    <h3>ğŸ” RSA å¯†ç å­¦</h3>
                    <div class="example-desc">è´¨å› æ•°åˆ†è§£æ˜¯ RSA çš„åŸºç¡€</div>
                    <div class="example-code">å¤§æ•°è´¨å› æ•°åˆ†è§£å›°éš¾</div>
                </div>

                <div class="example-card" onclick="runExample('fraction')">
                    <h3>ğŸ“ åˆ†æ•°åŒ–ç®€</h3>
                    <div class="example-desc">ä½¿ç”¨è´¨å› æ•°åŒ–ç®€åˆ†æ•°</div>
                    <div class="example-code">æ±‚åˆ†å­åˆ†æ¯çš„ GCD</div>
                </div>

                <div class="example-card" onclick="runExample('perfect')">
                    <h3>ğŸ’ å®Œå…¨æ•°æ£€æµ‹</h3>
                    <div class="example-desc">æ£€æµ‹å®Œå…¨æ•°å’Œäº²å¯†æ•°</div>
                    <div class="example-code">åˆ†è§£å› æ•°è®¡ç®—å› æ•°å’Œ</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶è„šæœ¬ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>

    <script>
        // Core primeFactors function
        const primeFactors = n => {
            const a = [];
            let f = 2;
            while (n > 1) {
                if (n % f === 0) {
                    a.push(f);
                    n /= f;
                } else {
                    f++;
                }
            }
            return a;
        };

        let stats = {
            factorCount: 0
        };

        let plugins = {
            modal: null,
            notification: null,
            numberInput: null
        };

        // åˆå§‹åŒ–æ’ä»¶
        function initPlugins() {
            try {
                plugins.modal = new Modal();
                plugins.notification = new Notification();
                plugins.numberInput = new InputNumber({
                    container: '#numberInputContainer',
                    min: 2,
                    placeholder: 'è¾“å…¥æ­£æ•´æ•°',
                    value: 360
                });
            } catch (error) {
                console.warn('æ’ä»¶åŠ è½½å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            if (plugins.notification) {
                plugins.notification.show(message, type);
            } else {
                alert(message);
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(content) {
            if (plugins.modal) {
                plugins.modal.alert(content);
            } else {
                alert(content);
            }
        }

        // è·å–å› æ•°ç»Ÿè®¡
        function getFactorStats(factors) {
            if (factors.length === 0) return null;
            
            const stats = {};
            factors.forEach(f => {
                stats[f] = (stats[f] || 0) + 1;
            });
            return stats;
        }

        // ç”Ÿæˆå› æ•°è¡¨è¾¾å¼
        function generateExpression(factors) {
            if (factors.length === 0) return '';
            const stats = getFactorStats(factors);
            const parts = Object.entries(stats)
                .sort((a, b) => a[0] - b[0])
                .map(([factor, count]) => count > 1 ? `${factor}^${count}` : factor);
            return parts.join(' Ã— ');
        }

        // è´¨æ•°åˆ¤æ–­
        function isPrimeNumber(n) {
            if (n < 2) return false;
            if (n === 2) return true;
            if (n % 2 === 0) return false;
            for (let i = 3; i * i <= n; i += 2) {
                if (n % i === 0) return false;
            }
            return true;
        }

        // è®¡ç®—æ€»å› æ•°ä¸ªæ•°
        function countDivisors(factors) {
            const stats = getFactorStats(factors);
            let count = 1;
            Object.values(stats).forEach(exp => {
                count *= (exp + 1);
            });
            return count;
        }

        // åˆ†è§£è´¨å› æ•°
        function factorize() {
            const num = parseInt(plugins.numberInput ? plugins.numberInput.getValue() : document.getElementById('numberInput').value);
            
            if (isNaN(num) || num < 2) {
                showNotification('è¯·è¾“å…¥å¤§äº 1 çš„æ­£æ•´æ•°', 'warning');
                return;
            }

            const factors = primeFactors(num);
            const distinct = new Set(factors);
            const expression = generateExpression(factors);
            const isPrime = factors.length === 1;
            const divisorCount = countDivisors(factors);

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('inputNumber').textContent = num.toLocaleString();
            
            // æ˜¾ç¤ºå› æ•°
            const factorDisplay = document.getElementById('factorDisplay');
            factorDisplay.innerHTML = factors
                .map(f => `<span class="factor-badge">${f}</span>`)
                .join('<span class="factor-operator">Ã—</span>');

            document.getElementById('factorExpression').textContent = expression;
            
            // åˆ†æ
            document.getElementById('isPrime').textContent = isPrime ? 'æ˜¯ âœ“' : 'å¦ âœ—';
            document.getElementById('distinctCount').textContent = distinct.size;
            document.getElementById('totalFactorCount').textContent = factors.length;
            document.getElementById('maxFactor').textContent = Math.max(...factors);
            document.getElementById('minFactor').textContent = Math.min(...factors);
            document.getElementById('pattern').textContent = `å…± ${divisorCount} ä¸ªå› æ•°`;

            stats.factorCount++;
            document.getElementById('factorCount').textContent = stats.factorCount;

            const message = isPrime 
                ? `${num} æ˜¯è´¨æ•°ï¼ˆåªæœ‰ 1 å’Œ ${num} ä¸¤ä¸ªå› æ•°ï¼‰`
                : `${num} = ${expression}`;
            showNotification(message, isPrime ? 'warning' : 'success');
        }

        // å¿«é€Ÿåˆ†è§£
        function quickFactorize(num) {
            if (plugins.numberInput) {
                plugins.numberInput.setValue(num);
            } else {
                document.getElementById('numberInput').value = num;
            }
            factorize();
        }

        // è¿è¡Œç¤ºä¾‹
        function runExample(type) {
            const examples = {
                gcd: () => {
                    const msg = `ğŸ”— æœ€å¤§å…¬çº¦æ•° (GCD):\n\n` +
                        `åŸç†ï¼š\n` +
                        `ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°æ˜¯å®ƒä»¬å…±æœ‰è´¨å› æ•°çš„ä¹˜ç§¯\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `â€¢ GCD(12, 18)\n` +
                        `  12 = 2Â² Ã— 3\n` +
                        `  18 = 2 Ã— 3Â²\n` +
                        `  GCD = 2 Ã— 3 = 6\n\n` +
                        `å®ç°ä»£ç ï¼š\n` +
                        `function gcd(a, b) {\n` +
                        `  const factors1 = primeFactors(a);\n` +
                        `  const factors2 = primeFactors(b);\n` +
                        `  // æ±‚å…±åŒè´¨å› æ•°çš„ä¹˜ç§¯\n` +
                        `}\n\n` +
                        `åº”ç”¨åœºæ™¯ï¼š\n` +
                        `â€¢ åŒ–ç®€åˆ†æ•°\n` +
                        `â€¢ ç½‘æ ¼åˆ’åˆ†é—®é¢˜\n` +
                        `â€¢ æœ€ä¼˜åˆ†ç»„`;
                    showModal(msg);
                },

                lcm: () => {
                    const msg = `âš¡ æœ€å°å…¬å€æ•° (LCM):\n\n` +
                        `åŸç†ï¼š\n` +
                        `æœ€å°å…¬å€æ•°åŒ…å«æ‰€æœ‰è´¨å› æ•°çš„æœ€é«˜å¹‚æ¬¡\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `â€¢ LCM(12, 18)\n` +
                        `  12 = 2Â² Ã— 3\n` +
                        `  18 = 2 Ã— 3Â²\n` +
                        `  LCM = 2Â² Ã— 3Â² = 36\n\n` +
                        `å…³é”®å…¬å¼ï¼š\n` +
                        `LCM(a,b) Ã— GCD(a,b) = a Ã— b\n\n` +
                        `å®ç°æ€è·¯ï¼š\n` +
                        `1. è·å–æ‰€æœ‰è´¨å› æ•°\n` +
                        `2. å¯¹æ¯ä¸ªè´¨å› æ•°å–æœ€é«˜å¹‚æ¬¡\n` +
                        `3. å°†å®ƒä»¬ç›¸ä¹˜\n\n` +
                        `åº”ç”¨åœºæ™¯ï¼š\n` +
                        `â€¢ å‘¨æœŸåŒæ­¥é—®é¢˜\n` +
                        `â€¢ å·¥ä½œåˆ†é…\n` +
                        `â€¢ æ—¶é—´è§„åˆ’`;
                    showModal(msg);
                },

                divisor: () => {
                    const msg = `ğŸ¯ å› æ•°ä¸ªæ•°è®¡ç®—:\n\n` +
                        `å…¬å¼ï¼š\n` +
                        `å¦‚æœ n = pâ‚^aâ‚ Ã— pâ‚‚^aâ‚‚ Ã— ... Ã— pâ‚–^aâ‚–\n` +
                        `åˆ™å› æ•°ä¸ªæ•° = (aâ‚+1) Ã— (aâ‚‚+1) Ã— ... Ã— (aâ‚–+1)\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `â€¢ 12 = 2Â² Ã— 3\n` +
                        `  å› æ•°ä¸ªæ•° = (2+1) Ã— (1+1) = 6\n` +
                        `  å› æ•°ï¼š1, 2, 3, 4, 6, 12\n\n` +
                        `â€¢ 360 = 2Â³ Ã— 3Â² Ã— 5\n` +
                        `  å› æ•°ä¸ªæ•° = (3+1) Ã— (2+1) Ã— (1+1) = 24\n\n` +
                        `å®ç°ä»£ç ï¼š\n` +
                        `function countDivisors(n) {\n` +
                        `  const factors = primeFactors(n);\n` +
                        `  const stats = {};\n` +
                        `  factors.forEach(f => stats[f]++);\n` +
                        `  return Object.values(stats)\n` +
                        `    .reduce((a,b)=> a*(b+1), 1);\n` +
                        `}\n\n` +
                        `åº”ç”¨ï¼š\n` +
                        `â€¢ å¿«é€Ÿè®¡ç®—å› æ•°ä¸ªæ•°\n` +
                        `â€¢ æ— éœ€åˆ—ä¸¾æ‰€æœ‰å› æ•°`;
                    showModal(msg);
                },

                cryptography: () => {
                    const msg = `ğŸ” RSA å¯†ç å­¦:\n\n` +
                        `RSA åŸç†ï¼š\n` +
                        `1. é€‰æ‹©ä¸¤ä¸ªå¤§è´¨æ•° p å’Œ q\n` +
                        `2. è®¡ç®— n = p Ã— q\n` +
                        `3. è´¨å› æ•°åˆ†è§£ n å¾ˆå›°éš¾\n\n` +
                        `å®‰å…¨åŸºç¡€ï¼š\n` +
                        `å¤§æ•°çš„è´¨å› æ•°åˆ†è§£æ˜¯ NP å›°éš¾é—®é¢˜\n` +
                        `â€¢ 1024 ä½æ•°éœ€è¦æé•¿æ—¶é—´\n` +
                        `â€¢ 2048 ä½æ•°æ›´åŠ å®‰å…¨\n\n` +
                        `å®é™…ä¾‹å­ï¼š\n` +
                        `â€¢ n = 91ï¼ˆå°æ•°å­—ï¼‰\n` +
                        `  91 = 7 Ã— 13ï¼ˆå®¹æ˜“åˆ†è§£ï¼‰\n` +
                        `â€¢ å·¨å¤§ n æ— æ³•åœ¨åˆç†æ—¶é—´åˆ†è§£\n\n` +
                        `å…¬é’¥å¯†ç ä½“åˆ¶ï¼š\n` +
                        `â€¢ å…¬å¼€ï¼šn å’Œ e\n` +
                        `â€¢ ä¿å¯†ï¼šp å’Œ qï¼ˆè´¨å› æ•°ï¼‰\n` +
                        `â€¢ æ”»å‡»æˆæœ¬ï¼šåˆ†è§£ n\n\n` +
                        `ç°çŠ¶ï¼š\n` +
                        `é‡å­è®¡ç®—æœºå¯èƒ½å¨èƒ RSAå®‰å…¨`;
                    showModal(msg);
                },

                fraction: () => {
                    const msg = `ğŸ“ åˆ†æ•°åŒ–ç®€:\n\n` +
                        `åŸç†ï¼š\n` +
                        `åˆ†æ•°åŒ–ç®€ = åˆ†å­åˆ†æ¯ Ã· æœ€å¤§å…¬çº¦æ•°\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `â€¢ åŒ–ç®€ 12/18\n` +
                        `  åˆ†å­ï¼š12 = 2Â² Ã— 3\n` +
                        `  åˆ†æ¯ï¼š18 = 2 Ã— 3Â²\n` +
                        `  GCD = 2 Ã— 3 = 6\n` +
                        `  ç»“æœï¼š12/18 = 2/3\n\n` +
                        `â€¢ åŒ–ç®€ 60/90\n` +
                        `  60 = 2Â² Ã— 3 Ã— 5\n` +
                        `  90 = 2 Ã— 3Â² Ã— 5\n` +
                        `  GCD = 2 Ã— 3 Ã— 5 = 30\n` +
                        `  ç»“æœï¼š60/90 = 2/3\n\n` +
                        `å®ç°æ­¥éª¤ï¼š\n` +
                        `1. åˆ†åˆ«åˆ†è§£åˆ†å­åˆ†æ¯\n` +
                        `2. æ‰¾å‡ºå…±åŒè´¨å› æ•°\n` +
                        `3. æ¶ˆé™¤è¿™äº›å› æ•°\n\n` +
                        `åº”ç”¨ï¼š\n` +
                        `â€¢ æ•°å­¦è®¡ç®—\n` +
                        `â€¢ è®¡ç®—æœºå›¾å½¢å­¦\n` +
                        `â€¢ å·¥ç¨‹è®¡ç®—`;
                    showModal(msg);
                },

                perfect: () => {
                    const msg = `ğŸ’ å®Œå…¨æ•°æ£€æµ‹:\n\n` +
                        `å®šä¹‰ï¼š\n` +
                        `å®Œå…¨æ•° = é™¤è‡ªèº«å¤–æ‰€æœ‰å› æ•°ä¹‹å’Œ\n\n` +
                        `ç¤ºä¾‹ï¼š\n` +
                        `â€¢ 6 æ˜¯å®Œå…¨æ•°\n` +
                        `  å› æ•°ï¼š1, 2, 3, 6\n` +
                        `  é™¤è‡ªèº«ï¼š1 + 2 + 3 = 6 âœ“\n\n` +
                        `â€¢ 28 æ˜¯å®Œå…¨æ•°\n` +
                        `  å› æ•°ï¼š1, 2, 4, 7, 14, 28\n` +
                        `  é™¤è‡ªèº«ï¼š1 + 2 + 4 + 7 + 14 = 28 âœ“\n\n` +
                        `â€¢ 496 æ˜¯å®Œå…¨æ•°\n` +
                        `  å› æ•°å’Œ = 496\n\n` +
                        `å®ç°é€»è¾‘ï¼š\n` +
                        `function isPerfect(n) {\n` +
                        `  const factors = primeFactors(n);\n` +
                        `  // ä»å› æ•°æ±‚å‡ºæ‰€æœ‰å› æ•°\n` +
                        `  // æ±‚å’Œä¸ n æ¯”è¾ƒ\n` +
                        `}\n\n` +
                        `æœ‰è¶£æ€§è´¨ï¼š\n` +
                        `â€¢ å·²çŸ¥å®Œå…¨æ•°æå°‘\n` +
                        `â€¢ æ‰€æœ‰å·²çŸ¥å®Œå…¨æ•°éƒ½æ˜¯å¶æ•°\n` +
                        `â€¢ ä¸æ¢…æ£®è´¨æ•°æœ‰å…³\n\n` +
                        `äº²å¯†æ•°ï¼š\n` +
                        `â€¢ 220 = 2Â² Ã— 5 Ã— 11\n` +
                        `â€¢ 284 = 2Â² Ã— 71\n` +
                        `â€¢ 220 çš„çœŸå› æ•°å’Œ = 284\n` +
                        `â€¢ 284 çš„çœŸå› æ•°å’Œ = 220`;
                    showModal(msg);
                }
            };

            examples[type]?.();
        }

        // å›è½¦åˆ†è§£
        document.addEventListener('DOMContentLoaded', () => {
            const handleEnter = (e) => {
                if (e.key === 'Enter') {
                    factorize();
                }
            };
            
            // æ”¯æŒåŸç”Ÿ input å’Œæ’ä»¶ input
            const inputEl = document.getElementById('numberInput');
            if (inputEl) {
                inputEl.addEventListener('keypress', handleEnter);
            }
            
            // ç­‰å¾…æ’ä»¶åˆå§‹åŒ–åå†ç»‘å®šäº‹ä»¶
            setTimeout(() => {
                if (plugins.numberInput && plugins.numberInput.input) {
                    plugins.numberInput.input.addEventListener('keypress', handleEnter);
                }
            }, 500);
        });

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initPlugins();
            factorize();
        });
    </script>
</body>

</html>