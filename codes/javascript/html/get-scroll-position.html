<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êô∫ËÉΩÊªöÂä®ÁõëÊéßÁÆ°ÁêÜÂô® - getScrollPosition ÂÆûÊàòÁ§∫‰æã</title>
    
    <!-- ÂºïÂÖ•Ëá™ÂÆö‰πâÊèí‰ª∂Ê†∑Âºè -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <link rel="stylesheet" href="../../demo/plugins/datetime-picker/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .status-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .status-item {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .status-item .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .status-item .value {
            font-size: 1.4rem;
            margin-top: 5px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            margin-bottom: 50px;
        }

        .content-area {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .control-panel h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            border-color: #4285f4;
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn.btn-danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .btn.btn-success {
            background: linear-gradient(45deg, #51cf66, #40c057);
        }

        .scroll-demo-content {
            line-height: 1.8;
            color: #444;
        }

        .scroll-demo-content h2 {
            color: #333;
            margin: 30px 0 15px 0;
            font-size: 1.5rem;
        }

        .scroll-demo-content p {
            margin-bottom: 15px;
            text-align: justify;
        }

        .scroll-trigger {
            background: linear-gradient(45deg, #ffd89b 0%, #19547b 100%);
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .scroll-trigger.triggered {
            background: linear-gradient(45deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .log-panel {
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            line-height: 1.4;
        }

        .log-entry {
            margin-bottom: 5px;
            opacity: 0;
            animation: fadeInLog 0.3s ease forwards;
        }

        @keyframes fadeInLog {
            to {
                opacity: 1;
            }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric-card {
            background: linear-gradient(45deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .metric-card .number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .metric-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-bar {
            background: #e1e5e9;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 8px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .floating-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }

        .floating-btn.scroll-to-top {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .floating-btn.settings {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .status-bar {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* ÊªöÂä®Êù°Ê†∑Âºè */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #764ba2, #667eea);
        }
    </style>
</head>

<body>
    <div class="app-container">
        <!-- Â§¥ÈÉ®Áä∂ÊÄÅÊ†è -->
        <div class="header">
            <h1>üöÄ Êô∫ËÉΩÊªöÂä®ÁõëÊéßÁÆ°ÁêÜÂô®</h1>
            <p>Âü∫‰∫é getScrollPosition ÁöÑÈ´òÁ∫ßÊªöÂä®ÂàÜÊûê‰∏éÁõëÊéßÁ≥ªÁªü</p>
            
            <div class="status-bar">
                <div class="status-item">
                    <div class="label">ÂΩìÂâçXÂùêÊ†á</div>
                    <div class="value" id="currentX">0</div>
                </div>
                <div class="status-item">
                    <div class="label">ÂΩìÂâçYÂùêÊ†á</div>
                    <div class="value" id="currentY">0</div>
                </div>
                <div class="status-item">
                    <div class="label">ÊªöÂä®Ë∑ùÁ¶ª</div>
                    <div class="value" id="totalDistance">0</div>
                </div>
                <div class="status-item">
                    <div class="label">ÊªöÂä®Ê¨°Êï∞</div>
                    <div class="value" id="scrollCount">0</div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
        <div class="main-content">
            <!-- Â∑¶‰æßÂÜÖÂÆπÂå∫ -->
            <div class="content-area">
                <div class="scroll-demo-content">
                    <h2>üìã È°πÁõÆÊ¶ÇËø∞</h2>
                    <p>ËøôÊòØ‰∏Ä‰∏™Âü∫‰∫é getScrollPosition ÊñπÊ≥ïÁöÑÈ´òÁ∫ßÂÆûÊàòÁ§∫‰æãÔºåÂ±ïÁ§∫‰∫ÜÂú®Áé∞‰ª£WebÂ∫îÁî®‰∏≠Â¶Ç‰ΩïÊúâÊïàÂú∞ÁõëÊéßÂíåÂàÜÊûêÁî®Êà∑ÊªöÂä®Ë°å‰∏∫„ÄÇËØ•Á≥ªÁªü‰∏ç‰ªÖËÉΩÂ§üÂÆûÊó∂ËøΩË∏™ÊªöÂä®‰ΩçÁΩÆÔºåËøòÊèê‰æõ‰∫Ü‰∏∞ÂØåÁöÑÊï∞ÊçÆÂàÜÊûêÂíåÂèØËßÜÂåñÂäüËÉΩ„ÄÇ</p>
                    
                    <div class="scroll-trigger" data-trigger="section1">
                        üéØ ÊªöÂä®Ëß¶ÂèëÂô® #1 - È°πÁõÆ‰ªãÁªçÂå∫Âüü
                    </div>

                    <h2>üîß Ê†∏ÂøÉÂäüËÉΩÁâπÊÄß</h2>
                    <p>Á≥ªÁªüÈõÜÊàê‰∫ÜÂ§öÁßçÂÖàËøõÁöÑÊªöÂä®ÁõëÊéßÊäÄÊúØÔºåÂåÖÊã¨ÂÆûÊó∂‰ΩçÁΩÆËøΩË∏™„ÄÅÊªöÂä®Ë∑ùÁ¶ªËÆ°ÁÆó„ÄÅÈÄüÂ∫¶ÂàÜÊûê„ÄÅËß¶ÂèëÂå∫ÂüüÊ£ÄÊµãÁ≠â„ÄÇÈÄöËøáËá™ÂÆö‰πâÁöÑUIÁªÑ‰ª∂ÔºàInputNumber„ÄÅDateTimePicker„ÄÅModalÁ≠âÔºâÔºåÁî®Êà∑ÂèØ‰ª•ÁÅµÊ¥ªÈÖçÁΩÆÁõëÊéßÂèÇÊï∞„ÄÇ</p>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="number" id="avgSpeed">0</div>
                            <div class="label">Âπ≥ÂùáÈÄüÂ∫¶ px/s</div>
                        </div>
                        <div class="metric-card">
                            <div class="number" id="maxSpeed">0</div>
                            <div class="label">ÊúÄÂ§ßÈÄüÂ∫¶ px/s</div>
                        </div>
                        <div class="metric-card">
                            <div class="number" id="sessionsToday">1</div>
                            <div class="label">‰ªäÊó•‰ºöËØù</div>
                        </div>
                        <div class="metric-card">
                            <div class="number" id="triggerHits">0</div>
                            <div class="label">Ëß¶ÂèëÊ¨°Êï∞</div>
                        </div>
                    </div>

                    <h2>üìä Êï∞ÊçÆÂàÜÊûê‰∏éÊä•Âëä</h2>
                    <p>Á≥ªÁªüÊèê‰æõËØ¶ÁªÜÁöÑÊªöÂä®Ë°å‰∏∫ÂàÜÊûêÊä•ÂëäÔºåÂåÖÊã¨Áî®Êà∑ÂÅúÁïôÊó∂Èó¥„ÄÅÊªöÂä®Ê®°ÂºèËØÜÂà´„ÄÅÁÉ≠ÁÇπÂå∫ÂüüÂàÜÊûêÁ≠â„ÄÇËøô‰∫õÊï∞ÊçÆÂØπ‰∫é‰ºòÂåñÁî®Êà∑‰ΩìÈ™åÂíåÊèêÂçáÈ°µÈù¢ËÆæËÆ°ÂÖ∑ÊúâÈáçË¶Å‰ª∑ÂÄº„ÄÇ</p>
                    
                    <div class="scroll-trigger" data-trigger="section2">
                        üìà ÊªöÂä®Ëß¶ÂèëÂô® #2 - Êï∞ÊçÆÂàÜÊûêÂå∫Âüü
                    </div>

                    <h2>üé® Áî®Êà∑ÁïåÈù¢ËÆæËÆ°</h2>
                    <p>ÈááÁî®Áé∞‰ª£ÂåñÁöÑÊ∏êÂèòËÆæËÆ°ÂíåÊØõÁéªÁíÉÊïàÊûúÔºåÁ°Æ‰øùÁïåÈù¢ÁæéËßÇ‰∏îÊòì‰∫é‰ΩøÁî®„ÄÇÂìçÂ∫îÂºèÂ∏ÉÂ±ÄÈÄÇÈÖçÂêÑÁßçËÆæÂ§áÂ∞∫ÂØ∏ÔºåÊèê‰æõ‰∏ÄËá¥ÁöÑÁî®Êà∑‰ΩìÈ™å„ÄÇÊâÄÊúâ‰∫§‰∫íÂÖÉÁ¥†ÈÉΩÁªèËøáÁ≤æÂøÉËÆæËÆ°ÔºåÁ¨¶ÂêàÁé∞‰ª£WebËÆæËÆ°Ê†áÂáÜ„ÄÇ</p>

                    <h2>‚öôÔ∏è ÊäÄÊúØÂÆûÁé∞ÁªÜËäÇ</h2>
                    <p>Ê†∏ÂøÉÂü∫‰∫é getScrollPosition ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ËÉΩÂ§üÂáÜÁ°ÆËé∑Âèñ‰ªªÊÑèÂÖÉÁ¥†ÁöÑÊªöÂä®‰ΩçÁΩÆ„ÄÇÁ≥ªÁªüËøòÈõÜÊàê‰∫ÜÈò≤ÊäñÂíåËäÇÊµÅÊäÄÊúØÔºåÁ°Æ‰øùÈ´òÈ¢ëÊªöÂä®‰∫ã‰ª∂ÁöÑÊÄßËÉΩ‰ºòÂåñ„ÄÇÊï∞ÊçÆÊåÅ‰πÖÂåñÈááÁî® localStorageÔºåÊîØÊåÅË∑®‰ºöËØùÁöÑÊï∞ÊçÆ‰øùÂ≠ò„ÄÇ</p>
                    
                    <div class="scroll-trigger" data-trigger="section3">
                        ‚ö° ÊªöÂä®Ëß¶ÂèëÂô® #3 - ÊäÄÊúØÂÆûÁé∞Âå∫Âüü
                    </div>

                    <h2>üì± ÁßªÂä®Á´ØÈÄÇÈÖç</h2>
                    <p>ÂÆåÊï¥ÊîØÊåÅÁßªÂä®ËÆæÂ§áÁöÑËß¶Êë∏ÊªöÂä®ÔºåÂåÖÊã¨ÊÉØÊÄßÊªöÂä®„ÄÅÊ©°ÁöÆÁ≠ãÊïàÊûúÁ≠â„ÄÇÈÄöËøá CSS Grid Âíå Flexbox ÂÆûÁé∞ÁöÑÂìçÂ∫îÂºèÂ∏ÉÂ±ÄÁ°Æ‰øùÂú®‰∏çÂêåÂ±èÂπïÂ∞∫ÂØ∏‰∏ãÈÉΩËÉΩÊèê‰æõÊúÄ‰Ω≥ÁöÑÁî®Êà∑‰ΩìÈ™å„ÄÇ</p>

                    <h2>üîÆ Êú™Êù•ÂèëÂ±ïËßÑÂàí</h2>
                    <p>ËÆ°ÂàíÈõÜÊàêÊú∫Âô®Â≠¶‰π†ÁÆóÊ≥ïËøõË°åÁî®Êà∑Ë°å‰∏∫È¢ÑÊµãÔºåÊ∑ªÂä†Êõ¥Â§öÁöÑÊï∞ÊçÆÂèØËßÜÂåñÂõæË°®ÔºåÊîØÊåÅÂ§öÁßçÊï∞ÊçÆÂØºÂá∫Ê†ºÂºèÔºå‰ª•ÂèäÊèê‰æõ RESTful API ‰æõÁ¨¨‰∏âÊñπÁ≥ªÁªüÈõÜÊàê‰ΩøÁî®„ÄÇ</p>
                    
                    <div class="scroll-trigger" data-trigger="section4">
                        üöÄ ÊªöÂä®Ëß¶ÂèëÂô® #4 - Êú™Êù•ËßÑÂàíÂå∫Âüü
                    </div>

                    <h2>üìñ ‰ΩøÁî®ÊåáÂçó</h2>
                    <p>Âè≥‰æßÊéßÂà∂Èù¢ÊùøÊèê‰æõ‰∫Ü‰∏∞ÂØåÁöÑÈÖçÁΩÆÈÄâÈ°πÔºåÂåÖÊã¨ÁõëÊéßÈó¥ÈöîËÆæÁΩÆ„ÄÅËß¶ÂèëÈòàÂÄºÈÖçÁΩÆ„ÄÅÊï∞ÊçÆËÆ∞ÂΩïÁÆ°ÁêÜÁ≠â„ÄÇÁî®Êà∑ÂèØ‰ª•Ê†πÊçÆÂÖ∑‰ΩìÈúÄÊ±ÇË∞ÉÊï¥Ëøô‰∫õÂèÇÊï∞Ôºå‰ª•Ëé∑ÂæóÊúÄ‰Ω≥ÁöÑÁõëÊéßÊïàÊûú„ÄÇ</p>

                    <p>Á≥ªÁªüËøòÊîØÊåÅÊï∞ÊçÆÂØºÂá∫ÂäüËÉΩÔºåÂèØ‰ª•Â∞ÜÊî∂ÈõÜÂà∞ÁöÑÊªöÂä®Êï∞ÊçÆÂØºÂá∫‰∏∫ JSON Êàñ CSV Ê†ºÂºèÔºå‰æø‰∫éËøõ‰∏ÄÊ≠•ÁöÑÊï∞ÊçÆÂàÜÊûêÂíåÂ§ÑÁêÜ„ÄÇÈÄöËøáÊó•ÊúüÊó∂Èó¥ÈÄâÊã©Âô®ÔºåÁî®Êà∑ÂèØ‰ª•Êü•ÁúãÁâπÂÆöÊó∂Èó¥ÊÆµÁöÑÊªöÂä®ÁªüËÆ°Êï∞ÊçÆ„ÄÇ</p>

                    <p>ÊÑüË∞¢‰ΩøÁî®Êô∫ËÉΩÊªöÂä®ÁõëÊéßÁÆ°ÁêÜÂô®ÔºÅËøô‰∏™Á§∫‰æãÂ±ïÁ§∫‰∫Ü getScrollPosition ÂáΩÊï∞Âú®ÂÆûÈôÖ‰∏öÂä°Âú∫ÊôØ‰∏≠ÁöÑÂº∫Â§ßÂ∫îÁî®ÊΩúÂäõ„ÄÇ</p>
                </div>
            </div>

            <!-- Âè≥‰æßÊéßÂà∂Èù¢Êùø -->
            <div class="sidebar">
                <!-- ÁõëÊéßËÆæÁΩÆ -->
                <div class="control-panel">
                    <h3>‚öôÔ∏è ÁõëÊéßËÆæÁΩÆ</h3>
                    
                    <div class="form-group">
                        <label>ÁõëÊéßÈó¥Èöî (ÊØ´Áßí)</label>
                        <div id="intervalInput"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ëß¶ÂèëÈòàÂÄº (ÂÉèÁ¥†)</label>
                        <div id="thresholdInput"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>ÂêØÁî®ÂÆûÊó∂ÁõëÊéß</label>
                        <div id="enableMonitoring"></div>
                    </div>
                    
                    <button class="btn" onclick="applySettings()">Â∫îÁî®ËÆæÁΩÆ</button>
                    <button class="btn btn-danger" onclick="resetSettings()">ÈáçÁΩÆËÆæÁΩÆ</button>
                </div>

                <!-- Êï∞ÊçÆÁÆ°ÁêÜ -->
                <div class="control-panel">
                    <h3>üìä Êï∞ÊçÆÁÆ°ÁêÜ</h3>
                    
                    <div class="form-group">
                        <label>ÈÄâÊã©Êó•ÊúüËåÉÂõ¥</label>
                        <div id="dateRangePicker"></div>
                    </div>
                    
                    <button class="btn btn-success" onclick="exportData()">ÂØºÂá∫Êï∞ÊçÆ</button>
                    <button class="btn" onclick="showStatistics()">Êü•ÁúãÁªüËÆ°</button>
                    <button class="btn btn-danger" onclick="clearData()">Ê∏ÖÁ©∫Êï∞ÊçÆ</button>
                </div>

                <!-- ÂÆûÊó∂Êó•Âøó -->
                <div class="control-panel">
                    <h3>üìù ÂÆûÊó∂Êó•Âøó</h3>
                    <div class="log-panel" id="logPanel">
                        <div class="log-entry">Á≥ªÁªüÂàùÂßãÂåñÂÆåÊàê...</div>
                    </div>
                    <button class="btn" onclick="clearLog()">Ê∏ÖÁ©∫Êó•Âøó</button>
                </div>
            </div>
        </div>

        <!-- È°µÈù¢Â∫ïÈÉ®ËøõÂ∫¶Êù° -->
        <div class="progress-bar">
            <div class="progress-fill" id="scrollProgress"></div>
        </div>
    </div>

    <!-- ÊµÆÂä®ÊéßÂà∂ÊåâÈíÆ -->
    <div class="floating-controls">
        <button class="floating-btn scroll-to-top" onclick="scrollToTop()" title="ÂõûÂà∞È°∂ÈÉ®">
            ‚Üë
        </button>
        <button class="floating-btn settings" onclick="openSettings()" title="ËÆæÁΩÆ">
            ‚öô
        </button>
    </div>

    <!-- ÂºïÂÖ•Ëá™ÂÆö‰πâÊèí‰ª∂ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>
    <script src="../../demo/plugins/datetime-picker/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>

<script>
        // Ê†∏ÂøÉ getScrollPosition ÂáΩÊï∞
    const getScrollPosition = (el = window) => ({
        x: el.pageXOffset !== undefined ? el.pageXOffset : el.scrollLeft,
        y: el.pageYOffset !== undefined ? el.pageYOffset : el.scrollTop
        });

        // ÂÖ®Â±ÄÂèòÈáè
        let scrollMonitor = {
            isActive: false,
            interval: 100,
            threshold: 50,
            lastPosition: { x: 0, y: 0 },
            totalDistance: 0,
            scrollCount: 0,
            speeds: [],
            maxSpeed: 0,
            triggerHits: 0,
            sessionData: [],
            startTime: Date.now()
        };

        // UI ÁªÑ‰ª∂ÂÆû‰æã
        let modal, intervalInput, thresholdInput, enableCheckbox, dateTimePicker;

        // ÂàùÂßãÂåñÁ≥ªÁªü
        function initializeSystem() {
            log('Ê≠£Âú®ÂàùÂßãÂåñÊô∫ËÉΩÊªöÂä®ÁõëÊéßÁ≥ªÁªü...');
            
            // ÂàùÂßãÂåñModal
            modal = new Modal({ closeOnOverlayClick: true });
            
            // ÂàùÂßãÂåñInputNumberÁªÑ‰ª∂
            intervalInput = new InputNumber({
                container: '#intervalInput',
                min: 50,
                max: 5000,
                step: 50,
                value: 100,
                onChange: (value) => {
                    scrollMonitor.interval = value;
                    log(`ÁõëÊéßÈó¥ÈöîÂ∑≤Êõ¥Êñ∞: ${value}ms`);
                }
            });

            thresholdInput = new InputNumber({
                container: '#thresholdInput',
                min: 10,
                max: 500,
                step: 10,
                value: 50,
                onChange: (value) => {
                    scrollMonitor.threshold = value;
                    log(`Ëß¶ÂèëÈòàÂÄºÂ∑≤Êõ¥Êñ∞: ${value}px`);
                }
            });

            // ÂàùÂßãÂåñDateTimePicker
            dateTimePicker = new DateTimePicker({
                container: '#dateRangePicker',
                placeholder: 'ÈÄâÊã©Êü•ËØ¢Êó•Êúü',
                onChange: (value) => {
                    log(`Êó•ÊúüËåÉÂõ¥Â∑≤ÈÄâÊã©: ${value}`);
                }
            });

            // ÂàùÂßãÂåñCheckboxÔºàÁÆÄÂåñÂÆûÁé∞Ôºâ
            const checkboxContainer = document.getElementById('enableMonitoring');
            checkboxContainer.innerHTML = `
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="monitoringCheckbox" checked style="margin-right: 8px;">
                    <span>ÂêØÁî®ÂÆûÊó∂ÁõëÊéß</span>
                </label>
            `;

            // ÂêØÂä®ÁõëÊéß
            startMonitoring();
            
            // ËÆæÁΩÆÊªöÂä®‰∫ã‰ª∂ÁõëÂê¨
            setupScrollListeners();
            
            log('Á≥ªÁªüÂàùÂßãÂåñÂÆåÊàêÔºåÂºÄÂßãÁõëÊéßÊªöÂä®Ë°å‰∏∫');
        }

        // ÂêØÂä®ÁõëÊéß
        function startMonitoring() {
            if (scrollMonitor.isActive) return;
            
            scrollMonitor.isActive = true;
            scrollMonitor.startTime = Date.now();
            
            const monitorLoop = () => {
                if (!scrollMonitor.isActive) return;
                
                const currentPos = getScrollPosition();
                const checkbox = document.getElementById('monitoringCheckbox');
                
                if (checkbox && checkbox.checked) {
                    updateScrollMetrics(currentPos);
                    updateUI(currentPos);
                }
                
                setTimeout(monitorLoop, scrollMonitor.interval);
            };
            
            monitorLoop();
        }

        // ËÆæÁΩÆÊªöÂä®‰∫ã‰ª∂ÁõëÂê¨
        function setupScrollListeners() {
            let lastScrollTime = Date.now();
            let isScrolling = false;

            window.addEventListener('scroll', throttle(() => {
                const currentTime = Date.now();
                const currentPos = getScrollPosition();
                
                // ËÆ°ÁÆóÊªöÂä®ÈÄüÂ∫¶
                const timeDiff = currentTime - lastScrollTime;
                const distanceDiff = Math.abs(currentPos.y - scrollMonitor.lastPosition.y);
                const speed = timeDiff > 0 ? (distanceDiff / timeDiff) * 1000 : 0;
                
                if (speed > 0) {
                    scrollMonitor.speeds.push(speed);
                    if (speed > scrollMonitor.maxSpeed) {
                        scrollMonitor.maxSpeed = speed;
                    }
                }
                
                // Ê£ÄÊü•Ëß¶ÂèëÂô®
                checkScrollTriggers(currentPos.y);
                
                // Êõ¥Êñ∞ËøõÂ∫¶Êù°
                updateScrollProgress();
                
                lastScrollTime = currentTime;
                scrollMonitor.lastPosition = currentPos;
                
                // Ê†áËÆ∞Ê≠£Âú®ÊªöÂä®
                if (!isScrolling) {
                    isScrolling = true;
                    document.body.classList.add('scrolling');
                }
                
                // ÊªöÂä®ÁªìÊùüÊ£ÄÊµã
                clearTimeout(window.scrollEndTimer);
                window.scrollEndTimer = setTimeout(() => {
                    isScrolling = false;
                    document.body.classList.remove('scrolling');
                    log(`ÊªöÂä®ÁªìÊùü‰∫é‰ΩçÁΩÆ: (${currentPos.x}, ${currentPos.y})`);
                }, 150);
                
            }, 16)); // Á∫¶60fps
        }

        // Êõ¥Êñ∞ÊªöÂä®ÊåáÊ†á
        function updateScrollMetrics(currentPos) {
            const distance = Math.sqrt(
                Math.pow(currentPos.x - scrollMonitor.lastPosition.x, 2) +
                Math.pow(currentPos.y - scrollMonitor.lastPosition.y, 2)
            );
            
            if (distance > scrollMonitor.threshold) {
                scrollMonitor.totalDistance += distance;
                scrollMonitor.scrollCount++;
                
                // ËÆ∞ÂΩï‰ºöËØùÊï∞ÊçÆ
                scrollMonitor.sessionData.push({
                    timestamp: Date.now(),
                    position: { ...currentPos },
                    distance: distance
                });
                
                // ÈôêÂà∂‰ºöËØùÊï∞ÊçÆÂ§ßÂ∞è
                if (scrollMonitor.sessionData.length > 1000) {
                    scrollMonitor.sessionData = scrollMonitor.sessionData.slice(-500);
                }
            }
            
            scrollMonitor.lastPosition = currentPos;
        }

        // Êõ¥Êñ∞UIÊòæÁ§∫
        function updateUI(currentPos) {
            document.getElementById('currentX').textContent = Math.round(currentPos.x);
            document.getElementById('currentY').textContent = Math.round(currentPos.y);
            document.getElementById('totalDistance').textContent = Math.round(scrollMonitor.totalDistance);
            document.getElementById('scrollCount').textContent = scrollMonitor.scrollCount;
            
            // ËÆ°ÁÆóÂπ≥ÂùáÈÄüÂ∫¶
            const avgSpeed = scrollMonitor.speeds.length > 0 
                ? scrollMonitor.speeds.reduce((a, b) => a + b) / scrollMonitor.speeds.length 
                : 0;
            
            document.getElementById('avgSpeed').textContent = Math.round(avgSpeed);
            document.getElementById('maxSpeed').textContent = Math.round(scrollMonitor.maxSpeed);
            document.getElementById('triggerHits').textContent = scrollMonitor.triggerHits;
        }

        // Ê£ÄÊü•ÊªöÂä®Ëß¶ÂèëÂô®
        function checkScrollTriggers(scrollY) {
            const triggers = document.querySelectorAll('.scroll-trigger');
            triggers.forEach(trigger => {
                const rect = trigger.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                
                if (isVisible && !trigger.classList.contains('triggered')) {
                    trigger.classList.add('triggered');
                    scrollMonitor.triggerHits++;
                    
                    const triggerName = trigger.getAttribute('data-trigger');
                    log(`Ëß¶ÂèëÂô®ÊøÄÊ¥ª: ${triggerName} (‰ΩçÁΩÆ: ${Math.round(scrollY)}px)`);
                    
                    // Ëß¶ÂèëÂä®ÁîªÊïàÊûú
                    trigger.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        trigger.style.transform = '';
                    }, 300);
                }
            });
        }

        // Êõ¥Êñ∞ÊªöÂä®ËøõÂ∫¶Êù°
        function updateScrollProgress() {
            const documentHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrolled = window.pageYOffset;
            const progress = (scrolled / documentHeight) * 100;
            
            document.getElementById('scrollProgress').style.width = `${Math.min(progress, 100)}%`;
        }

        // ËäÇÊµÅÂáΩÊï∞
        function throttle(func, limit) {
            let inThrottle;
            return function() {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(() => inThrottle = false, limit);
                }
            }
        }

        // Êó•ÂøóËÆ∞ÂΩï
        function log(message) {
            const logPanel = document.getElementById('logPanel');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            
            logPanel.appendChild(logEntry);
            logPanel.scrollTop = logPanel.scrollHeight;
            
            // ÈôêÂà∂Êó•ÂøóÊù°ÁõÆÊï∞Èáè
            const entries = logPanel.querySelectorAll('.log-entry');
            if (entries.length > 50) {
                entries[0].remove();
            }
        }

        // Â∫îÁî®ËÆæÁΩÆ
        function applySettings() {
            const checkbox = document.getElementById('monitoringCheckbox');
            scrollMonitor.isActive = checkbox.checked;
            
            modal.alert('ËÆæÁΩÆÂ∑≤Â∫îÁî®ÔºÅÁõëÊéßÁ≥ªÁªüÂ∑≤Ê†πÊçÆÊñ∞ÈÖçÁΩÆÊõ¥Êñ∞„ÄÇ');
            log('Áî®Êà∑Â∫îÁî®‰∫ÜÊñ∞ÁöÑÁõëÊéßËÆæÁΩÆ');
        }

        // ÈáçÁΩÆËÆæÁΩÆ
        function resetSettings() {
            modal.confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâËÆæÁΩÆÂêóÔºüËøôÂ∞ÜÊ∏ÖÈô§ÂΩìÂâçÁöÑÈÖçÁΩÆÂíåÊï∞ÊçÆ„ÄÇ').then(confirmed => {
                if (confirmed) {
                    // ÈáçÁΩÆÁªÑ‰ª∂ÂÄº
                    intervalInput.setValue(100);
                    thresholdInput.setValue(50);
                    document.getElementById('monitoringCheckbox').checked = true;
                    
                    // ÈáçÁΩÆÁõëÊéßÊï∞ÊçÆ
                    scrollMonitor = {
                        isActive: true,
                        interval: 100,
                        threshold: 50,
                        lastPosition: { x: 0, y: 0 },
                        totalDistance: 0,
                        scrollCount: 0,
                        speeds: [],
                        maxSpeed: 0,
                        triggerHits: 0,
                        sessionData: [],
                        startTime: Date.now()
                    };
                    
                    log('ÊâÄÊúâËÆæÁΩÆÂ∑≤ÈáçÁΩÆ‰∏∫ÈªòËÆ§ÂÄº');
                    modal.alert('ËÆæÁΩÆÈáçÁΩÆÂÆåÊàêÔºÅ');
                }
            });
        }

        // ÂØºÂá∫Êï∞ÊçÆ
        function exportData() {
            const exportData = {
                summary: {
                    totalDistance: scrollMonitor.totalDistance,
                    scrollCount: scrollMonitor.scrollCount,
                    maxSpeed: scrollMonitor.maxSpeed,
                    avgSpeed: scrollMonitor.speeds.length > 0 
                        ? scrollMonitor.speeds.reduce((a, b) => a + b) / scrollMonitor.speeds.length 
                        : 0,
                    triggerHits: scrollMonitor.triggerHits,
                    sessionDuration: Date.now() - scrollMonitor.startTime
                },
                sessionData: scrollMonitor.sessionData,
                exportTime: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `scroll-data-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            log('ÊªöÂä®Êï∞ÊçÆÂ∑≤ÂØºÂá∫‰∏∫JSONÊñá‰ª∂');
            modal.alert('Êï∞ÊçÆÂØºÂá∫ÊàêÂäüÔºÅÊñá‰ª∂Â∑≤ÂºÄÂßã‰∏ãËΩΩ„ÄÇ');
        }

        // ÊòæÁ§∫ÁªüËÆ°‰ø°ÊÅØ
        function showStatistics() {
            const avgSpeed = scrollMonitor.speeds.length > 0 
                ? (scrollMonitor.speeds.reduce((a, b) => a + b) / scrollMonitor.speeds.length).toFixed(2)
                : 0;
            
            const sessionDuration = ((Date.now() - scrollMonitor.startTime) / 1000 / 60).toFixed(1);
            
            const statsHTML = `
                <h4>üìä ËØ¶ÁªÜÁªüËÆ°Êä•Âëä</h4>
                <p><strong>‰ºöËØùÊó∂Èïø:</strong> ${sessionDuration} ÂàÜÈíü</p>
                <p><strong>ÊÄªÊªöÂä®Ë∑ùÁ¶ª:</strong> ${Math.round(scrollMonitor.totalDistance)} ÂÉèÁ¥†</p>
                <p><strong>ÊªöÂä®Ê¨°Êï∞:</strong> ${scrollMonitor.scrollCount} Ê¨°</p>
                <p><strong>Âπ≥ÂùáÈÄüÂ∫¶:</strong> ${avgSpeed} px/s</p>
                <p><strong>ÊúÄÂ§ßÈÄüÂ∫¶:</strong> ${Math.round(scrollMonitor.maxSpeed)} px/s</p>
                <p><strong>Ëß¶ÂèëÂô®ÂëΩ‰∏≠:</strong> ${scrollMonitor.triggerHits} Ê¨°</p>
                <p><strong>Êï∞ÊçÆÁÇπÊï∞Èáè:</strong> ${scrollMonitor.sessionData.length} ‰∏™</p>
                <hr>
                <p style="font-size: 0.9em; color: #666;">Êï∞ÊçÆÂü∫‰∫éÂΩìÂâç‰ºöËØùÔºå‰ªÖ‰æõÂèÇËÄÉÂàÜÊûê‰ΩøÁî®„ÄÇ</p>
            `;
            
            modal.show({
                title: 'ÁªüËÆ°Êä•Âëä',
                content: statsHTML,
                onConfirm: () => log('Áî®Êà∑Êü•Áúã‰∫ÜÁªüËÆ°Êä•Âëä')
            });
        }

        // Ê∏ÖÁ©∫Êï∞ÊçÆ
        function clearData() {
            modal.confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÁõëÊéßÊï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊí§ÈîÄ„ÄÇ').then(confirmed => {
                if (confirmed) {
                    scrollMonitor.totalDistance = 0;
                    scrollMonitor.scrollCount = 0;
                    scrollMonitor.speeds = [];
                    scrollMonitor.maxSpeed = 0;
                    scrollMonitor.triggerHits = 0;
                    scrollMonitor.sessionData = [];
                    scrollMonitor.startTime = Date.now();
                    
                    // ÈáçÁΩÆËß¶ÂèëÂô®Áä∂ÊÄÅ
                    document.querySelectorAll('.scroll-trigger').forEach(trigger => {
                        trigger.classList.remove('triggered');
                    });
                    
                    log('ÊâÄÊúâÁõëÊéßÊï∞ÊçÆÂ∑≤Ê∏ÖÁ©∫');
                    modal.alert('Êï∞ÊçÆÊ∏ÖÁ©∫ÂÆåÊàêÔºÅ');
                }
            });
        }

        // Ê∏ÖÁ©∫Êó•Âøó
        function clearLog() {
            document.getElementById('logPanel').innerHTML = '<div class="log-entry">Êó•ÂøóÂ∑≤Ê∏ÖÁ©∫...</div>';
        }

        // ÊªöÂä®Âà∞È°∂ÈÉ®
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            log('Áî®Êà∑ËØ∑Ê±ÇÊªöÂä®Âà∞È°µÈù¢È°∂ÈÉ®');
        }

        // ÊâìÂºÄËÆæÁΩÆ
        function openSettings() {
            modal.prompt('ËØ∑ËæìÂÖ•Ëá™ÂÆö‰πâÁõëÊéßÈó¥Èöî (50-5000ms):', scrollMonitor.interval.toString()).then(result => {
                if (result !== null) {
                    const interval = parseInt(result);
                    if (interval >= 50 && interval <= 5000) {
                        intervalInput.setValue(interval);
                        scrollMonitor.interval = interval;
                        log(`ÁõëÊéßÈó¥ÈöîÂ∑≤ÈÄöËøáÂø´ÈÄüËÆæÁΩÆÊõ¥Êñ∞‰∏∫: ${interval}ms`);
                        modal.alert('ËÆæÁΩÆÊõ¥Êñ∞ÊàêÂäüÔºÅ');
                    } else {
                        modal.alert('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÈó¥ÈöîÂÄº (50-5000ms)');
                    }
                }
            });
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // Âª∂ËøüÂàùÂßãÂåñ‰ª•Á°Æ‰øùÊâÄÊúâÊèí‰ª∂Âä†ËΩΩÂÆåÊàê
            setTimeout(initializeSystem, 500);
        });

        // È°µÈù¢Âç∏ËΩΩÂâç‰øùÂ≠òÊï∞ÊçÆ
        window.addEventListener('beforeunload', function() {
            if (scrollMonitor.sessionData.length > 0) {
                localStorage.setItem('scrollMonitorData', JSON.stringify({
                    data: scrollMonitor,
                    timestamp: Date.now()
                }));
            }
        });

        // Â∞ùËØïÊÅ¢Â§ç‰πãÂâçÁöÑÊï∞ÊçÆ
        window.addEventListener('load', function() {
            const savedData = localStorage.getItem('scrollMonitorData');
            if (savedData) {
                try {
                    const parsed = JSON.parse(savedData);
                    const dayAgo = Date.now() - 24 * 60 * 60 * 1000;
                    
                    if (parsed.timestamp > dayAgo) {
                        log('ÂèëÁé∞‰πãÂâçÁöÑ‰ºöËØùÊï∞ÊçÆÔºåÊ≠£Âú®ÊÅ¢Â§ç...');
                        // ËøôÈáåÂèØ‰ª•ÈÄâÊã©ÊÄßÊÅ¢Â§ç‰∏Ä‰∫õÊï∞ÊçÆ
                    }
                } catch (e) {
                    console.warn('Êó†Ê≥ïÊÅ¢Â§ç‰πãÂâçÁöÑ‰ºöËØùÊï∞ÊçÆ:', e);
                }
            }
        });
</script>
</body>

</html>