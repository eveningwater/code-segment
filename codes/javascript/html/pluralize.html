<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pluralize - å¤æ•°å½¢å¼è½¬æ¢å·¥å…·</title>
    <!-- å¼•å…¥æ’ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1f2937;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
        }

        .card h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: #1f2937;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.9rem;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.25s ease;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        .btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #22c55e, #15803d);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fbbf24, #d97706);
            color: white;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-box {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border-left: 4px solid #667eea;
            margin-top: 16px;
        }

        .result-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .result-value {
            background: white;
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: #667eea;
            font-weight: 600;
        }

        .result-description {
            font-size: 0.85rem;
            color: #6b7280;
            margin-top: 6px;
        }

        .conversion-example {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 8px;
            padding: 8px;
            background: #f3f4f6;
            border-radius: 6px;
        }

        .conversion-example .arrow {
            color: #667eea;
            font-weight: bold;
        }

        .example-section {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
            margin-top: 24px;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .example-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .example-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .example-card h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: #1f2937;
        }

        .example-desc {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .example-code {
            background: white;
            padding: 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #667eea;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 6px;
        }

        .sentence-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 16px;
            border-radius: 8px;
            margin-top: 12px;
            font-size: 1.1rem;
            text-align: center;
            font-weight: 500;
        }

        .highlight {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Pluralize - å¤æ•°å½¢å¼è½¬æ¢</h1>
            <p>æ™ºèƒ½è½¬æ¢è‹±æ–‡å•è¯çš„å¤æ•°å½¢å¼ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™å’Œå¤šç§åº”ç”¨åœºæ™¯</p>
        </div>

        <div class="main-content">
            <!-- åŸºç¡€è½¬æ¢ -->
            <div class="card">
                <h2>ğŸ”„ åŸºç¡€è½¬æ¢</h2>
                
                <div class="input-group">
                    <label>è¾“å…¥æ•°é‡ï¼š</label>
                    <div id="basicNumContainer"></div>
                </div>

                <div class="input-group">
                    <label>è¾“å…¥å•è¯ï¼š</label>
                    <input type="text" id="basicWord" placeholder="è¾“å…¥è‹±æ–‡å•è¯" value="apple">
                </div>

                <button class="btn btn-primary" onclick="performBasicPluralize()">æ‰§è¡Œè½¬æ¢</button>

                <div class="result-box">
                    <div class="result-label">è½¬æ¢ç»“æœï¼š</div>
                    <div class="result-value" id="basicResult">-</div>
                    <div class="result-description" id="basicDesc"></div>
                </div>
            </div>

            <!-- è‡ªå®šä¹‰è§„åˆ™ -->
            <div class="card">
                <h2>âš¡ è‡ªå®šä¹‰è§„åˆ™</h2>
                
                <div class="input-group">
                    <label>è¾“å…¥æ•°é‡ï¼š</label>
                    <div id="customNumContainer"></div>
                </div>

                <div class="input-group">
                    <label>å•æ•°å½¢å¼ï¼š</label>
                    <input type="text" id="singularForm" placeholder="ä¾‹å¦‚ï¼šchild" value="child">
                </div>

                <div class="input-group">
                    <label>å¤æ•°å½¢å¼ï¼ˆè‡ªå®šä¹‰ï¼‰ï¼š</label>
                    <input type="text" id="pluralForm" placeholder="ä¾‹å¦‚ï¼šchildren" value="children">
                </div>

                <button class="btn btn-primary" onclick="performCustomPluralize()">æ‰§è¡Œè½¬æ¢</button>

                <div class="result-box">
                    <div class="result-label">è½¬æ¢ç»“æœï¼š</div>
                    <div class="result-value" id="customResult">-</div>
                    <div class="result-description" id="customDesc"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">æ€»è½¬æ¢æ¬¡æ•°</div>
                        <div class="stat-value" id="totalCount">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº”ç”¨ç¤ºä¾‹ -->
        <div class="example-section">
            <h2>ğŸ“š å®æˆ˜åº”ç”¨ç¤ºä¾‹</h2>
            <div class="example-grid">
                <div class="example-card" onclick="runExample('shopping')">
                    <h3>ğŸ›’ è´­ç‰©æ¸…å•</h3>
                    <div class="example-desc">æ ¹æ®è´­ä¹°æ•°é‡è‡ªåŠ¨ç”Ÿæˆå•†å“åç§°</div>
                    <div class="example-code">pluralize(qty, 'book')</div>
                </div>

                <div class="example-card" onclick="runExample('library')">
                    <h3>ğŸ“š å›¾ä¹¦é¦†</h3>
                    <div class="example-desc">æ˜¾ç¤ºå€Ÿé˜…ä¹¦ç±æ•°é‡å’Œåç§°</div>
                    <div class="example-code">pluralize(count, 'book')</div>
                </div>

                <div class="example-card" onclick="runExample('notification')">
                    <h3>ğŸ”” é€šçŸ¥æ¶ˆæ¯</h3>
                    <div class="example-desc">æ¶ˆæ¯æ•°é‡æç¤º</div>
                    <div class="example-code">pluralize(msgCount, 'message')</div>
                </div>

                <div class="example-card" onclick="runExample('irregular')">
                    <h3>ğŸ¯ ä¸è§„åˆ™å¤æ•°</h3>
                    <div class="example-desc">å¤„ç†ä¸è§„åˆ™å•è¯å¦‚ child/children</div>
                    <div class="example-code">pluralize(num, 'child')</div>
                </div>

                <div class="example-card" onclick="runExample('custom')">
                    <h3>ğŸ¨ è‡ªå®šä¹‰å¤æ•°</h3>
                    <div class="example-desc">è‡ªå®šä¹‰å¤æ•°å½¢å¼çš„åº”ç”¨</div>
                    <div class="example-code">pluralize({cat: 'cats'})</div>
                </div>

                <div class="example-card" onclick="runExample('dynamic')">
                    <h3>âš™ï¸ åŠ¨æ€ç”Ÿæˆ</h3>
                    <div class="example-desc">åŠ¨æ€ç”Ÿæˆé€‚å½“çš„å¤æ•°å½¢å¼</div>
                    <div class="example-code">pluralize(n, word, custom)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶è„šæœ¬ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>

    <script>
        // Core pluralize function
        const pluralize = (val, word, plural = word + 's') => {
            const _pluralize = (num, word, plural = word + 's') =>
                [1, -1].includes(Number(num)) ? word : plural;
            if (typeof val === 'object') {
                return (num, word) => _pluralize(num, word, val[word]);
            }
            return _pluralize(val, word, plural);
        };

        let stats = { totalCount: 0 };
        let plugins = {
            basicNumInput: null,
            customNumInput: null,
            modal: null,
            notification: null
        };

        // åˆå§‹åŒ–æ’ä»¶
        function initPlugins() {
            try {
                plugins.modal = new Modal();
                plugins.notification = new Notification();
                
                // åˆå§‹åŒ–åŸºç¡€æ•°é‡è¾“å…¥æ¡†
                plugins.basicNumInput = new InputNumber({
                    min: 0,
                    max: 1000,
                    step: 1,
                    value: 1,
                    onChange: (value) => {
                        // å¯é€‰çš„å˜æ›´å¤„ç†
                    }
                });
                plugins.basicNumInput.mount(document.getElementById('basicNumContainer'));

                // åˆå§‹åŒ–è‡ªå®šä¹‰æ•°é‡è¾“å…¥æ¡†
                plugins.customNumInput = new InputNumber({
                    min: 0,
                    max: 1000,
                    step: 1,
                    value: 5,
                    onChange: (value) => {
                        // å¯é€‰çš„å˜æ›´å¤„ç†
                    }
                });
                plugins.customNumInput.mount(document.getElementById('customNumContainer'));
            } catch (error) {
                console.warn('æ’ä»¶åŠ è½½å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            if (plugins.notification) {
                plugins.notification.show(message, type);
            } else {
                alert(message);
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(content) {
            if (plugins.modal) {
                plugins.modal.alert(content);
            } else {
                alert(content);
            }
        }

        // æ‰§è¡ŒåŸºç¡€è½¬æ¢
        function performBasicPluralize() {
            const num = plugins.basicNumInput?.getValue() || 1;
            const word = document.getElementById('basicWord').value;

            if (!word) {
                showNotification('è¯·è¾“å…¥å•è¯', 'warning');
                return;
            }

            const result = pluralize(num, word);
            document.getElementById('basicResult').textContent = result;
            document.getElementById('basicDesc').textContent = 
                `${num} ${result} (${num == 1 || num == -1 ? 'å•æ•°' : 'å¤æ•°'})`;

            stats.totalCount++;
            document.getElementById('totalCount').textContent = stats.totalCount;
            showNotification(`è½¬æ¢æˆåŠŸ: ${num} ${result}`, 'success');
        }

        // æ‰§è¡Œè‡ªå®šä¹‰è§„åˆ™è½¬æ¢
        function performCustomPluralize() {
            const num = plugins.customNumInput?.getValue() || 1;
            const singular = document.getElementById('singularForm').value;
            const plural = document.getElementById('pluralForm').value;

            if (!singular || !plural) {
                showNotification('è¯·è¾“å…¥å•æ•°å’Œå¤æ•°å½¢å¼', 'warning');
                return;
            }

            const result = pluralize(num, singular, plural);
            document.getElementById('customResult').textContent = result;
            document.getElementById('customDesc').textContent = 
                `${num} ${result} (${num == 1 || num == -1 ? 'å•æ•°å½¢å¼' : 'å¤æ•°å½¢å¼'})`;

            stats.totalCount++;
            document.getElementById('totalCount').textContent = stats.totalCount;
            showNotification(`è‡ªå®šä¹‰è½¬æ¢æˆåŠŸ: ${num} ${result}`, 'success');
        }

        // è¿è¡Œç¤ºä¾‹
        function runExample(type) {
            const examples = {
                shopping: () => {
                    const content = `ğŸ›’ è´­ç‰©æ¸…å•ç¤ºä¾‹:\n\n` +
                        `1 ${pluralize(1, 'book')}\n` +
                        `3 ${pluralize(3, 'book')}\n` +
                        `10 ${pluralize(10, 'book')}\n\n` +
                        `è´­ä¹°æ¸…å•å·²ç”Ÿæˆï¼`;
                    showModal(content);
                    plugins.basicNumInput?.setValue(3);
                    document.getElementById('basicWord').value = 'book';
                    performBasicPluralize();
                },

                library: () => {
                    const quantities = [1, 2, 5];
                    let content = 'ğŸ“š å›¾ä¹¦é¦†å€Ÿé˜…ç»Ÿè®¡:\n\n';
                    quantities.forEach(q => {
                        content += `- å·²å€Ÿé˜… ${q} æœ¬ ${pluralize(q, 'book')}\n`;
                    });
                    showModal(content);
                    plugins.basicNumInput?.setValue(2);
                    document.getElementById('basicWord').value = 'book';
                    performBasicPluralize();
                },

                notification: () => {
                    const counts = [0, 1, 5, 100];
                    let content = 'ğŸ”” é€šçŸ¥æ¶ˆæ¯:\n\n';
                    counts.forEach(c => {
                        content += `æ‚¨æœ‰ ${c} æ¡${pluralize(c, 'message')}\n`;
                    });
                    showModal(content);
                    plugins.basicNumInput?.setValue(5);
                    document.getElementById('basicWord').value = 'message';
                    performBasicPluralize();
                },

                irregular: () => {
                    plugins.customNumInput?.setValue(2);
                    document.getElementById('singularForm').value = 'child';
                    document.getElementById('pluralForm').value = 'children';
                    performCustomPluralize();
                    const content = `âœ… ä¸è§„åˆ™å¤æ•°è½¬æ¢æˆåŠŸï¼\n\n` +
                        `1 child\n` +
                        `2 children\n\n` +
                        `child/children æ˜¯ä¸è§„åˆ™å¤æ•°å½¢å¼`;
                    showModal(content);
                },

                custom: () => {
                    const customRules = { mouse: 'mice', man: 'men', person: 'people' };
                    const pluralizer = pluralize(customRules);
                    
                    let content = 'ğŸ¨ è‡ªå®šä¹‰å¤æ•°è§„åˆ™:\n\n';
                    content += '1 ' + pluralizer(1, 'mouse') + '\n';
                    content += '5 ' + pluralizer(5, 'mouse') + '\n';
                    content += '1 ' + pluralizer(1, 'man') + '\n';
                    content += '3 ' + pluralizer(3, 'man') + '\n';
                    showModal(content);
                },

                dynamic: () => {
                    const items = ['apple', 'orange', 'strawberry'];
                    let content = 'âš™ï¸ åŠ¨æ€ç”Ÿæˆå¤æ•°:\n\n';
                    items.forEach(item => {
                        content += `1 ${pluralize(1, item)}\n`;
                        content += `5 ${pluralize(5, item)}\n\n`;
                    });
                    showModal(content);
                }
            };

            examples[type]?.();
            stats.totalCount++;
            document.getElementById('totalCount').textContent = stats.totalCount;
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initPlugins();
            performBasicPluralize();
        });
    </script>
</body>

</html>