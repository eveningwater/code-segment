<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿ç»­å…ƒç´ æ˜ å°„ä¸å¯è§†åŒ–å¹³å° - mapConsecutive</title>
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 900px;
            margin: 0 auto;
        }

        .main-content {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .card h2 {
            font-size: 1.6rem;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 1rem;
        }

        .input-field {
            width: 100%;
            padding: 14px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1.1rem;
            font-family: 'Monaco', 'Menlo', monospace;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #66a6ff;
            box-shadow: 0 0 0 3px rgba(102, 166, 255, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 166, 255, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .window-display {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .window-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            font-weight: 600;
        }

        .array-container {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            justify-content: center;
        }

        .element-box {
            min-width: 50px;
            height: 60px;
            background: white;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Monaco', 'Menlo', monospace;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            padding: 8px;
        }

        .element-box.in-window {
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 166, 255, 0.4);
        }

        .element-value {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .element-index {
            font-size: 0.7rem;
            color: #6c757d;
            margin-top: 4px;
        }

        .element-box.in-window .element-index {
            color: rgba(255, 255, 255, 0.8);
        }

        .result-display {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            min-height: 200px;
            max-height: 500px;
            overflow-y: auto;
        }

        .result-item {
            background: white;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            border-left: 4px solid #66a6ff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .result-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .result-index {
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-right: 12px;
        }

        .result-input {
            font-family: 'Monaco', 'Menlo', monospace;
            color: #6c757d;
            font-size: 0.9rem;
            margin-right: 12px;
        }

        .result-arrow {
            color: #66a6ff;
            font-size: 1.2rem;
            margin: 0 12px;
        }

        .result-output {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: #10b981;
        }

        .history-list {
            max-height: 350px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
        }

        .history-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #66a6ff;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .history-time {
            font-size: 0.75rem;
            color: #6c757d;
            margin-bottom: 8px;
        }

        .history-params {
            font-size: 0.9rem;
            color: #495057;
            margin-bottom: 6px;
        }

        .stats-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #66a6ff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .code-block {
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
        }

        .code-block pre {
            margin: 0;
            padding: 20px;
            overflow-x: auto;
            background: #282c34;
            border-radius: 8px;
        }

        .code-block pre code {
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            display: block;
        }

        .hljs {
            background: #282c34;
            padding: 0;
        }

        .advanced-options {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .animation-control {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            transition: width 0.3s ease;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .array-container {
                gap: 6px;
            }

            .element-box {
                min-width: 45px;
                height: 55px;
            }
        }

        .modal-content {
            max-height: 400px;
            overflow-y: auto;
        }

        .function-badge {
            display: inline-block;
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin: 5px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”„ è¿ç»­å…ƒç´ æ˜ å°„ä¸å¯è§†åŒ–å¹³å°</h1>
            <p>åŸºäº mapConsecutive çš„æ»‘åŠ¨çª—å£æ˜ å°„å·¥å…·ï¼Œæ”¯æŒç§»åŠ¨å¹³å‡ã€æ•°æ®å¹³æ»‘ã€æ¨¡å¼è¯†åˆ«ã€å¯è§†åŒ–åŠ¨ç”»</p>
        </div>

        <div class="main-content">
            <!-- å·¦ä¾§ï¼šæ§åˆ¶é¢æ¿ -->
            <div class="sidebar">
                <div class="card">
                    <h2>ğŸ“Š è¾“å…¥æ•°æ®</h2>
                    <div class="input-section">
                        <div class="input-group">
                            <label>æ•°ç»„å…ƒç´ ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
                            <input type="text" id="arrayInput" class="input-field" 
                                   placeholder="ä¾‹å¦‚: 1,2,3,4,5,6,7,8,9,10" value="1,2,3,4,5,6,7,8,9,10">
                        </div>

                        <div class="input-group">
                            <label>çª—å£å¤§å° (n)</label>
                            <div id="windowSizeInput"></div>
                        </div>

                        <div class="input-group">
                            <label>æ˜ å°„å‡½æ•°</label>
                            <div id="functionSelect"></div>
                        </div>

                        <div class="quick-actions">
                            <button class="btn btn-info btn-sm" onclick="window.mapTool?.loadSample()">ğŸ“„ ç¤ºä¾‹</button>
                            <button class="btn btn-warning btn-sm" onclick="window.mapTool?.loadRandom()">ğŸ² éšæœº</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ¬ æ“ä½œ</h2>
                    <div class="input-section">
                        <div class="button-group">
                            <button class="btn btn-primary btn-block" onclick="window.mapTool?.execute()">
                                âš¡ æ‰§è¡Œæ˜ å°„
                            </button>
                        </div>
                        <div class="button-group">
                            <button class="btn btn-success" onclick="window.mapTool?.startAnimation()">
                                â–¶ï¸ åŠ¨ç”»æ¼”ç¤º
                            </button>
                            <button class="btn btn-danger" onclick="window.mapTool?.clear()">
                                ğŸ—‘ï¸ æ¸…ç©º
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>âš™ï¸ é«˜çº§é€‰é¡¹</h2>
                    <div class="advanced-options">
                        <div id="checkboxGroup"></div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“œ å†å²è®°å½• (<span id="historyCount">0</span>)</h2>
                    <div class="history-list" id="historyList">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“–</div>
                            <p>æš‚æ— å†å²è®°å½•</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šå¯è§†åŒ–åŒºåŸŸ -->
            <div class="visualization">
                <div class="card">
                    <h2>ğŸ¨ æ»‘åŠ¨çª—å£å¯è§†åŒ–</h2>
                    <div class="window-display" id="windowDisplay">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ”„</div>
                            <p>è¾“å…¥æ•°æ®åç‚¹å‡»"æ‰§è¡Œæ˜ å°„"æˆ–"åŠ¨ç”»æ¼”ç¤º"</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“‹ æ˜ å°„ç»“æœ (<span id="resultCount">0</span>)</h2>
                    <div class="result-display" id="resultDisplay">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“Š</div>
                            <p>æš‚æ— æ˜ å°„ç»“æœ</p>
                        </div>
                    </div>
                </div>

                <div class="card" id="codeSection" style="display: none;">
                    <h2>ğŸ’» æ‰§è¡Œä»£ç </h2>
                    <div class="code-block">
                        <pre><code class="language-javascript" id="codePreview">// ä»£ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="card">
            <h2>ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯</h2>
            <div class="stats-section">
                <div class="stats-grid" id="statsGrid"></div>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="card">
            <h2>ğŸ“– å‡½æ•°è¯´æ˜</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                <h3 style="color: #66a6ff; margin-bottom: 15px;">mapConsecutive å‡½æ•°ï¼ˆæ˜ å°„è¿ç»­å…ƒç´ ï¼‰</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">const mapConsecutive = (arr, n, fn) => 
  arr.slice(n - 1).map((v, i) => fn(arr.slice(i, i + n)));</code></pre>
                </div>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">å‡½æ•°è¯´æ˜</h3>
                <p style="color: #495057; line-height: 1.8;">
                    <strong>mapConsecutive</strong> ä½¿ç”¨ç»™å®šå‡½æ•° fn æ˜ å°„åŒ…å« n ä¸ªè¿ç»­å…ƒç´ çš„æ¯ä¸ªå—ï¼ˆæ»‘åŠ¨çª—å£ï¼‰ã€‚
                    ä½¿ç”¨ <code>Array.prototype.slice()</code> è·å–ä»å·¦ä¾§åˆ é™¤ n ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œ
                    ç„¶åä½¿ç”¨ <code>Array.prototype.map()</code> å°† fn åº”ç”¨äº arr ä¸­ n ä¸ªè¿ç»­å…ƒç´ çš„æ¯ä¸ªå—ã€‚
                </p>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">ä½¿ç”¨æ–¹å¼</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// åŸºæœ¬ç”¨æ³•ï¼šè¿æ¥å­—ç¬¦ä¸²
mapConsecutive([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 3, x => x.join('-'));
// ['1-2-3', '2-3-4', '3-4-5', '4-5-6', '5-6-7', '6-7-8', '7-8-9', '8-9-10']

// ç§»åŠ¨å¹³å‡
mapConsecutive([1, 2, 3, 4, 5], 3, x => x.reduce((a, b) => a + b) / x.length);
// [2, 3, 4]

// æ±‚å’Œ
mapConsecutive([1, 2, 3, 4, 5], 2, x => x.reduce((a, b) => a + b));
// [3, 5, 7, 9]

// æŸ¥æ‰¾æœ€å¤§å€¼
mapConsecutive([5, 2, 8, 1, 9], 3, x => Math.max(...x));
// [8, 8, 9]</code></pre>
                </div>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">åº”ç”¨åœºæ™¯</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li>ğŸ“Š <strong>ç§»åŠ¨å¹³å‡</strong>ï¼šè®¡ç®—æ—¶é—´åºåˆ—çš„ç§»åŠ¨å¹³å‡å€¼</li>
                    <li>ğŸ“ˆ <strong>æ•°æ®å¹³æ»‘</strong>ï¼šå¹³æ»‘æ³¢åŠ¨æ•°æ®</li>
                    <li>ğŸ” <strong>æ¨¡å¼è¯†åˆ«</strong>ï¼šè¯†åˆ«è¿ç»­å…ƒç´ çš„æ¨¡å¼</li>
                    <li>ğŸ“‰ <strong>è¶‹åŠ¿åˆ†æ</strong>ï¼šåˆ†ææ•°æ®è¶‹åŠ¿å˜åŒ–</li>
                    <li>ğŸ¯ <strong>æ»‘åŠ¨çª—å£ç®—æ³•</strong>ï¼šå®ç°å„ç±»æ»‘åŠ¨çª—å£ç®—æ³•</li>
                    <li>ğŸ’¹ <strong>è‚¡ç¥¨åˆ†æ</strong>ï¼šè®¡ç®—ç§»åŠ¨å¹³å‡çº¿</li>
                    <li>ğŸŒ¡ï¸ <strong>æ¸©åº¦ç›‘æµ‹</strong>ï¼šå¹³æ»‘æ¸©åº¦è¯»æ•°</li>
                    <li>ğŸ“± <strong>ä¿¡å·å¤„ç†</strong>ï¼šå¤„ç†ä¼ æ„Ÿå™¨æ•°æ®</li>
                </ul>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">å†…ç½®æ˜ å°„å‡½æ•°</h3>
                <div>
                    <span class="function-badge">æ±‚å’Œ (Sum)</span>
                    <span class="function-badge">å¹³å‡ (Average)</span>
                    <span class="function-badge">æœ€å¤§å€¼ (Max)</span>
                    <span class="function-badge">æœ€å°å€¼ (Min)</span>
                    <span class="function-badge">è¿æ¥ (Join)</span>
                    <span class="function-badge">ä¹˜ç§¯ (Product)</span>
                    <span class="function-badge">èŒƒå›´ (Range)</span>
                    <span class="function-badge">ä¸­ä½æ•° (Median)</span>
                </div>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">ç®—æ³•ç‰¹ç‚¹</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li>âœ… <strong>æ»‘åŠ¨çª—å£</strong>ï¼šé€æ­¥ç§»åŠ¨çª—å£å¤„ç†æ•°æ®</li>
                    <li>âœ… <strong>çµæ´»æ˜ å°„</strong>ï¼šè‡ªå®šä¹‰æ˜ å°„å‡½æ•°</li>
                    <li>âœ… <strong>é«˜æ•ˆå¤„ç†</strong>ï¼šå•æ¬¡éå†å®Œæˆ</li>
                    <li>âœ… <strong>å¹¿æ³›åº”ç”¨</strong>ï¼šé€‚ç”¨äºå¤šç§åœºæ™¯</li>
                </ul>

                <h3 style="color: #66a6ff; margin: 20px 0 15px 0;">æ—¶é—´å¤æ‚åº¦</h3>
                <p style="color: #495057; line-height: 1.8;">
                    æ—¶é—´å¤æ‚åº¦ä¸º <strong>O(n Ã— m)</strong>ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„é•¿åº¦ï¼Œm æ˜¯çª—å£å¤§å°ã€‚
                    æ¯ä¸ªçª—å£éœ€è¦ O(m) æ—¶é—´å¤„ç†ï¼Œæ€»å…±æœ‰ n-m+1 ä¸ªçª—å£ã€‚
                </p>
            </div>
        </div>
    </div>

    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // æ ¸å¿ƒå‡½æ•°
        const mapConsecutive = (arr, n, fn) => arr.slice(n - 1).map((v, i) => fn(arr.slice(i, i + n)));

        // MapTool å·¥å…·ç±»
        class MapTool {
            constructor() {
                this.plugins = {};
                this.history = [];
                this.animationTimer = null;
                this.currentWindowIndex = 0;
                this.stats = {
                    totalMappings: 0,
                    totalWindows: 0,
                    avgWindowSize: 0,
                    mostUsedFunction: '-'
                };
                this.functionUsage = {};
                
                // é¢„å®šä¹‰çš„æ˜ å°„å‡½æ•°
                this.mappingFunctions = [
                    { 
                        value: 'sum', 
                        label: 'æ±‚å’Œ (Sum)',
                        fn: (x) => x.reduce((a, b) => a + b, 0),
                        desc: 'è®¡ç®—çª—å£å†…æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ'
                    },
                    { 
                        value: 'avg', 
                        label: 'å¹³å‡ (Average)',
                        fn: (x) => (x.reduce((a, b) => a + b, 0) / x.length).toFixed(2),
                        desc: 'è®¡ç®—çª—å£å†…å…ƒç´ çš„å¹³å‡å€¼'
                    },
                    { 
                        value: 'max', 
                        label: 'æœ€å¤§å€¼ (Max)',
                        fn: (x) => Math.max(...x),
                        desc: 'æ‰¾å‡ºçª—å£å†…çš„æœ€å¤§å€¼'
                    },
                    { 
                        value: 'min', 
                        label: 'æœ€å°å€¼ (Min)',
                        fn: (x) => Math.min(...x),
                        desc: 'æ‰¾å‡ºçª—å£å†…çš„æœ€å°å€¼'
                    },
                    { 
                        value: 'join', 
                        label: 'è¿æ¥ (Join)',
                        fn: (x) => x.join('-'),
                        desc: 'ç”¨è¿å­—ç¬¦è¿æ¥çª—å£å†…çš„å…ƒç´ '
                    },
                    { 
                        value: 'product', 
                        label: 'ä¹˜ç§¯ (Product)',
                        fn: (x) => x.reduce((a, b) => a * b, 1),
                        desc: 'è®¡ç®—çª—å£å†…æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯'
                    },
                    { 
                        value: 'range', 
                        label: 'èŒƒå›´ (Range)',
                        fn: (x) => Math.max(...x) - Math.min(...x),
                        desc: 'è®¡ç®—çª—å£å†…æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®'
                    },
                    { 
                        value: 'median', 
                        label: 'ä¸­ä½æ•° (Median)',
                        fn: (x) => {
                            const sorted = [...x].sort((a, b) => a - b);
                            const mid = Math.floor(sorted.length / 2);
                            return sorted.length % 2 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;
                        },
                        desc: 'è®¡ç®—çª—å£å†…å…ƒç´ çš„ä¸­ä½æ•°'
                    }
                ];
                
                this.init();
            }

            // åˆå§‹åŒ–
            async init() {
                try {
                    await this.loadPlugins();
                    this.setupInputNumber();
                    this.setupSelect();
                    this.setupCheckboxes();
                    this.initHighlight();
                    this.updateStats();
                    this.showWelcomeMessage();
                } catch (error) {
                    console.error('åˆå§‹åŒ–å¤±è´¥:', error);
                    this.showError('åˆå§‹åŒ–å¤±è´¥: ' + error.message);
                }
            }

            // åˆå§‹åŒ–ä»£ç é«˜äº®
            initHighlight() {
                if (window.hljs) {
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                    console.log('Highlight.js åˆå§‹åŒ–å®Œæˆ');
                } else {
                    console.warn('Highlight.js æœªåŠ è½½');
                }
            }

            // åŠ è½½æ’ä»¶
            async loadPlugins() {
                try {
                    this.plugins.modal = new Modal();
                    this.plugins.notification = new Notification();
                } catch (error) {
                    console.warn('éƒ¨åˆ†æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            // è®¾ç½® InputNumber
            setupInputNumber() {
                const windowSizeInput = document.getElementById('windowSizeInput');
                if (!windowSizeInput) return;

                try {
                    this.plugins.windowSizeNumber = new InputNumber({
                        container: windowSizeInput,
                        value: 3,
                        min: 2,
                        max: 10,
                        step: 1,
                        onChange: (value) => {
                            // çª—å£å¤§å°å˜åŒ–å“åº”
                        }
                    });
                } catch (error) {
                    console.warn('è‡ªå®šä¹‰æ•°å­—è¾“å…¥åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿè¾“å…¥æ¡†:', error);
                    windowSizeInput.innerHTML = '<input id="windowSizeNative" type="number" min="2" max="10" value="3" class="input-field">';
                }
            }

            // è®¾ç½® Select
            setupSelect() {
                const functionSelect = document.getElementById('functionSelect');
                if (!functionSelect) return;

                try {
                    const selectInstance = new Select({
                        container: functionSelect,
                        options: this.mappingFunctions,
                        placeholder: 'é€‰æ‹©æ˜ å°„å‡½æ•°',
                        onChange: (value) => {
                            // å‡½æ•°é€‰æ‹©å˜åŒ–å“åº”
                        }
                    });

                    selectInstance.setValue('sum');
                    this.plugins.functionSelect = selectInstance;
                } catch (error) {
                    console.warn('è‡ªå®šä¹‰é€‰æ‹©æ¡†åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿé€‰æ‹©æ¡†:', error);
                    const select = document.createElement('select');
                    select.className = 'input-field';
                    this.mappingFunctions.forEach((option, index) => {
                        const optionElement = document.createElement('option');
                        optionElement.value = option.value;
                        optionElement.textContent = option.label;
                        if (index === 0) optionElement.selected = true;
                        select.appendChild(optionElement);
                    });
                    functionSelect.appendChild(select);
                }
            }

            // è®¾ç½®å¤é€‰æ¡†
            setupCheckboxes() {
                const checkboxGroup = document.getElementById('checkboxGroup');
                if (!checkboxGroup) return;

                const options = [
                    { id: 'showAnimation', label: 'è‡ªåŠ¨æ˜¾ç¤ºåŠ¨ç”»', checked: false },
                    { id: 'showIndex', label: 'æ˜¾ç¤ºç´¢å¼•ç¼–å·', checked: true },
                    { id: 'showNotifications', label: 'æ˜¾ç¤ºé€šçŸ¥æé†’', checked: true },
                    { id: 'showCode', label: 'æ˜¾ç¤ºæ‰§è¡Œä»£ç ', checked: true }
                ];

                try {
                    const checkboxGroupInstance = Checkbox.createCheckboxGroup({
                        items: options.map(option => ({
                            id: option.id,
                            label: option.label,
                            checked: option.checked
                        })),
                        onChange: (checkedStates) => {
                            // å“åº”é€»è¾‘
                        }
                    });

                    checkboxGroup.appendChild(checkboxGroupInstance.container);
                    this.plugins.checkboxGroup = checkboxGroupInstance;
                    this.checkboxOptions = options;
                } catch (error) {
                    console.warn('è‡ªå®šä¹‰å¤é€‰æ¡†åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿå¤é€‰æ¡†:', error);
                    options.forEach(option => {
                        const checkboxItem = document.createElement('div');
                        checkboxItem.style.marginBottom = '10px';
                        checkboxItem.innerHTML = `
                            <input type="checkbox" id="${option.id}" ${option.checked ? 'checked' : ''}>
                            <label for="${option.id}" style="margin-left: 8px; cursor: pointer;">${option.label}</label>
                        `;
                        checkboxGroup.appendChild(checkboxItem);
                    });
                }
            }

            // è·å–å¤é€‰æ¡†å€¼
            getCheckboxValue(checkboxId) {
                if (this.plugins.checkboxGroup && this.checkboxOptions) {
                    try {
                        const optionIndex = this.checkboxOptions.findIndex(option => option.id === checkboxId);
                        if (optionIndex !== -1) {
                            const checkedStates = this.plugins.checkboxGroup.getAllChecked();
                            return checkedStates[optionIndex] || false;
                        }
                    } catch (error) {
                        console.warn('è·å–å¤é€‰æ¡†å€¼å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿæ–¹æ³•:', error);
                    }
                }

                const checkbox = document.getElementById(checkboxId);
                return checkbox ? checkbox.checked : false;
            }

            // è·å–è¾“å…¥æ•°ç»„
            getInputArray() {
                const input = document.getElementById('arrayInput');
                const text = input ? input.value.trim() : '';
                
                if (!text) return [];

                try {
                    // å°è¯•è§£æä¸ºæ•°å­—æ•°ç»„
                    return text.split(',').map(s => {
                        const trimmed = s.trim();
                        const num = Number(trimmed);
                        return isNaN(num) ? trimmed : num;
                    });
                } catch (e) {
                    return [];
                }
            }

            // è·å–çª—å£å¤§å°
            getWindowSize() {
                if (this.plugins.windowSizeNumber) {
                    try {
                        return this.plugins.windowSizeNumber.getValue();
                    } catch (error) {
                        console.warn('è·å–çª—å£å¤§å°å¤±è´¥:', error);
                    }
                }
                const input = document.getElementById('windowSizeNative');
                return input ? parseInt(input.value) : 3;
            }

            // è·å–æ˜ å°„å‡½æ•°
            getMappingFunction() {
                let value = 'sum';
                
                if (this.plugins.functionSelect) {
                    try {
                        value = this.plugins.functionSelect.getValue();
                    } catch (error) {
                        console.warn('è·å–å‡½æ•°é€‰æ‹©å¤±è´¥:', error);
                    }
                } else {
                    const select = document.querySelector('#functionSelect select');
                    if (select) value = select.value;
                }

                const funcObj = this.mappingFunctions.find(f => f.value === value);
                return funcObj || this.mappingFunctions[0];
            }

            // æ‰§è¡Œæ˜ å°„
            execute() {
                const arr = this.getInputArray();
                const n = this.getWindowSize();

                if (arr.length === 0) {
                    this.showError('è¯·è¾“å…¥æ•°ç»„å…ƒç´ ');
                    return;
                }

                if (n < 2 || n > arr.length) {
                    this.showError(`çª—å£å¤§å°å¿…é¡»åœ¨ 2 åˆ° ${arr.length} ä¹‹é—´`);
                    return;
                }

                const funcObj = this.getMappingFunction();

                try {
                    const t0 = performance.now();
                    const result = mapConsecutive(arr, n, funcObj.fn);
                    const t1 = performance.now();
                    const time = Math.round((t1 - t0) * 1000) / 1000;

                    // æ›´æ–°ç»Ÿè®¡
                    this.stats.totalMappings++;
                    this.stats.totalWindows += result.length;
                    this.stats.avgWindowSize = Math.round((this.stats.avgWindowSize * (this.stats.totalMappings - 1) + n) / this.stats.totalMappings * 10) / 10;
                    
                    this.functionUsage[funcObj.value] = (this.functionUsage[funcObj.value] || 0) + 1;
                    this.stats.mostUsedFunction = Object.keys(this.functionUsage).reduce((a, b) => 
                        this.functionUsage[a] > this.functionUsage[b] ? a : b
                    );

                    // æ˜¾ç¤ºç»“æœ
                    this.displayResult(arr, n, result, funcObj);
                    this.displayWindowVisualization(arr, n, 0);

                    // æ·»åŠ åˆ°å†å²
                    this.addToHistory(arr, n, funcObj, result, time);

                    // æ›´æ–°ç»Ÿè®¡
                    this.updateStats();

                    // æ˜¾ç¤ºä»£ç 
                    if (this.getCheckboxValue('showCode')) {
                        this.showCode(arr, n, funcObj, result);
                    }

                    // è‡ªåŠ¨æ˜¾ç¤ºåŠ¨ç”»
                    if (this.getCheckboxValue('showAnimation')) {
                        setTimeout(() => this.startAnimation(), 500);
                    }

                    this.showNotification(`æˆåŠŸç”Ÿæˆ ${result.length} ä¸ªæ˜ å°„ç»“æœ`, 'success');
                } catch (error) {
                    this.showError('æ‰§è¡Œå¤±è´¥: ' + error.message);
                }
            }

            // æ˜¾ç¤ºçª—å£å¯è§†åŒ–
            displayWindowVisualization(arr, n, windowIndex = -1) {
                const windowDisplay = document.getElementById('windowDisplay');
                if (!windowDisplay) return;

                const showIndex = this.getCheckboxValue('showIndex');

                const windowCount = arr.length - n + 1;

                let html = `
                    <div class="window-info">
                        <div>æ•°ç»„é•¿åº¦: ${arr.length}</div>
                        <div>çª—å£å¤§å°: ${n}</div>
                        <div>çª—å£æ•°é‡: ${windowCount}</div>
                    </div>
                `;

                if (windowIndex >= 0) {
                    html += `
                        <div style="text-align: center; margin-bottom: 15px; color: #66a6ff; font-weight: 700;">
                            å½“å‰çª—å£: ${windowIndex + 1} / ${windowCount}
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${((windowIndex + 1) / windowCount) * 100}%"></div>
                        </div>
                    `;
                }

                html += '<div class="array-container">';
                arr.forEach((element, index) => {
                    const inWindow = windowIndex >= 0 && index >= windowIndex && index < windowIndex + n;
                    html += `
                        <div class="element-box ${inWindow ? 'in-window' : ''}">
                            <div class="element-value">${element}</div>
                            ${showIndex ? `<div class="element-index">[${index}]</div>` : ''}
                        </div>
                    `;
                });
                html += '</div>';

                windowDisplay.innerHTML = html;
            }

            // æ˜¾ç¤ºç»“æœ
            displayResult(arr, n, result, funcObj) {
                const resultDisplay = document.getElementById('resultDisplay');
                const resultCount = document.getElementById('resultCount');

                if (!resultDisplay) return;

                if (resultCount) {
                    resultCount.textContent = result.length;
                }

                const showIndex = this.getCheckboxValue('showIndex');

                let html = '';
                result.forEach((output, index) => {
                    const inputWindow = arr.slice(index, index + n);
                    html += `
                        <div class="result-item">
                            <div style="display: flex; align-items: center; flex: 1;">
                                ${showIndex ? `<div class="result-index">#${index + 1}</div>` : ''}
                                <div class="result-input">[${inputWindow.join(', ')}]</div>
                                <div class="result-arrow">â†’</div>
                                <div class="result-output">${output}</div>
                            </div>
                        </div>
                    `;
                });

                resultDisplay.innerHTML = html;
            }

            // å¼€å§‹åŠ¨ç”»
            startAnimation() {
                const arr = this.getInputArray();
                const n = this.getWindowSize();

                if (arr.length === 0 || n < 2 || n > arr.length) {
                    this.showError('è¯·å…ˆè¾“å…¥æœ‰æ•ˆçš„æ•°ç»„å’Œçª—å£å¤§å°');
                    return;
                }

                // åœæ­¢ä¹‹å‰çš„åŠ¨ç”»
                if (this.animationTimer) {
                    clearInterval(this.animationTimer);
                    this.animationTimer = null;
                }

                this.currentWindowIndex = 0;
                const windowCount = arr.length - n + 1;

                const animate = () => {
                    if (this.currentWindowIndex >= windowCount) {
                        clearInterval(this.animationTimer);
                        this.animationTimer = null;
                        this.showNotification('åŠ¨ç”»æ’­æ”¾å®Œæˆ', 'success');
                        return;
                    }

                    this.displayWindowVisualization(arr, n, this.currentWindowIndex);
                    this.currentWindowIndex++;
                };

                // ç«‹å³æ‰§è¡Œç¬¬ä¸€æ¬¡
                animate();
                
                // è®¾ç½®å®šæ—¶å™¨
                this.animationTimer = setInterval(animate, 800);
            }

            // åŠ è½½ç¤ºä¾‹
            loadSample() {
                const samples = [
                    '1,2,3,4,5,6,7,8,9,10',
                    '10,20,30,40,50',
                    '5,15,25,35,45,55',
                    '100,200,150,300,250'
                ];
                const sample = samples[Math.floor(Math.random() * samples.length)];
                const input = document.getElementById('arrayInput');
                if (input) input.value = sample;
                this.showNotification('å·²åŠ è½½ç¤ºä¾‹æ•°æ®', 'info');
            }

            // åŠ è½½éšæœºæ•°æ®
            loadRandom() {
                const length = Math.floor(Math.random() * 6) + 5; // 5-10 ä¸ªå…ƒç´ 
                const arr = [];
                for (let i = 0; i < length; i++) {
                    arr.push(Math.floor(Math.random() * 100) + 1);
                }
                const input = document.getElementById('arrayInput');
                if (input) input.value = arr.join(',');
                this.showNotification(`å·²ç”Ÿæˆ ${length} ä¸ªéšæœºæ•°`, 'info');
            }

            // æ¸…ç©º
            clear() {
                // åœæ­¢åŠ¨ç”»
                if (this.animationTimer) {
                    clearInterval(this.animationTimer);
                    this.animationTimer = null;
                }

                const windowDisplay = document.getElementById('windowDisplay');
                if (windowDisplay) {
                    windowDisplay.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ”„</div>
                            <p>è¾“å…¥æ•°æ®åç‚¹å‡»"æ‰§è¡Œæ˜ å°„"æˆ–"åŠ¨ç”»æ¼”ç¤º"</p>
                        </div>
                    `;
                }

                const resultDisplay = document.getElementById('resultDisplay');
                if (resultDisplay) {
                    resultDisplay.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“Š</div>
                            <p>æš‚æ— æ˜ å°„ç»“æœ</p>
                        </div>
                    `;
                }

                const resultCount = document.getElementById('resultCount');
                if (resultCount) resultCount.textContent = '0';

                const codeSection = document.getElementById('codeSection');
                if (codeSection) codeSection.style.display = 'none';

                this.showNotification('å·²æ¸…ç©ºæ˜¾ç¤º', 'info');
            }

            // æ·»åŠ åˆ°å†å²
            addToHistory(arr, n, funcObj, result, time) {
                const timeStr = new Date().toLocaleString('zh-CN');
                
                this.history.unshift({
                    time: timeStr,
                    array: arr,
                    windowSize: n,
                    function: funcObj,
                    result,
                    execTime: time
                });

                if (this.history.length > 50) {
                    this.history = this.history.slice(0, 50);
                }

                this.updateHistoryDisplay();
            }

            // æ›´æ–°å†å²æ˜¾ç¤º
            updateHistoryDisplay() {
                const historyList = document.getElementById('historyList');
                const historyCount = document.getElementById('historyCount');

                if (!historyList) return;

                if (historyCount) {
                    historyCount.textContent = this.history.length;
                }

                if (this.history.length === 0) {
                    historyList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“–</div>
                            <p>æš‚æ— å†å²è®°å½•</p>
                        </div>
                    `;
                    return;
                }

                let html = '';
                this.history.slice(0, 20).forEach((item) => {
                    html += `
                        <div class="history-item">
                            <div class="history-time">${item.time} â€¢ ${item.execTime}Î¼s</div>
                            <div class="history-params">
                                æ•°ç»„: [${item.array.slice(0, 5).join(', ')}${item.array.length > 5 ? '...' : ''}] 
                                | çª—å£: ${item.windowSize} 
                                | å‡½æ•°: ${item.function.label}
                            </div>
                            <div style="font-size: 0.85rem; color: #10b981;">
                                ç”Ÿæˆ ${item.result.length} ä¸ªç»“æœ
                            </div>
                        </div>
                    `;
                });

                historyList.innerHTML = html;
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats() {
                const statsGrid = document.getElementById('statsGrid');
                if (!statsGrid) return;

                const mostUsedLabel = this.stats.mostUsedFunction !== '-' 
                    ? this.mappingFunctions.find(f => f.value === this.stats.mostUsedFunction)?.label || '-'
                    : '-';

                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalMappings}</div>
                        <div class="stat-label">æ˜ å°„æ¬¡æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalWindows}</div>
                        <div class="stat-label">å¤„ç†çª—å£</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.avgWindowSize}</div>
                        <div class="stat-label">å¹³å‡çª—å£å¤§å°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.history.length}</div>
                        <div class="stat-label">å†å²è®°å½•</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" style="font-size: 1.2rem;">${mostUsedLabel.split(' ')[0]}</div>
                        <div class="stat-label">æœ€å¸¸ç”¨å‡½æ•°</div>
                    </div>
                `;
            }

            // æ˜¾ç¤ºä»£ç 
            showCode(arr, n, funcObj, result) {
                const codeSection = document.getElementById('codeSection');
                const codePreview = document.getElementById('codePreview');

                if (!codePreview) return;

                const arrayStr = arr.length > 10 ? `[${arr.slice(0, 10).join(', ')}, ...]` : `[${arr.join(', ')}]`;
                const resultStr = result.length > 5 ? `[${result.slice(0, 5).map(r => `'${r}'`).join(', ')}, ...]` : `[${result.map(r => `'${r}'`).join(', ')}]`;

                const code = `// mapConsecutive å‡½æ•°
const mapConsecutive = (arr, n, fn) => 
  arr.slice(n - 1).map((v, i) => fn(arr.slice(i, i + n)));

// è¾“å…¥æ•°ç»„
const arr = ${arrayStr};
const n = ${n}; // çª—å£å¤§å°

// æ˜ å°„å‡½æ•°: ${funcObj.label}
// ${funcObj.desc}
const fn = ${funcObj.fn.toString().replace(/\n/g, '\n  ')};

// æ‰§è¡Œæ˜ å°„
const result = mapConsecutive(arr, n, fn);

// ç»“æœ
console.log(result);
// ${resultStr}

// è¯´æ˜ï¼š
// - æ•°ç»„é•¿åº¦: ${arr.length}
// - çª—å£å¤§å°: ${n}
// - çª—å£æ•°é‡: ${result.length}
// - æ˜ å°„å‡½æ•°: ${funcObj.label}`;

                codePreview.textContent = code;
                
                // æ¸…é™¤ä¹‹å‰çš„é«˜äº®çŠ¶æ€ï¼Œç„¶åé‡æ–°é«˜äº®
                if (window.hljs) {
                    delete codePreview.dataset.highlighted;
                    codePreview.className = 'language-javascript';
                    hljs.highlightElement(codePreview);
                }

                if (codeSection) {
                    codeSection.style.display = 'block';
                }
            }

            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(message, type) {
                if (this.plugins.notification && this.getCheckboxValue('showNotifications')) {
                    this.plugins.notification.show(message, type);
                } else {
                    console.log(`${type.toUpperCase()}: ${message}`);
                }
            }

            // æ˜¾ç¤ºé”™è¯¯
            showError(message) {
                this.showNotification(message, 'error');
            }

            // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            showWelcomeMessage() {
                if (this.plugins.modal) {
                    this.plugins.modal.show({
                        title: 'ğŸ‰ æ¬¢è¿ä½¿ç”¨è¿ç»­å…ƒç´ æ˜ å°„å¹³å°',
                        content: `
                            <div style="padding: 20px;">
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <div style="font-size: 48px; margin-bottom: 15px;">ğŸ”„</div>
                                    <h3 style="margin: 0 0 10px 0; color: #66a6ff;">åŠŸèƒ½ç‰¹è‰²</h3>
                                </div>

                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <ul style="margin: 0; padding-left: 20px; color: #495057;">
                                        <li>å¼ºå¤§çš„ mapConsecutive æ»‘åŠ¨çª—å£æ˜ å°„</li>
                                        <li>8 ç§é¢„å®šä¹‰æ˜ å°„å‡½æ•°</li>
                                        <li>å¯è§†åŒ–æ»‘åŠ¨çª—å£åŠ¨ç”»</li>
                                        <li>å®æ—¶ä»£ç é¢„è§ˆå’Œè¯­æ³•é«˜äº®</li>
                                        <li>å†å²è®°å½•è¿½è¸ªå’Œç»Ÿè®¡åˆ†æ</li>
                                        <li>æ”¯æŒæ•°å­—å’Œå­—ç¬¦ä¸²æ··åˆæ•°ç»„</li>
                                    </ul>
                                </div>

                                <div style="background: #e8f5e8; padding: 12px; border-radius: 6px; border-left: 4px solid #10b981; margin-bottom: 15px;">
                                    <p style="margin: 0; font-size: 14px; color: #16a34a;">
                                        <strong>ğŸ’¡ ä½¿ç”¨æ­¥éª¤ï¼š</strong>
                                    </p>
                                    <ol style="margin: 8px 0 0 0; padding-left: 20px; color: #16a34a; font-size: 14px;">
                                        <li>è¾“å…¥æ•°ç»„å…ƒç´ ï¼ˆé€—å·åˆ†éš”ï¼‰</li>
                                        <li>è®¾ç½®çª—å£å¤§å° (n)</li>
                                        <li>é€‰æ‹©æ˜ å°„å‡½æ•°</li>
                                        <li>ç‚¹å‡»"æ‰§è¡Œæ˜ å°„"æŸ¥çœ‹ç»“æœ</li>
                                        <li>ç‚¹å‡»"åŠ¨ç”»æ¼”ç¤º"è§‚çœ‹æ»‘åŠ¨è¿‡ç¨‹</li>
                                    </ol>
                                </div>

                                <div style="background: #fef3c7; padding: 12px; border-radius: 6px; border-left: 4px solid #f59e0b; margin-bottom: 15px;">
                                    <p style="margin: 0; font-size: 14px; color: #d97706;">
                                        <strong>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µï¼š</strong>
                                    </p>
                                    <ul style="margin: 8px 0 0 0; padding-left: 20px; color: #d97706; font-size: 14px;">
                                        <li>æ»‘åŠ¨çª—å£ï¼šé€æ­¥ç§»åŠ¨å›ºå®šå¤§å°çš„çª—å£</li>
                                        <li>æ˜ å°„å‡½æ•°ï¼šå¯¹æ¯ä¸ªçª—å£åº”ç”¨å‡½æ•°</li>
                                        <li>æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— m)ï¼Œnä¸ºæ•°ç»„é•¿åº¦</li>
                                        <li>åº”ç”¨åœºæ™¯ï¼šç§»åŠ¨å¹³å‡ã€æ•°æ®å¹³æ»‘ã€è¶‹åŠ¿åˆ†æ</li>
                                    </ul>
                                </div>

                                <div style="background: #dbeafe; padding: 12px; border-radius: 6px; border-left: 4px solid #3b82f6;">
                                    <p style="margin: 0; font-size: 14px; color: #1e40af;">
                                        <strong>ğŸ¯ ç¤ºä¾‹ï¼š</strong> [1,2,3,4,5], çª—å£=3, æ±‚å’Œ<br>
                                        ç»“æœ: [6, 9, 12]<br>
                                        è§£é‡Š: (1+2+3), (2+3+4), (3+4+5)
                                    </p>
                                </div>
                            </div>
                        `,
                        type: "alert"
                    });
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMå†…å®¹åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            window.mapTool = new MapTool();
            console.log('è¿ç»­å…ƒç´ æ˜ å°„å¹³å°åˆå§‹åŒ–å®Œæˆ');
        });

        // å¦‚æœ DOMContentLoaded å·²ç»è§¦å‘ï¼Œç«‹å³æ‰§è¡Œ
        if (document.readyState === 'loading') {
            console.log('æ–‡æ¡£ä»åœ¨åŠ è½½ï¼Œç­‰å¾… DOMContentLoaded äº‹ä»¶...');
        } else {
            console.log('æ–‡æ¡£å·²åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œåˆå§‹åŒ–...');
            window.mapTool = new MapTool();
        }
    </script>
</body>

</html>
