<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€»è¾‘è¿ç®—å¹³å° - nor å‡½æ•°å®æˆ˜</title>
    <!-- å¼•å…¥æ’ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/switch/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1f2937;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 420px 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 14px 32px rgba(15, 23, 42, 0.15);
            margin-bottom: 20px;
        }

        .card h2 {
            font-size: 1.4rem;
            margin-bottom: 18px;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logic-input-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .logic-toggle {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .logic-toggle.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
        }

        .toggle-label {
            font-weight: 700;
            font-size: 1.1rem;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .switch-wrapper {
            margin-bottom: 12px;
        }

        .value-display {
            font-weight: 700;
            color: #1f2937;
            font-size: 0.9rem;
            margin-top: 8px;
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 16px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #22c55e, #15803d);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fbbf24, #d97706);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: scale(0.97);
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        .result-display {
            background: linear-gradient(135deg, #e0e7ff, #c7d2fe);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            margin-top: 20px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
        }

        .result-label {
            font-size: 0.9rem;
            color: #4338ca;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .result-value {
            font-size: 3rem;
            font-weight: 800;
            color: #312e81;
            font-family: 'Monaco', 'Menlo', monospace;
            margin-bottom: 12px;
        }

        .result-value.true {
            color: #22c55e;
        }

        .result-value.false {
            color: #ef4444;
        }

        .truth-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(15, 23, 42, 0.1);
        }

        .truth-table th,
        .truth-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e5e7eb;
        }

        .truth-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 700;
        }

        .truth-table tr:last-child td {
            border-bottom: none;
        }

        .truth-table tr:hover {
            background: #f8fafc;
        }

        .truth-value {
            padding: 6px 12px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .truth-value.true {
            background: #dcfce7;
            color: #15803d;
        }

        .truth-value.false {
            background: #fee2e2;
            color: #b91c1c;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-card {
            background: white;
            border-radius: 14px;
            padding: 16px;
            text-align: center;
            box-shadow: 0 3px 12px rgba(15, 23, 42, 0.1);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: #667eea;
            font-family: 'Monaco', 'Menlo', monospace;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 4px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .comparison-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(15, 23, 42, 0.1);
        }

        .comparison-card h4 {
            font-size: 0.95rem;
            color: #667eea;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .comparison-value {
            font-size: 1.5rem;
            font-weight: 800;
            font-family: 'Monaco', 'Menlo', monospace;
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            margin-top: 8px;
        }

        .comparison-value.true {
            background: #dcfce7;
            color: #15803d;
        }

        .comparison-value.false {
            background: #fee2e2;
            color: #b91c1c;
        }

        .select-container {
            margin-bottom: 16px;
        }

        .checkbox-container {
            margin-top: 12px;
        }

        .code-preview {
            background: #1e293b;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin-top: 12px;
        }

        .code-preview .keyword {
            color: #c792ea;
        }

        .code-preview .function {
            color: #82aaff;
        }

        .code-preview .boolean {
            color: #ff79c6;
        }

        .code-preview .comment {
            color: #697098;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .logic-input-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”€ é€»è¾‘è¿ç®—å¹³å°</h1>
            <p>åŸºäº nor å‡½æ•°çš„é€»è¾‘è¿ç®—å·¥å…·ï¼Œæ”¯æŒ NORã€ANDã€ORã€NOT ç­‰å¤šç§é€»è¾‘è¿ç®—</p>
        </div>

        <div class="main-content">
            <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
            <div class="sidebar">
                <div class="card">
                    <h2>âš¡ é€»è¾‘è¾“å…¥</h2>
                    <div class="logic-input-container">
                        <div class="logic-toggle" id="toggleA">
                            <label class="toggle-label">A</label>
                            <div class="switch-wrapper" id="switchWrapperA"></div>
                            <div id="valueA" class="value-display">false</div>
                        </div>
                        <div class="logic-toggle" id="toggleB">
                            <label class="toggle-label">B</label>
                            <div class="switch-wrapper" id="switchWrapperB"></div>
                            <div id="valueB" class="value-display">false</div>
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary btn-sm" onclick="window.logicCalc?.setValues(true, true)">
                            A=true, B=true
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="window.logicCalc?.setValues(true, false)">
                            A=true, B=false
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="window.logicCalc?.setValues(false, true)">
                            A=false, B=true
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="window.logicCalc?.setValues(false, false)">
                            A=false, B=false
                        </button>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ¯ è¿ç®—ç±»å‹</h2>
                    <div class="select-container" id="operationSelect"></div>
                    <div id="checkboxGroup" class="checkbox-container"></div>
                </div>

                <div class="card">
                    <h2>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h2>
                    <div class="stats-grid" id="statsGrid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalOps">0</div>
                            <div class="stat-label">æ€»è¿ç®—æ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="trueResults">0</div>
                            <div class="stat-label">True ç»“æœ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="falseResults">0</div>
                            <div class="stat-label">False ç»“æœ</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ”§ å·¥å…·</h2>
                    <div class="button-group">
                        <button class="btn btn-info btn-sm" onclick="window.logicCalc?.showTruthTable()">
                            ğŸ“‹ çœŸå€¼è¡¨
                        </button>
                        <button class="btn btn-warning btn-sm" onclick="window.logicCalc?.clearStats()">
                            ğŸ—‘ï¸ æ¸…ç©ºç»Ÿè®¡
                        </button>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ç»“æœå±•ç¤º -->
            <div class="visualization">
                <div class="card">
                    <h2>âœ¨ NOR è¿ç®—ç»“æœ</h2>
                    <div class="result-display" id="resultDisplay">
                        <div class="result-label">NOR(A, B)</div>
                        <div class="result-value" id="resultValue">-</div>
                        <div style="font-size: 0.9rem; color: #64748b;">ç­‰å¾…è¾“å…¥...</div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ”€ é€»è¾‘è¿ç®—å¯¹æ¯”</h2>
                    <div class="comparison-grid" id="comparisonGrid"></div>
                </div>

                <div class="card" id="truthTableCard" style="display: none;">
                    <h2>ğŸ“‹ çœŸå€¼è¡¨</h2>
                    <table class="truth-table" id="truthTable"></table>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ“– å‡½æ•°è¯´æ˜</h2>
            <div style="background:#f8fafc;padding:20px;border-radius:14px;">
                <h3 style="color:#667eea;margin-bottom:12px;">nor å‡½æ•°ï¼ˆé€»è¾‘æˆ–éï¼‰</h3>
                <div class="code-preview">
<span class="keyword">const</span> <span class="function">nor</span> = (a, b) => !(a || b);
                </div>
                <p style="color:#374151;line-height:1.8;margin-top:16px;">
                    <strong>nor</strong> å‡½æ•°æ‰§è¡Œé€»è¾‘æˆ–éï¼ˆNORï¼‰è¿ç®—ï¼Œè¿”å›ä¸¤ä¸ªå€¼é€»è¾‘æˆ–ï¼ˆORï¼‰çš„å¦å®šã€‚
                    åªæœ‰å½“ä¸¤ä¸ªè¾“å…¥éƒ½ä¸º false æ—¶ï¼Œç»“æœæ‰ä¸º trueã€‚
                </p>
                <h3 style="color:#667eea;margin:20px 0 12px;">çœŸå€¼è¡¨</h3>
                <table class="truth-table" style="margin-top:12px;">
                    <thead>
                        <tr>
                            <th>A</th>
                            <th>B</th>
                            <th>NOR(A, B)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>false</td><td>false</td><td class="truth-value true">true</td></tr>
                        <tr><td>false</td><td>true</td><td class="truth-value false">false</td></tr>
                        <tr><td>true</td><td>false</td><td class="truth-value false">false</td></tr>
                        <tr><td>true</td><td>true</td><td class="truth-value false">false</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶è„šæœ¬ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <script src="../../demo/plugins/switch/index.js"></script>

    <script>
        // nor å‡½æ•°ï¼šé€»è¾‘æˆ–éè¿ç®—
        const nor = (a, b) => !(a || b);

        // é€»è¾‘è¿ç®—è®¡ç®—å™¨
        class LogicCalculator {
            constructor() {
                this.plugins = {};
                this.stats = {
                    total: 0,
                    trueResults: 0,
                    falseResults: 0
                };
                this.currentOperation = 'nor';
                
                this.init();
            }

            async init() {
                await this.loadPlugins();
                this.setupOperationSelect();
                this.setupCheckboxes();
                this.setupSwitches();
                this.loadStats();
                this.updateResult();
                this.updateComparison();
            }

            async loadPlugins() {
                try {
                    this.plugins.modal = new Modal();
                    this.plugins.notification = new Notification();
                } catch (error) {
                    console.warn('æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            setupOperationSelect() {
                try {
                    this.plugins.operationSelect = new Select({
                        container: '#operationSelect',
                        options: [
                            { value: 'nor', label: 'NOR (æˆ–é)' },
                            { value: 'and', label: 'AND (ä¸)' },
                            { value: 'or', label: 'OR (æˆ–)' },
                            { value: 'nand', label: 'NAND (ä¸é)' },
                            { value: 'xor', label: 'XOR (å¼‚æˆ–)' }
                        ],
                        placeholder: 'é€‰æ‹©è¿ç®—ç±»å‹',
                        onChange: (value) => {
                            this.currentOperation = value;
                            this.updateResult();
                            this.updateComparison();
                            this.updateStatsDisplay();
                        }
                    });
                    this.plugins.operationSelect.setValue('nor');
                } catch (error) {
                    console.warn('é€‰æ‹©å™¨åŠ è½½å¤±è´¥:', error);
                }
            }

            setupCheckboxes() {
                const container = document.getElementById('checkboxGroup');
                if (!container) return;

                const options = [
                    { id: 'showComparison', label: 'æ˜¾ç¤ºè¿ç®—å¯¹æ¯”', checked: true },
                    { id: 'enableNotifications', label: 'å¯ç”¨é€šçŸ¥æé†’', checked: true },
                    { id: 'autoStats', label: 'è‡ªåŠ¨æ›´æ–°ç»Ÿè®¡', checked: true }
                ];

                try {
                    const group = Checkbox.createCheckboxGroup({
                        items: options,
                        onChange: () => {
                            this.updateComparison();
                        }
                    });
                    container.appendChild(group.container);
                    this.plugins.checkboxGroup = group;
                } catch (error) {
                    console.warn('å¤é€‰æ¡†æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            setupSwitches() {
                try {
                    // åˆå§‹åŒ–å¼€å…³ A
                    this.plugins.switchA = new Switch({
                        container: '#switchWrapperA',
                        checked: false,
                        size: 'medium',
                        color: '#667eea',
                        onChange: (checked) => {
                            this.updateToggleDisplay();
                            this.updateResult();
                            this.updateComparison();
                        }
                    });

                    // åˆå§‹åŒ–å¼€å…³ B
                    this.plugins.switchB = new Switch({
                        container: '#switchWrapperB',
                        checked: false,
                        size: 'medium',
                        color: '#667eea',
                        onChange: (checked) => {
                            this.updateToggleDisplay();
                            this.updateResult();
                            this.updateComparison();
                        }
                    });
                } catch (error) {
                    console.warn('Switch æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            getCheckboxValue(id) {
                if (this.plugins.checkboxGroup) {
                    try {
                        const states = this.plugins.checkboxGroup.getAllChecked();
                        const index = ['showComparison', 'enableNotifications', 'autoStats'].indexOf(id);
                        return index !== -1 ? states[index] : false;
                    } catch (error) {
                        console.warn('è¯»å–å¤é€‰æ¡†çŠ¶æ€å¤±è´¥:', error);
                    }
                }
                return false;
            }

            showNotification(message, type = 'info') {
                if (this.plugins.notification && this.getCheckboxValue('enableNotifications')) {
                    this.plugins.notification.show(message, type);
                } else {
                    console.log(`${type.toUpperCase()}: ${message}`);
                }
            }

            getValues() {
                return {
                    a: this.plugins.switchA?.isChecked() || false,
                    b: this.plugins.switchB?.isChecked() || false
                };
            }

            setValues(a, b) {
                if (this.plugins.switchA) {
                    this.plugins.switchA.setChecked(a);
                }
                if (this.plugins.switchB) {
                    this.plugins.switchB.setChecked(b);
                }
                
                this.updateToggleDisplay();
                this.updateResult();
                this.updateComparison();
            }

            updateToggleDisplay() {
                const { a, b } = this.getValues();
                
                const toggleA = document.getElementById('toggleA');
                const toggleB = document.getElementById('toggleB');
                const valueA = document.getElementById('valueA');
                const valueB = document.getElementById('valueB');
                
                // æ›´æ–°å®¹å™¨æ¿€æ´»çŠ¶æ€
                if (toggleA) {
                    toggleA.classList.toggle('active', a);
                }
                if (toggleB) {
                    toggleB.classList.toggle('active', b);
                }
                
                // æ›´æ–°å€¼æ˜¾ç¤º
                if (valueA) {
                    valueA.textContent = a ? 'true' : 'false';
                    valueA.style.color = a ? '#22c55e' : '#64748b';
                }
                if (valueB) {
                    valueB.textContent = b ? 'true' : 'false';
                    valueB.style.color = b ? '#22c55e' : '#64748b';
                }
            }

            calculateOperation(a, b, operation) {
                switch (operation) {
                    case 'nor':
                        return nor(a, b);
                    case 'and':
                        return a && b;
                    case 'or':
                        return a || b;
                    case 'nand':
                        return !(a && b);
                    case 'xor':
                        return (a || b) && !(a && b);
                    default:
                        return nor(a, b);
                }
            }

            updateResult() {
                this.updateToggleDisplay();
                
                const { a, b } = this.getValues();
                const result = this.calculateOperation(a, b, this.currentOperation);
                
                const resultDisplay = document.getElementById('resultDisplay');
                const resultValue = document.getElementById('resultValue');
                
                if (resultDisplay && resultValue) {
                    resultValue.textContent = result ? 'true' : 'false';
                    resultValue.className = `result-value ${result}`;
                    
                    const operationName = {
                        'nor': 'NOR',
                        'and': 'AND',
                        'or': 'OR',
                        'nand': 'NAND',
                        'xor': 'XOR'
                    }[this.currentOperation] || 'NOR';
                    
                    const label = resultDisplay.querySelector('.result-label');
                    if (label) {
                        label.textContent = `${operationName}(A, B)`;
                    }
                }

                // æ›´æ–°ç»Ÿè®¡
                if (this.getCheckboxValue('autoStats')) {
                    this.stats.total++;
                    if (result) {
                        this.stats.trueResults++;
                    } else {
                        this.stats.falseResults++;
                    }
                    this.saveStats();
                    this.updateStatsDisplay();
                }
            }

            updateComparison() {
                if (!this.getCheckboxValue('showComparison')) {
                    const grid = document.getElementById('comparisonGrid');
                    if (grid) grid.innerHTML = '';
                    return;
                }

                const { a, b } = this.getValues();
                const grid = document.getElementById('comparisonGrid');
                if (!grid) return;

                const operations = [
                    { name: 'NOR', key: 'nor' },
                    { name: 'AND', key: 'and' },
                    { name: 'OR', key: 'or' },
                    { name: 'NAND', key: 'nand' },
                    { name: 'XOR', key: 'xor' }
                ];

                grid.innerHTML = operations.map(op => {
                    const result = this.calculateOperation(a, b, op.key);
                    return `
                        <div class="comparison-card">
                            <h4>${op.name}(A, B)</h4>
                            <div class="comparison-value ${result}">${result ? 'true' : 'false'}</div>
                        </div>
                    `;
                }).join('');
            }

            showTruthTable() {
                const card = document.getElementById('truthTableCard');
                const table = document.getElementById('truthTable');
                if (!card || !table) return;

                const operations = [
                    { name: 'A', key: null },
                    { name: 'B', key: null },
                    { name: 'NOR', key: 'nor' },
                    { name: 'AND', key: 'and' },
                    { name: 'OR', key: 'or' },
                    { name: 'NAND', key: 'nand' },
                    { name: 'XOR', key: 'xor' }
                ];

                const truthValues = [
                    [false, false],
                    [false, true],
                    [true, false],
                    [true, true]
                ];

                let html = '<thead><tr>';
                operations.forEach(op => {
                    html += `<th>${op.name}</th>`;
                });
                html += '</tr></thead><tbody>';

                truthValues.forEach(([a, b]) => {
                    html += '<tr>';
                    html += `<td class="truth-value ${a}">${a ? 'true' : 'false'}</td>`;
                    html += `<td class="truth-value ${b}">${b ? 'true' : 'false'}</td>`;
                    
                    operations.slice(2).forEach(op => {
                        const result = this.calculateOperation(a, b, op.key);
                        html += `<td class="truth-value ${result}">${result ? 'true' : 'false'}</td>`;
                    });
                    
                    html += '</tr>';
                });

                html += '</tbody>';
                table.innerHTML = html;
                card.style.display = 'block';

                this.showNotification('çœŸå€¼è¡¨å·²ç”Ÿæˆ', 'success');
            }

            updateStatsDisplay() {
                document.getElementById('totalOps').textContent = this.stats.total;
                document.getElementById('trueResults').textContent = this.stats.trueResults;
                document.getElementById('falseResults').textContent = this.stats.falseResults;
            }

            clearStats() {
                this.plugins.modal?.confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç»Ÿè®¡æ•°æ®å—ï¼Ÿ').then(confirmed => {
                    if (confirmed) {
                        this.stats = { total: 0, trueResults: 0, falseResults: 0 };
                        this.saveStats();
                        this.updateStatsDisplay();
                        this.showNotification('ç»Ÿè®¡æ•°æ®å·²æ¸…ç©º', 'info');
                    }
                });
            }

            saveStats() {
                try {
                    localStorage.setItem('logicCalc_stats', JSON.stringify(this.stats));
                } catch (error) {
                    console.warn('ä¿å­˜ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
                }
            }

            loadStats() {
                try {
                    const saved = localStorage.getItem('logicCalc_stats');
                    if (saved) {
                        this.stats = JSON.parse(saved);
                        this.updateStatsDisplay();
                    }
                } catch (error) {
                    console.warn('åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
                }
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            window.logicCalc = new LogicCalculator();
        });

        if (document.readyState !== 'loading' && !window.logicCalc) {
            window.logicCalc = new LogicCalculator();
        }
    </script>
</body>
</html>
