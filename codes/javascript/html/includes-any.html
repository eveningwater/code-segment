<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å†…å®¹æ¨èä¸æ ‡ç­¾åŒ¹é…ç³»ç»Ÿ - includesAnyå‡½æ•°å®æˆ˜ç¤ºä¾‹</title>
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/datetime-picker/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .control-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            margin-bottom: 30px;
        }

        .control-section {
            margin-bottom: 25px;
        }

        .control-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 0.9em;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(220, 53, 69, 0.4);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .card-icon {
            font-size: 1.5em;
        }

        .card-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .content-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .content-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .content-card.matched {
            border-color: #28a745;
            background: #f8fff9;
        }

        .content-card.partial {
            border-color: #ffc107;
            background: #fffef8;
        }

        .content-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .content-icon {
            font-size: 1.5em;
        }

        .content-title {
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        .content-category {
            margin-left: auto;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .category-tech {
            background: #e3f2fd;
            color: #1976d2;
        }

        .category-design {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .category-business {
            background: #e8f5e8;
            color: #388e3c;
        }

        .category-lifestyle {
            background: #fff3e0;
            color: #f57c00;
        }

        .content-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .content-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }

        .content-tag {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            color: #666;
        }

        .content-tag.matched {
            background: #d4edda;
            color: #155724;
        }

        .content-tag.partial {
            background: #fff3cd;
            color: #856404;
        }

        .content-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
            color: #999;
        }

        .search-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .search-result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
        }

        .search-result.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .search-result.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .search-result.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .tag-cloud {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tag-item {
            display: inline-block;
            background: #e9ecef;
            padding: 8px 12px;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .tag-item:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .tag-item.selected {
            background: #28a745;
            color: white;
        }

        .tag-item.matched {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .recommendation-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .recommendation-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .recommendation-item:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .recommendation-score {
            float: right;
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .filter-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .filter-group {
            margin-bottom: 15px;
        }

        .filter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: block;
        }

        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .filter-option:hover {
            border-color: #667eea;
        }

        .filter-option.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .stats-panel {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
        }

        .stats-entry {
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #4a5568;
        }

        .stats-time {
            color: #a0aec0;
            margin-right: 10px;
        }

        .stats-action {
            color: #63b3ed;
        }

        .stats-result {
            margin-left: 10px;
        }

        .stats-result.success {
            color: #68d391;
        }

        .stats-result.warning {
            color: #f6ad55;
        }

        .stats-result.error {
            color: #fc8181;
        }

        .matching-visualizer {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .matching-chart {
            height: 200px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }

        .matching-bar {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }

        .matching-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .matching-fill.partial {
            background: linear-gradient(90deg, #ffc107 0%, #fd7e14 100%);
        }

        .matching-fill.low {
            background: linear-gradient(90deg, #dc3545 0%, #e74c3c 100%);
        }

        .matching-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .matching-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
            
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ™ºèƒ½å†…å®¹æ¨èä¸æ ‡ç­¾åŒ¹é…ç³»ç»Ÿ</h1>
            <p>åŸºäº includesAny å‡½æ•°çš„å®æˆ˜ç¤ºä¾‹ - å†…å®¹åˆ†ç±»ã€æ ‡ç­¾åŒ¹é…ã€æ™ºèƒ½æ¨è</p>
        </div>

        <div class="content">
            <!-- æ§åˆ¶é¢æ¿ -->
            <div class="control-panel">
                <div class="control-section">
                    <h3>âš™ï¸ ç³»ç»Ÿé…ç½®</h3>
                    <div class="controls-grid">
                        <div class="form-group">
                            <label>å†…å®¹ç±»å‹</label>
                            <div id="contentTypeSelect"></div>
                        </div>
                        <div class="form-group">
                            <label>åŒ¹é…æ¨¡å¼</label>
                            <div id="matchingModeSelect"></div>
                        </div>
                        <div class="form-group">
                            <label>æ¨èæ•°é‡</label>
                            <div id="recommendationCountInput"></div>
                        </div>
                        <div class="form-group">
                            <label>æ™ºèƒ½æ¨è</label>
                            <div id="smartRecommendationCheckbox"></div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="searchContent()">æœç´¢å†…å®¹</button>
                    <button class="btn btn-success" onclick="generateRecommendations()">ç”Ÿæˆæ¨è</button>
                    <button class="btn btn-warning" onclick="analyzeTags()">æ ‡ç­¾åˆ†æ</button>
                    <button class="btn btn-danger" onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
                </div>
            </div>

            <!-- ä»ªè¡¨æ¿ -->
            <div class="dashboard">
                <!-- æœç´¢é¢æ¿ -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">ğŸ”</span>
                        <span class="card-title">å†…å®¹æœç´¢</span>
                    </div>
                    <div class="search-panel">
                        <div class="controls-grid">
                            <div class="form-group">
                                <label>æœç´¢æ ‡ç­¾</label>
                                <div id="searchTagsSelect"></div>
                            </div>
                            <div class="form-group">
                                <label>å†…å®¹åˆ†ç±»</label>
                                <div id="contentCategorySelect"></div>
                            </div>
                            <div class="form-group">
                                <label>åŒ¹é…é˜ˆå€¼</label>
                                <div id="matchingThresholdInput"></div>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="performSearch()">æ‰§è¡Œæœç´¢</button>
                        <button class="btn btn-success" onclick="advancedSearch()">é«˜çº§æœç´¢</button>
                        <div id="searchResult" class="search-result" style="display: none;"></div>
                    </div>
                </div>

                <!-- æ ‡ç­¾äº‘ -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">ğŸ·ï¸</span>
                        <span class="card-title">æ ‡ç­¾äº‘</span>
                    </div>
                    <div class="tag-cloud" id="tagCloud">
                        <!-- æ ‡ç­¾å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- åŒ¹é…å¯è§†åŒ– -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">ğŸ“Š</span>
                        <span class="card-title">åŒ¹é…å¯è§†åŒ–</span>
                    </div>
                    <div class="matching-visualizer">
                        <div id="matchingChart">
                            <!-- åŒ¹é…å›¾è¡¨å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¿‡æ»¤é¢æ¿ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">ğŸ”§</span>
                    <span class="card-title">å†…å®¹è¿‡æ»¤</span>
                </div>
                <div class="filter-panel">
                    <div class="filter-group">
                        <label class="filter-label">å†…å®¹åˆ†ç±»</label>
                        <div class="filter-options" id="categoryFilters">
                            <!-- åˆ†ç±»è¿‡æ»¤å™¨å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                        </div>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">æ ‡ç­¾è¿‡æ»¤</label>
                        <div class="filter-options" id="tagFilters">
                            <!-- æ ‡ç­¾è¿‡æ»¤å™¨å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                        </div>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">åŒ¹é…åº¦</label>
                        <div class="filter-options" id="matchingFilters">
                            <!-- åŒ¹é…åº¦è¿‡æ»¤å™¨å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ¨èé¢æ¿ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">ğŸ’¡</span>
                    <span class="card-title">æ™ºèƒ½æ¨è</span>
                </div>
                <div class="recommendation-panel" id="recommendationPanel">
                    <!-- æ¨èå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>

            <!-- å†…å®¹ç½‘æ ¼ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“š</span>
                    <span class="card-title">å†…å®¹åº“</span>
                </div>
                <div class="content-grid" id="contentGrid">
                    <!-- å†…å®¹å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- ç»Ÿè®¡é¢æ¿ -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“ˆ</span>
                    <span class="card-title">ç³»ç»Ÿç»Ÿè®¡</span>
                </div>
                <div class="stats-panel" id="statsPanel">
                    <!-- ç»Ÿè®¡ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/datetime-picker/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>

    <script>
        // å…¨å±€å˜é‡
        let modal, notification;
        let contentTypeSelect, matchingModeSelect, recommendationCountInput, smartRecommendationCheckbox;
        let searchTagsSelect, contentCategorySelect, matchingThresholdInput;
        let contents = [];
        let tags = [];
        let categories = [];
        let selectedTags = [];
        let searchHistory = [];
        let recommendations = [];

        // includesAny å‡½æ•°
        const includesAny = (arr, values) => values.some(v => arr.includes(v));

        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            // åˆå§‹åŒ–æ’ä»¶
            modal = new Modal();
            notification = new Notification({ position: 'top-right' });

            // åˆå§‹åŒ–é€‰æ‹©æ§ä»¶
            contentTypeSelect = new Select({
                container: document.getElementById('contentTypeSelect'),
                options: [
                    { value: 'article', label: 'æ–‡ç« ' },
                    { value: 'video', label: 'è§†é¢‘' },
                    { value: 'image', label: 'å›¾ç‰‡' },
                    { value: 'audio', label: 'éŸ³é¢‘' },
                    { value: 'document', label: 'æ–‡æ¡£' }
                ],
                placeholder: 'é€‰æ‹©å†…å®¹ç±»å‹'
            });

            matchingModeSelect = new Select({
                container: document.getElementById('matchingModeSelect'),
                options: [
                    { value: 'exact', label: 'ç²¾ç¡®åŒ¹é…' },
                    { value: 'partial', label: 'éƒ¨åˆ†åŒ¹é…' },
                    { value: 'fuzzy', label: 'æ¨¡ç³ŠåŒ¹é…' },
                    { value: 'smart', label: 'æ™ºèƒ½åŒ¹é…' }
                ],
                placeholder: 'é€‰æ‹©åŒ¹é…æ¨¡å¼'
            });

            recommendationCountInput = new InputNumber({
                container: document.getElementById('recommendationCountInput'),
                min: 1,
                max: 50,
                value: 10,
                step: 1
            });

            smartRecommendationCheckbox = new Checkbox({
                label: 'å¯ç”¨æ™ºèƒ½æ¨èç®—æ³•',
                checked: true,
                onChange: (checked) => {
                    console.log('æ™ºèƒ½æ¨èçŠ¶æ€:', checked);
                }
            });
            smartRecommendationCheckbox.mount(document.getElementById('smartRecommendationCheckbox'));

            // åˆå§‹åŒ–æœç´¢æ§ä»¶
            searchTagsSelect = new Select({
                container: document.getElementById('searchTagsSelect'),
                options: [
                    { value: 'javascript', label: 'JavaScript' },
                    { value: 'python', label: 'Python' },
                    { value: 'react', label: 'React' },
                    { value: 'vue', label: 'Vue' },
                    { value: 'nodejs', label: 'Node.js' },
                    { value: 'design', label: 'è®¾è®¡' },
                    { value: 'ui', label: 'UI/UX' },
                    { value: 'business', label: 'å•†ä¸š' },
                    { value: 'marketing', label: 'è¥é”€' },
                    { value: 'lifestyle', label: 'ç”Ÿæ´»æ–¹å¼' }
                ],
                placeholder: 'é€‰æ‹©æœç´¢æ ‡ç­¾',
                multiple: true
            });

            contentCategorySelect = new Select({
                container: document.getElementById('contentCategorySelect'),
                options: [
                    { value: 'tech', label: 'æŠ€æœ¯' },
                    { value: 'design', label: 'è®¾è®¡' },
                    { value: 'business', label: 'å•†ä¸š' },
                    { value: 'lifestyle', label: 'ç”Ÿæ´»æ–¹å¼' }
                ],
                placeholder: 'é€‰æ‹©å†…å®¹åˆ†ç±»'
            });

            matchingThresholdInput = new InputNumber({
                container: document.getElementById('matchingThresholdInput'),
                min: 0,
                max: 100,
                value: 50,
                step: 5
            });

            // åˆå§‹åŒ–æ•°æ®
            initializeData();

            // åˆå§‹åŒ–ç•Œé¢
            updateTagCloud();
            updateContentGrid();
            updateCategoryFilters();
            updateTagFilters();
            updateMatchingFilters();
            addStatsLog('ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ', 'info');
        }

        // åˆå§‹åŒ–æ•°æ®
        function initializeData() {
            // åˆå§‹åŒ–æ ‡ç­¾
            tags = [
                'javascript', 'python', 'react', 'vue', 'nodejs', 'typescript', 'angular', 'php',
                'design', 'ui', 'ux', 'figma', 'sketch', 'photoshop', 'illustrator',
                'business', 'marketing', 'strategy', 'startup', 'entrepreneurship',
                'lifestyle', 'health', 'fitness', 'travel', 'food', 'fashion'
            ];

            // åˆå§‹åŒ–åˆ†ç±»
            categories = [
                { id: 'tech', name: 'æŠ€æœ¯', icon: 'ğŸ’»', color: 'category-tech' },
                { id: 'design', name: 'è®¾è®¡', icon: 'ğŸ¨', color: 'category-design' },
                { id: 'business', name: 'å•†ä¸š', icon: 'ğŸ’¼', color: 'category-business' },
                { id: 'lifestyle', name: 'ç”Ÿæ´»æ–¹å¼', icon: 'ğŸŒŸ', color: 'category-lifestyle' }
            ];

            // åˆå§‹åŒ–å†…å®¹
            contents = [
                {
                    id: 1,
                    title: 'JavaScript é«˜çº§æŠ€å·§',
                    description: 'æ·±å…¥æ¢è®¨ JavaScript çš„é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µ',
                    category: 'tech',
                    tags: ['javascript', 'programming', 'web'],
                    icon: 'ğŸ“',
                    type: 'article',
                    rating: 4.8,
                    views: 1250
                },
                {
                    id: 2,
                    title: 'React ç»„ä»¶è®¾è®¡æ¨¡å¼',
                    description: 'å­¦ä¹  React ä¸­çš„å„ç§ç»„ä»¶è®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µ',
                    category: 'tech',
                    tags: ['react', 'javascript', 'frontend'],
                    icon: 'âš›ï¸',
                    type: 'video',
                    rating: 4.9,
                    views: 2100
                },
                {
                    id: 3,
                    title: 'UI/UX è®¾è®¡åŸåˆ™',
                    description: 'æŒæ¡ç°ä»£ UI/UX è®¾è®¡çš„æ ¸å¿ƒåŸåˆ™å’Œæ–¹æ³•è®º',
                    category: 'design',
                    tags: ['design', 'ui', 'ux', 'figma'],
                    icon: 'ğŸ¨',
                    type: 'article',
                    rating: 4.7,
                    views: 890
                },
                {
                    id: 4,
                    title: 'åˆ›ä¸šå…¬å¸è¥é”€ç­–ç•¥',
                    description: 'ä¸ºåˆ›ä¸šå…¬å¸åˆ¶å®šæœ‰æ•ˆçš„è¥é”€ç­–ç•¥å’Œæ¨å¹¿æ–¹æ¡ˆ',
                    category: 'business',
                    tags: ['business', 'marketing', 'startup'],
                    icon: 'ğŸ“ˆ',
                    type: 'document',
                    rating: 4.6,
                    views: 650
                },
                {
                    id: 5,
                    title: 'å¥åº·ç”Ÿæ´»æ–¹å¼æŒ‡å—',
                    description: 'å¦‚ä½•å»ºç«‹å’Œç»´æŒå¥åº·çš„ç”Ÿæ´»æ–¹å¼ä¹ æƒ¯',
                    category: 'lifestyle',
                    tags: ['lifestyle', 'health', 'fitness'],
                    icon: 'ğŸ’ª',
                    type: 'article',
                    rating: 4.5,
                    views: 1200
                },
                {
                    id: 6,
                    title: 'Vue.js 3.0 æ–°ç‰¹æ€§',
                    description: 'æ¢ç´¢ Vue.js 3.0 çš„æ–°ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–',
                    category: 'tech',
                    tags: ['vue', 'javascript', 'frontend'],
                    icon: 'ğŸŸ¢',
                    type: 'video',
                    rating: 4.8,
                    views: 1800
                },
                {
                    id: 7,
                    title: 'å“ç‰Œè®¾è®¡æ¡ˆä¾‹åˆ†æ',
                    description: 'åˆ†ææˆåŠŸå“ç‰Œçš„è§†è§‰è®¾è®¡ç­–ç•¥å’Œå®ç°æ–¹æ³•',
                    category: 'design',
                    tags: ['design', 'branding', 'marketing'],
                    icon: 'ğŸ·ï¸',
                    type: 'article',
                    rating: 4.7,
                    views: 950
                },
                {
                    id: 8,
                    title: 'æ•°å­—è¥é”€è¶‹åŠ¿',
                    description: '2024å¹´æ•°å­—è¥é”€çš„æœ€æ–°è¶‹åŠ¿å’Œç­–ç•¥',
                    category: 'business',
                    tags: ['marketing', 'digital', 'trends'],
                    icon: 'ğŸ“±',
                    type: 'document',
                    rating: 4.4,
                    views: 780
                }
            ];
        }

        // æ›´æ–°æ ‡ç­¾äº‘
        function updateTagCloud() {
            const container = document.getElementById('tagCloud');
            container.innerHTML = '';

            tags.forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag-item';
                tagElement.textContent = tag;
                tagElement.onclick = () => toggleTag(tag, tagElement);
                container.appendChild(tagElement);
            });
        }

        // åˆ‡æ¢æ ‡ç­¾é€‰æ‹©
        function toggleTag(tag, element) {
            if (selectedTags.includes(tag)) {
                selectedTags = selectedTags.filter(t => t !== tag);
                element.classList.remove('selected');
            } else {
                selectedTags.push(tag);
                element.classList.add('selected');
            }
            updateContentGrid();
        }

        // æ›´æ–°å†…å®¹ç½‘æ ¼
        function updateContentGrid() {
            const container = document.getElementById('contentGrid');
            container.innerHTML = '';

            contents.forEach(content => {
                const card = document.createElement('div');
                card.className = 'content-card';

                // æ£€æŸ¥æ ‡ç­¾åŒ¹é…
                let matchType = 'none';
                let matchScore = 0;
                
                if (selectedTags.length > 0) {
                    const matchedTags = content.tags.filter(tag => selectedTags.includes(tag));
                    matchScore = (matchedTags.length / selectedTags.length) * 100;
                    
                    if (matchScore === 100) {
                        matchType = 'matched';
                        card.classList.add('matched');
                    } else if (matchScore > 0) {
                        matchType = 'partial';
                        card.classList.add('partial');
                    }
                }

                const category = categories.find(c => c.id === content.category);
                const tagsHtml = content.tags.map(tag => {
                    const isMatched = selectedTags.includes(tag);
                    const isPartial = selectedTags.length > 0 && includesAny(selectedTags, [tag]);
                    return `<span class="content-tag ${isMatched ? 'matched' : isPartial ? 'partial' : ''}">${tag}</span>`;
                }).join('');

                card.innerHTML = `
                    <div class="content-header">
                        <span class="content-icon">${content.icon}</span>
                        <span class="content-title">${content.title}</span>
                        <span class="content-category ${category.color}">${category.name}</span>
                    </div>
                    <div class="content-description">${content.description}</div>
                    <div class="content-tags">${tagsHtml}</div>
                    <div class="content-meta">
                        <span>â­ ${content.rating}</span>
                        <span>ğŸ‘ï¸ ${content.views}</span>
                        <span>ğŸ“… ${content.type}</span>
                        ${matchScore > 0 ? `<span style="color: ${matchScore >= 80 ? '#28a745' : matchScore >= 50 ? '#ffc107' : '#dc3545'};">ğŸ¯ ${matchScore.toFixed(0)}%</span>` : ''}
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // æ›´æ–°åˆ†ç±»è¿‡æ»¤å™¨
        function updateCategoryFilters() {
            const container = document.getElementById('categoryFilters');
            container.innerHTML = '';

            categories.forEach(category => {
                const option = document.createElement('div');
                option.className = 'filter-option';
                option.textContent = `${category.icon} ${category.name}`;
                option.onclick = () => toggleFilter(option, 'category', category.id);
                container.appendChild(option);
            });
        }

        // æ›´æ–°æ ‡ç­¾è¿‡æ»¤å™¨
        function updateTagFilters() {
            const container = document.getElementById('tagFilters');
            container.innerHTML = '';

            tags.slice(0, 12).forEach(tag => {
                const option = document.createElement('div');
                option.className = 'filter-option';
                option.textContent = tag;
                option.onclick = () => toggleFilter(option, 'tag', tag);
                container.appendChild(option);
            });
        }

        // æ›´æ–°åŒ¹é…åº¦è¿‡æ»¤å™¨
        function updateMatchingFilters() {
            const container = document.getElementById('matchingFilters');
            container.innerHTML = '';

            const matchingOptions = [
                { label: 'é«˜åŒ¹é… (80%+)', value: 'high' },
                { label: 'ä¸­åŒ¹é… (50-80%)', value: 'medium' },
                { label: 'ä½åŒ¹é… (<50%)', value: 'low' }
            ];

            matchingOptions.forEach(option => {
                const element = document.createElement('div');
                element.className = 'filter-option';
                element.textContent = option.label;
                element.onclick = () => toggleFilter(element, 'matching', option.value);
                container.appendChild(element);
            });
        }

        // åˆ‡æ¢è¿‡æ»¤å™¨
        function toggleFilter(element, type, value) {
            element.classList.toggle('active');
            // è¿™é‡Œå¯ä»¥æ·»åŠ è¿‡æ»¤é€»è¾‘
        }

        // æœç´¢å†…å®¹
        function searchContent() {
            const contentType = contentTypeSelect.getValue();
            const matchingMode = matchingModeSelect.getValue();

            if (!contentType || !matchingMode) {
                notification.error('è¯·é€‰æ‹©å†…å®¹ç±»å‹å’ŒåŒ¹é…æ¨¡å¼');
                return;
            }

            addStatsLog(`æœç´¢å†…å®¹: ${contentType} (${matchingMode}æ¨¡å¼)`, 'info');
            notification.success('æœç´¢é…ç½®å·²æ›´æ–°');
        }

        // ç”Ÿæˆæ¨è
        function generateRecommendations() {
            const count = recommendationCountInput.getValue();
            const smartMode = smartRecommendationCheckbox.isChecked();

            if (!count) {
                notification.error('è¯·è®¾ç½®æ¨èæ•°é‡');
                return;
            }

            // åŸºäºå½“å‰é€‰æ‹©çš„æ ‡ç­¾ç”Ÿæˆæ¨è
            recommendations = contents
                .filter(content => {
                    if (selectedTags.length === 0) return true;
                    return includesAny(content.tags, selectedTags);
                })
                .map(content => {
                    const matchedTags = content.tags.filter(tag => selectedTags.includes(tag));
                    const score = selectedTags.length > 0 ? (matchedTags.length / selectedTags.length) * 100 : 50;
                    return { ...content, score };
                })
                .sort((a, b) => b.score - a.score)
                .slice(0, count);

            updateRecommendationPanel();
            addStatsLog(`ç”Ÿæˆæ¨è: ${recommendations.length} ä¸ªå†…å®¹`, 'success');
            notification.success(`å·²ç”Ÿæˆ ${recommendations.length} ä¸ªæ¨è`);
        }

        // æ›´æ–°æ¨èé¢æ¿
        function updateRecommendationPanel() {
            const container = document.getElementById('recommendationPanel');
            container.innerHTML = '';

            if (recommendations.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">æš‚æ— æ¨èå†…å®¹</p>';
                return;
            }

            recommendations.forEach(item => {
                const recElement = document.createElement('div');
                recElement.className = 'recommendation-item';
                
                const category = categories.find(c => c.id === item.category);
                recElement.innerHTML = `
                    <div class="recommendation-score">${item.score.toFixed(0)}%</div>
                    <div style="font-weight: 600; margin-bottom: 5px;">${item.title}</div>
                    <div style="color: #666; font-size: 0.9em; margin-bottom: 5px;">${item.description}</div>
                    <div style="font-size: 0.8em; color: #999;">
                        ${category.icon} ${category.name} | â­ ${item.rating} | ğŸ‘ï¸ ${item.views}
                    </div>
                `;
                container.appendChild(recElement);
            });
        }

        // æ ‡ç­¾åˆ†æ
        function analyzeTags() {
            const tagStats = {};
            
            // ç»Ÿè®¡æ ‡ç­¾ä½¿ç”¨é¢‘ç‡
            contents.forEach(content => {
                content.tags.forEach(tag => {
                    tagStats[tag] = (tagStats[tag] || 0) + 1;
                });
            });

            const sortedTags = Object.entries(tagStats)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);

            const content = `
                <div style="max-width: 600px;">
                    <h4>æ ‡ç­¾ä½¿ç”¨é¢‘ç‡åˆ†æ</h4>
                    <div style="margin-top: 15px;">
                        ${sortedTags.map(([tag, count]) => `
                            <div style="background: #f8f9fa; padding: 10px; margin-bottom: 8px; border-radius: 6px;">
                                <strong>${tag}</strong>: ä½¿ç”¨ ${count} æ¬¡
                                <div style="background: #e9ecef; height: 8px; border-radius: 4px; margin-top: 5px;">
                                    <div style="background: #667eea; height: 100%; width: ${(count / Math.max(...sortedTags.map(([,c]) => c))) * 100}%; border-radius: 4px;"></div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            modal.alert(content, 'æ ‡ç­¾åˆ†æç»“æœ');
            addStatsLog('æ‰§è¡Œæ ‡ç­¾åˆ†æ', 'info');
        }

        // æ‰§è¡Œæœç´¢
        function performSearch() {
            const searchTags = searchTagsSelect.getValue();
            const category = contentCategorySelect.getValue();
            const threshold = matchingThresholdInput.getValue();

            if (!searchTags || searchTags.length === 0) {
                notification.error('è¯·é€‰æ‹©æœç´¢æ ‡ç­¾');
                return;
            }

            const results = contents.filter(content => {
                // æ£€æŸ¥æ ‡ç­¾åŒ¹é…
                const hasMatchingTags = includesAny(content.tags, searchTags);
                
                // æ£€æŸ¥åˆ†ç±»åŒ¹é…
                const categoryMatch = !category || content.category === category;
                
                return hasMatchingTags && categoryMatch;
            });

            const resultDiv = document.getElementById('searchResult');
            resultDiv.style.display = 'block';
            resultDiv.className = `search-result ${results.length > 0 ? 'success' : 'warning'}`;
            resultDiv.innerHTML = `
                <div>æœç´¢æ ‡ç­¾: [${searchTags.join(', ')}]</div>
                <div style="margin-top: 5px; font-size: 0.9em;">
                    æ‰¾åˆ° <strong>${results.length}</strong> ä¸ªåŒ¹é…å†…å®¹
                </div>
            `;

            addStatsLog(`æœç´¢å®Œæˆ: ${results.length} ä¸ªç»“æœ`, results.length > 0 ? 'success' : 'warning');
        }

        // é«˜çº§æœç´¢
        function advancedSearch() {
            const searchTags = searchTagsSelect.getValue();
            const category = contentCategorySelect.getValue();
            const threshold = matchingThresholdInput.getValue();

            if (!searchTags || searchTags.length === 0) {
                notification.error('è¯·é€‰æ‹©æœç´¢æ ‡ç­¾');
                return;
            }

            const results = contents.map(content => {
                const matchedTags = content.tags.filter(tag => searchTags.includes(tag));
                const matchPercentage = (matchedTags.length / searchTags.length) * 100;
                return { ...content, matchPercentage, matchedTags };
            }).filter(result => result.matchPercentage >= threshold);

            const content = `
                <div style="max-width: 600px;">
                    <h4>é«˜çº§æœç´¢ç»“æœ</h4>
                    <p>åŒ¹é…é˜ˆå€¼: ${threshold}%</p>
                    <div style="margin-top: 15px;">
                        ${results.map(result => `
                            <div style="background: #f8f9fa; padding: 10px; margin-bottom: 8px; border-radius: 6px;">
                                <div style="font-weight: 600;">${result.title}</div>
                                <div style="color: #666; font-size: 0.9em; margin: 5px 0;">${result.description}</div>
                                <div style="font-size: 0.8em; color: #999;">
                                    åŒ¹é…åº¦: <span style="color: ${result.matchPercentage >= 80 ? '#28a745' : result.matchPercentage >= 50 ? '#ffc107' : '#dc3545'}; font-weight: bold;">
                                        ${result.matchPercentage.toFixed(1)}%
                                    </span>
                                    | åŒ¹é…æ ‡ç­¾: [${result.matchedTags.join(', ')}]
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            modal.alert(content, 'é«˜çº§æœç´¢ç»“æœ');
            addStatsLog(`é«˜çº§æœç´¢: ${results.length} ä¸ªç»“æœ`, 'info');
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            modal.confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœç´¢ç»“æœå’Œæ¨èå—ï¼Ÿ').then(confirmed => {
                if (confirmed) {
                    selectedTags = [];
                    recommendations = [];
                    updateTagCloud();
                    updateContentGrid();
                    updateRecommendationPanel();
                    document.getElementById('searchResult').style.display = 'none';
                    addStatsLog('æ¸…é™¤æ‰€æœ‰ç»“æœ', 'info');
                    notification.success('ç»“æœå·²æ¸…é™¤');
                }
            });
        }

        // æ·»åŠ ç»Ÿè®¡æ—¥å¿—
        function addStatsLog(action, status) {
            const timestamp = new Date();
            const logEntry = {
                time: timestamp,
                action: action,
                status: status
            };

            searchHistory.unshift(logEntry);
            if (searchHistory.length > 50) {
                searchHistory.pop();
            }

            updateStatsPanel();
        }

        // æ›´æ–°ç»Ÿè®¡é¢æ¿
        function updateStatsPanel() {
            const container = document.getElementById('statsPanel');
            
            container.innerHTML = searchHistory.map(entry => `
                <div class="stats-entry">
                    <span class="stats-time">${formatDateTime(entry.time)}</span>
                    <span class="stats-action">${entry.action}</span>
                    <span class="stats-result ${entry.status}">${entry.status}</span>
                </div>
            `).join('');
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´
        function formatDateTime(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            const seconds = String(date.getSeconds()).padStart(2, '0');
            return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>

</html>