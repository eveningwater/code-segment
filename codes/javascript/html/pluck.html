<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pluck - æ•°æ®æå–å·¥å…·</title>
    <!-- å¼•å…¥æ’ä»¶æ ·å¼ -->
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1f2937;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 800;
            text-shadow: 0 3px 8px rgba(15, 23, 42, 0.35);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
        }

        .card h2 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: #1f2937;
        }

        .input-group {
            margin-bottom: 16px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 0.9rem;
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.25s ease;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }

        .btn {
            flex: 1;
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #22c55e, #15803d);
            color: white;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 16px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        table thead {
            background: #f3f4f6;
        }

        table th, table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        table th {
            font-weight: 600;
            color: #374151;
        }

        table tbody tr:hover {
            background: #f9fafb;
        }

        .result-box {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border-left: 4px solid #667eea;
            margin-top: 16px;
        }

        .result-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .result-value {
            background: white;
            padding: 10px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            word-break: break-all;
            color: #1f2937;
            max-height: 200px;
            overflow-y: auto;
        }

        .example-section {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.15);
            margin-top: 24px;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .example-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .example-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .example-card h3 {
            font-size: 1rem;
            margin-bottom: 10px;
            color: #1f2937;
        }

        .example-desc {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 10px;
        }

        .example-code {
            background: white;
            padding: 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #667eea;
            overflow-x: auto;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .stat-value {
            font-size: 1.5rem;
            margin-top: 6px;
        }

        .data-preview {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: #1f2937;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ Pluck - æ•°æ®æå–å·¥å…·</h1>
            <p>ä»å¯¹è±¡æ•°ç»„ä¸­å¿«é€Ÿæå–æŒ‡å®šå±æ€§ï¼Œæ”¯æŒå¤šç§æ•°æ®åœºæ™¯</p>
        </div>

        <div class="main-content">
            <!-- æ•°æ®æºç®¡ç† -->
            <div class="card">
                <h2>ğŸ“Š æ•°æ®æº</h2>
                
                <div class="input-group">
                    <label>é€‰æ‹©æ•°æ®é›†ï¼š</label>
                    <select id="datasetSelect" onchange="switchDataset()">
                        <option value="users">ç”¨æˆ·åˆ—è¡¨</option>
                        <option value="products">å•†å“åˆ—è¡¨</option>
                        <option value="orders">è®¢å•åˆ—è¡¨</option>
                        <option value="employees">å‘˜å·¥åˆ—è¡¨</option>
                    </select>
                </div>

                <div class="result-box">
                    <div class="result-label">æ•°æ®é¢„è§ˆï¼š</div>
                    <div class="data-preview" id="dataPreview"></div>
                </div>
            </div>

            <!-- æå–é…ç½® -->
            <div class="card">
                <h2>âš™ï¸ æå–é…ç½®</h2>
                
                <div class="input-group">
                    <label>é€‰æ‹©è¦æå–çš„å±æ€§ï¼š</label>
                    <select id="propertySelect">
                        <option value="">-- è¯·å…ˆé€‰æ‹©æ•°æ®é›† --</option>
                    </select>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="performPluck()">æ‰§è¡Œæå–</button>
                    <button class="btn btn-success" onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
                </div>

                <div class="result-box">
                    <div class="result-label">æå–ç»“æœï¼š</div>
                    <div class="result-value" id="pluckResult">-</div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">æå–æ¬¡æ•°</div>
                        <div class="stat-value" id="extractCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">ç»“æœæ•°é‡</div>
                        <div class="stat-value" id="resultCount">0</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åº”ç”¨ç¤ºä¾‹ -->
        <div class="example-section">
            <h2>ğŸ“š å®æˆ˜åº”ç”¨ç¤ºä¾‹</h2>
            <div class="example-grid">
                <div class="example-card" onclick="runExample('usernames')">
                    <h3>ğŸ‘¥ æå–æ‰€æœ‰ç”¨æˆ·å</h3>
                    <div class="example-desc">ä»ç”¨æˆ·åˆ—è¡¨ä¸­è·å–æ‰€æœ‰ç”¨æˆ·å</div>
                    <div class="example-code">pluck(users, 'name')</div>
                </div>

                <div class="example-card" onclick="runExample('prices')">
                    <h3>ğŸ’° æå–å•†å“ä»·æ ¼</h3>
                    <div class="example-desc">æ”¶é›†æ‰€æœ‰å•†å“çš„ä»·æ ¼ä¿¡æ¯</div>
                    <div class="example-code">pluck(products, 'price')</div>
                </div>

                <div class="example-card" onclick="runExample('emails')">
                    <h3>ğŸ“§ æå–é‚®ç®±åˆ—è¡¨</h3>
                    <div class="example-desc">æ‰¹é‡è·å–æ‰€æœ‰ç”¨æˆ·é‚®ç®±</div>
                    <div class="example-code">pluck(users, 'email')</div>
                </div>

                <div class="example-card" onclick="runExample('departments')">
                    <h3>ğŸ¢ æå–éƒ¨é—¨ä¿¡æ¯</h3>
                    <div class="example-desc">æ”¶é›†æ‰€æœ‰å‘˜å·¥çš„éƒ¨é—¨</div>
                    <div class="example-code">pluck(employees, 'dept')</div>
                </div>

                <div class="example-card" onclick="runExample('statuses')">
                    <h3>ğŸ“¦ æå–è®¢å•çŠ¶æ€</h3>
                    <div class="example-desc">è·å–æ‰€æœ‰è®¢å•çš„å½“å‰çŠ¶æ€</div>
                    <div class="example-code">pluck(orders, 'status')</div>
                </div>

                <div class="example-card" onclick="runExample('totals')">
                    <h3>ğŸ“ˆ æå–è®¢å•é‡‘é¢</h3>
                    <div class="example-desc">ç»Ÿè®¡æ‰€æœ‰è®¢å•çš„æ€»é‡‘é¢</div>
                    <div class="example-code">pluck(orders, 'total')</div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥æ’ä»¶è„šæœ¬ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>

    <script>
        // Core pluck function
        const pluck = (arr, k) => arr.map(i => i[k]);

        // Mock data
        const datasets = {
            users: [
                { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com', age: 28 },
                { id: 2, name: 'æå››', email: 'lisi@example.com', age: 32 },
                { id: 3, name: 'ç‹äº”', email: 'wangwu@example.com', age: 25 },
                { id: 4, name: 'èµµå…­', email: 'zhaoliu@example.com', age: 30 }
            ],
            products: [
                { id: 101, name: 'ç¬”è®°æœ¬', price: 5999, category: 'ç”µå­' },
                { id: 102, name: 'æ‰‹æœº', price: 3999, category: 'ç”µå­' },
                { id: 103, name: 'é¼ æ ‡', price: 89, category: 'é…ä»¶' },
                { id: 104, name: 'é”®ç›˜', price: 299, category: 'é…ä»¶' }
            ],
            orders: [
                { orderId: 'ORD001', userId: 1, total: 5999, status: 'å·²å‘è´§' },
                { orderId: 'ORD002', userId: 2, total: 3999, status: 'å¤„ç†ä¸­' },
                { orderId: 'ORD003', userId: 3, total: 388, status: 'å·²å®Œæˆ' },
                { orderId: 'ORD004', userId: 4, total: 6298, status: 'å·²å‘è´§' }
            ],
            employees: [
                { id: 1, name: 'ææ˜', dept: 'æŠ€æœ¯éƒ¨', salary: 15000 },
                { id: 2, name: 'ç‹èŠ³', dept: 'é”€å”®éƒ¨', salary: 12000 },
                { id: 3, name: 'å¼ æµ·', dept: 'æŠ€æœ¯éƒ¨', salary: 18000 },
                { id: 4, name: 'é™ˆé™', dept: 'äººäº‹éƒ¨', salary: 10000 }
            ]
        };

        const properties = {
            users: ['name', 'email', 'age'],
            products: ['name', 'price', 'category'],
            orders: ['orderId', 'total', 'status'],
            employees: ['name', 'dept', 'salary']
        };

        let currentDataset = 'users';
        let stats = { extractCount: 0, results: [] };
        let plugins = {
            modal: null,
            notification: null
        };

        // åˆå§‹åŒ–æ’ä»¶
        function initPlugins() {
            try {
                plugins.modal = new Modal();
                plugins.notification = new Notification();
            } catch (error) {
                console.warn('æ’ä»¶åŠ è½½å¤±è´¥:', error);
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            if (plugins.notification) {
                plugins.notification.show(message, type);
            } else {
                alert(message);
            }
        }

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        function showModal(content) {
            if (plugins.modal) {
                plugins.modal.alert(content);
            } else {
                alert(content);
            }
        }

        // åˆ‡æ¢æ•°æ®é›†
        function switchDataset() {
            currentDataset = document.getElementById('datasetSelect').value;
            updateDataPreview();
            updatePropertySelect();
            clearResults();
        }

        // æ›´æ–°æ•°æ®é¢„è§ˆ
        function updateDataPreview() {
            const data = datasets[currentDataset];
            const preview = JSON.stringify(data, null, 2);
            document.getElementById('dataPreview').textContent = preview;
        }

        // æ›´æ–°å±æ€§é€‰æ‹©å™¨
        function updatePropertySelect() {
            const select = document.getElementById('propertySelect');
            const props = properties[currentDataset];
            select.innerHTML = props.map(p => `<option value="${p}">${p}</option>`).join('');
        }

        // æ‰§è¡Œæå–
        function performPluck() {
            const property = document.getElementById('propertySelect').value;
            if (!property) {
                showNotification('è¯·é€‰æ‹©è¦æå–çš„å±æ€§', 'warning');
                return;
            }

            const data = datasets[currentDataset];
            const result = pluck(data, property);

            // æ˜¾ç¤ºç»“æœ
            const resultStr = JSON.stringify(result, null, 2);
            document.getElementById('pluckResult').textContent = resultStr;

            // æ›´æ–°ç»Ÿè®¡
            stats.extractCount++;
            stats.results = result;
            document.getElementById('extractCount').textContent = stats.extractCount;
            document.getElementById('resultCount').textContent = result.length;
            showNotification(`æå–æˆåŠŸ: ${result.length}æ¡æ•°æ®`, 'success');
        }

        // è¿è¡Œç¤ºä¾‹
        function runExample(type) {
            const examples = {
                usernames: () => {
                    document.getElementById('datasetSelect').value = 'users';
                    currentDataset = 'users';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'name';
                    performPluck();
                    showNotification('ğŸ‘¥ å·²æå–æ‰€æœ‰ç”¨æˆ·å', 'success');
                },
                prices: () => {
                    document.getElementById('datasetSelect').value = 'products';
                    currentDataset = 'products';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'price';
                    performPluck();
                    showNotification('ğŸ’° å·²æå–å•†å“ä»·æ ¼', 'success');
                },
                emails: () => {
                    document.getElementById('datasetSelect').value = 'users';
                    currentDataset = 'users';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'email';
                    performPluck();
                    showNotification('ğŸ“§ å·²æå–é‚®ç®±åˆ—è¡¨', 'success');
                },
                departments: () => {
                    document.getElementById('datasetSelect').value = 'employees';
                    currentDataset = 'employees';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'dept';
                    performPluck();
                    showNotification('ğŸ¢ å·²æå–éƒ¨é—¨ä¿¡æ¯', 'success');
                },
                statuses: () => {
                    document.getElementById('datasetSelect').value = 'orders';
                    currentDataset = 'orders';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'status';
                    performPluck();
                    showNotification('ğŸ“¦ å·²æå–è®¢å•çŠ¶æ€', 'success');
                },
                totals: () => {
                    document.getElementById('datasetSelect').value = 'orders';
                    currentDataset = 'orders';
                    updateDataPreview();
                    updatePropertySelect();
                    document.getElementById('propertySelect').value = 'total';
                    performPluck();
                    showNotification('ğŸ“ˆ å·²æå–è®¢å•é‡‘é¢', 'success');
                }
            };

            examples[type]?.();
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            document.getElementById('pluckResult').textContent = '-';
            document.getElementById('resultCount').textContent = '0';
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            initPlugins();
            updateDataPreview();
            updatePropertySelect();
        });
    </script>
</body>

</html>