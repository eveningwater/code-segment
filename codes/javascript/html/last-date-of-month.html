<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœˆæœ«æ—¥æœŸæŸ¥è¯¢å¹³å° - lastDateOfMonth</title>
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/datetime-picker/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 900px;
            margin: 0 auto;
        }

        .main-content {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .card h2 {
            font-size: 1.6rem;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 1rem;
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-block {
            width: 100%;
            justify-content: center;
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .result-display {
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 12px;
            padding: 30px;
            color: white;
            text-align: center;
            margin-top: 20px;
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .result-value {
            font-size: 3rem;
            font-weight: 700;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', monospace;
        }

        .result-info {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 10px;
        }

        .calendar {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .calendar-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #333;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }

        .calendar-weekday {
            text-align: center;
            font-weight: 600;
            color: #6c757d;
            padding: 8px;
            font-size: 0.9rem;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            background: #f8f9fa;
        }

        .calendar-day:hover {
            background: #e9ecef;
            transform: scale(1.05);
        }

        .calendar-day.other-month {
            opacity: 0.3;
            cursor: default;
        }

        .calendar-day.other-month:hover {
            background: #f8f9fa;
            transform: none;
        }

        .calendar-day.today {
            background: #3b82f6;
            color: white;
            font-weight: 700;
        }

        .calendar-day.last-day {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .quick-query {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .month-list {
            max-height: 350px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
        }

        .month-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #f093fb;
            transition: all 0.3s ease;
        }

        .month-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .month-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .month-date {
            font-size: 1.3rem;
            font-weight: 600;
            color: #f5576c;
            font-family: 'Monaco', 'Menlo', monospace;
            margin-bottom: 6px;
        }

        .month-info {
            font-size: 0.85rem;
            color: #6c757d;
        }

        .stats-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #f5576c;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .code-block {
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
        }

        .code-block pre {
            margin: 0;
            padding: 20px;
            overflow-x: auto;
            background: #282c34;
            border-radius: 8px;
        }

        .code-block pre code {
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            display: block;
        }

        .hljs {
            background: #282c34;
            padding: 0;
        }

        .advanced-options {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .year-range {
            display: flex;
            gap: 10px;
            align-items: end;
        }

        .year-range > div {
            flex: 1;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .modal-content {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“… æœˆæœ«æ—¥æœŸæŸ¥è¯¢å¹³å°</h1>
            <p>åŸºäº lastDateOfMonth å‡½æ•°çš„æ™ºèƒ½æ—¥å†å·¥å…·ï¼Œå¿«é€ŸæŸ¥è¯¢ä»»æ„æœˆä»½çš„æœ€åä¸€å¤©ã€å¯è§†åŒ–æ—¥å†å±•ç¤º</p>
        </div>

        <div class="main-content">
            <!-- å·¦ä¾§ï¼šæ§åˆ¶é¢æ¿ -->
            <div class="sidebar">
                <div class="card">
                    <h2>ğŸ“† æ—¥æœŸæŸ¥è¯¢</h2>
                    <div class="input-section">
                        <div class="input-group">
                            <label>é€‰æ‹©æ—¥æœŸ</label>
                            <div id="datePickerContainer"></div>
                        </div>

                        <div class="button-group">
                            <button class="btn btn-primary btn-block" onclick="window.lastDateTool?.queryLastDate()">ğŸ” æŸ¥è¯¢æœˆæœ«</button>
                        </div>

                        <div class="quick-query">
                            <button class="btn btn-info btn-sm" onclick="window.lastDateTool?.queryToday()">ğŸ“… æœ¬æœˆ</button>
                            <button class="btn btn-success btn-sm" onclick="window.lastDateTool?.queryNextMonth()">â¡ï¸ ä¸‹æœˆ</button>
                            <button class="btn btn-warning btn-sm" onclick="window.lastDateTool?.queryPrevMonth()">â¬…ï¸ ä¸Šæœˆ</button>
                            <button class="btn btn-danger btn-sm" onclick="window.lastDateTool?.queryThisYear()">ğŸ“Š å…¨å¹´</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“‹ æ‰¹é‡æŸ¥è¯¢</h2>
                    <div class="input-section">
                        <div class="input-group">
                            <label>æŸ¥è¯¢ç±»å‹</label>
                            <div id="queryTypeSelect"></div>
                        </div>

                        <div class="input-group" id="yearRangeGroup" style="display: none;">
                            <label>å¹´ä»½èŒƒå›´</label>
                            <div class="year-range">
                                <div id="startYearInput"></div>
                                <div id="endYearInput"></div>
                            </div>
                        </div>

                        <div class="input-group" id="monthCountGroup" style="display: none;">
                            <label>æŸ¥è¯¢æœˆæ•°</label>
                            <div id="monthCountInput"></div>
                        </div>

                        <div class="button-group">
                            <button class="btn btn-success btn-block" onclick="window.lastDateTool?.batchQuery()">ğŸš€ æ‰¹é‡æŸ¥è¯¢</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>âš™ï¸ é«˜çº§é€‰é¡¹</h2>
                    <div class="advanced-options">
                        <div id="checkboxGroup"></div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šæ˜¾ç¤ºåŒºåŸŸ -->
            <div class="visualization">
                <div class="card">
                    <h2>ğŸ“Š æŸ¥è¯¢ç»“æœ</h2>
                    <div id="resultSection" style="display: none;">
                        <div class="result-display">
                            <div class="result-title">æœˆæœ«æ—¥æœŸ</div>
                            <div class="result-value" id="resultValue">-</div>
                            <div class="result-info" id="resultInfo">-</div>
                        </div>
                    </div>
                    <div id="noResultSection">
                        <div style="text-align: center; padding: 40px; color: #6c757d;">
                            è¯·é€‰æ‹©æ—¥æœŸå¹¶ç‚¹å‡»"æŸ¥è¯¢æœˆæœ«"æŒ‰é’®
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“… æ—¥å†è§†å›¾</h2>
                    <div class="calendar" id="calendar">
                        <div class="calendar-header">
                            <button class="btn btn-sm btn-info" onclick="window.lastDateTool?.prevMonthCalendar()">â€¹ ä¸Šæœˆ</button>
                            <div class="calendar-title" id="calendarTitle">2024å¹´1æœˆ</div>
                            <button class="btn btn-sm btn-info" onclick="window.lastDateTool?.nextMonthCalendar()">ä¸‹æœˆ â€º</button>
                        </div>
                        <div class="calendar-weekdays">
                            <div class="calendar-weekday">æ—¥</div>
                            <div class="calendar-weekday">ä¸€</div>
                            <div class="calendar-weekday">äºŒ</div>
                            <div class="calendar-weekday">ä¸‰</div>
                            <div class="calendar-weekday">å››</div>
                            <div class="calendar-weekday">äº”</div>
                            <div class="calendar-weekday">å…­</div>
                        </div>
                        <div class="calendar-days" id="calendarDays">
                            <!-- æ—¥å†å¤©æ•°å°†åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“œ æŸ¥è¯¢è®°å½• (<span id="queryCount">0</span>)</h2>
                    <div class="month-list" id="monthList">
                        <div style="text-align: center; padding: 20px; color: #6c757d;">
                            æš‚æ— æŸ¥è¯¢è®°å½•
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="card">
            <h2>ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯</h2>
            <div class="stats-section">
                <div class="stats-grid" id="statsGrid">
                    <!-- ç»Ÿè®¡ä¿¡æ¯å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- ä»£ç é¢„è§ˆ -->
        <div class="card" id="codeSection" style="display: none;">
            <h2>ğŸ’» æ‰§è¡Œä»£ç </h2>
            <div class="code-block">
                <pre><code class="language-javascript" id="codePreview">// ä»£ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º</code></pre>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="card">
            <h2>ğŸ“– å‡½æ•°è¯´æ˜</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                <h3 style="color: #f5576c; margin-bottom: 15px;">lastDateOfMonth å‡½æ•°</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">const lastDateOfMonth = (date = new Date()) => {
    const d = new Date(date.getFullYear(), date.getMonth() + 1, 0);
    return d.toISOString().split('T')[0];
};</code></pre>
                </div>

                <h3 style="color: #f5576c; margin: 20px 0 15px 0;">å‡½æ•°è¯´æ˜</h3>
                <p style="color: #495057; line-height: 1.8;">
                    <strong>lastDateOfMonth</strong> å‡½æ•°è¿”å›ç»™å®šæ—¥æœŸæ‰€åœ¨æœˆä»½çš„æœ€åä¸€å¤©çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼ˆYYYY-MM-DD æ ¼å¼ï¼‰ã€‚
                    å®ƒé€šè¿‡åˆ›å»ºä¸‹ä¸ªæœˆç¬¬0å¤©çš„æ—¥æœŸå¯¹è±¡æ¥è·å–å½“å‰æœˆä»½çš„æœ€åä¸€å¤©ã€‚
                </p>

                <h3 style="color: #f5576c; margin: 20px 0 15px 0;">ä½¿ç”¨æ–¹å¼</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">lastDateOfMonth(new Date('2024-01-15'));  // '2024-01-31'
lastDateOfMonth(new Date('2024-02-15'));  // '2024-02-29' (é—°å¹´)
lastDateOfMonth(new Date('2023-02-15'));  // '2023-02-28' (å¹³å¹´)
lastDateOfMonth();                         // å½“å‰æœˆä»½çš„æœ€åä¸€å¤©</code></pre>
                </div>

                <h3 style="color: #f5576c; margin: 20px 0 15px 0;">åº”ç”¨åœºæ™¯</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li>ğŸ’° <strong>è´¢åŠ¡ç»“ç®—</strong>ï¼šè®¡ç®—æœˆåº¦è´¦å•æˆªæ­¢æ—¥æœŸ</li>
                    <li>ğŸ“Š <strong>æ•°æ®ç»Ÿè®¡</strong>ï¼šç”Ÿæˆæœˆåº¦æŠ¥è¡¨çš„ç»“æŸæ—¥æœŸ</li>
                    <li>ğŸ“… <strong>æ—¥ç¨‹ç®¡ç†</strong>ï¼šè®¾ç½®æœˆæœ«æé†’äº‹é¡¹</li>
                    <li>ğŸ¢ <strong>å·¥èµ„å‘æ”¾</strong>ï¼šç¡®å®šå·¥èµ„ç»“ç®—å‘¨æœŸ</li>
                    <li>ğŸ“ <strong>è®¢é˜…æœåŠ¡</strong>ï¼šè®¡ç®—è®¢é˜…åˆ°æœŸæ—¥æœŸ</li>
                    <li>ğŸ—“ï¸ <strong>æ—¥å†åº”ç”¨</strong>ï¼šæ˜¾ç¤ºæœˆä»½è¾¹ç•Œä¿¡æ¯</li>
                </ul>

                <h3 style="color: #f5576c; margin: 20px 0 15px 0;">ç‰¹ç‚¹</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li>âœ… è‡ªåŠ¨å¤„ç†å¤§å°æœˆï¼ˆ28ã€29ã€30ã€31å¤©ï¼‰</li>
                    <li>âœ… æ­£ç¡®å¤„ç†é—°å¹´2æœˆï¼ˆ29å¤©ï¼‰</li>
                    <li>âœ… è¿”å›æ ‡å‡† ISO æ—¥æœŸæ ¼å¼</li>
                    <li>âœ… æ”¯æŒä»»æ„å¹´ä»½å’Œæœˆä»½</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>
    <script src="../../demo/plugins/datetime-picker/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // æ ¸å¿ƒ lastDateOfMonth å‡½æ•°
        const lastDateOfMonth = (date = new Date()) => {
            const d = new Date(date.getFullYear(), date.getMonth() + 1, 0);
    return d.toISOString().split('T')[0];
        };

        // LastDateTool å·¥å…·ç±»
        class LastDateTool {
            constructor() {
                this.plugins = {};
                this.currentDate = new Date();
                this.calendarDate = new Date();
                this.queryHistory = [];
                this.stats = {
                    totalQueries: 0,
                    uniqueMonths: new Set(),
                    monthDays: {
                        28: 0,
                        29: 0,
                        30: 0,
                        31: 0
                    }
                };
                this.init();
            }

            // åˆå§‹åŒ–
            async init() {
                try {
                    await this.loadPlugins();
                    this.setupDatePicker();
                    this.setupSelect();
                    this.setupInputNumbers();
                    this.setupCheckboxes();
                    this.initHighlight();
                    this.renderCalendar();
                    this.updateStats();
                    this.showWelcomeMessage();
                } catch (error) {
                    console.error('åˆå§‹åŒ–å¤±è´¥:', error);
                    this.showError('åˆå§‹åŒ–å¤±è´¥: ' + error.message);
                }
            }

            // åˆå§‹åŒ–ä»£ç é«˜äº®
            initHighlight() {
                if (window.hljs) {
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                    console.log('Highlight.js åˆå§‹åŒ–å®Œæˆ');
                } else {
                    console.warn('Highlight.js æœªåŠ è½½');
                }
            }

            // åŠ è½½æ’ä»¶
            async loadPlugins() {
                try {
                    this.plugins.modal = new Modal();
                    this.plugins.notification = new Notification();
                } catch (error) {
                    console.warn('éƒ¨åˆ†æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            // è®¾ç½® DatePicker
            setupDatePicker() {
                const datePickerContainer = document.getElementById('datePickerContainer');
                if (!datePickerContainer) return;

                try {
                    this.plugins.datePicker = new DateTimePicker({
                        container: datePickerContainer,
                        format: 'YYYY-MM-DD',
                        onChange: (value) => {
                            if (value) {
                                this.currentDate = new Date(value);
                                if (this.getCheckboxValue('autoQuery')) {
                                    this.queryLastDate();
                                }
                            }
                        }
                    });
                    
                    // è®¾ç½®åˆå§‹å€¼ä¸ºä»Šå¤©
                    const today = new Date();
                    const todayStr = today.toISOString().split('T')[0];
                    this.plugins.datePicker.setValue(todayStr);
                } catch (error) {
                    console.warn('DatePicker åˆå§‹åŒ–å¤±è´¥:', error);
                    datePickerContainer.innerHTML = `
                        <input type="date" id="datePicker" value="${new Date().toISOString().split('T')[0]}" 
                               style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 1rem;">
                    `;
                    const nativeInput = document.getElementById('datePicker');
                    if (nativeInput) {
                        nativeInput.addEventListener('change', (e) => {
                            this.currentDate = new Date(e.target.value);
                            if (this.getCheckboxValue('autoQuery')) {
                                this.queryLastDate();
                            }
                        });
                    }
                }
            }

            // è®¾ç½® Select
            setupSelect() {
                const queryTypeSelect = document.getElementById('queryTypeSelect');
                if (!queryTypeSelect) return;

                try {
                    const typeOptions = [
                        { value: 'single', label: 'å•ä¸ªæŸ¥è¯¢' },
                        { value: 'year', label: 'æ•´å¹´æŸ¥è¯¢' },
                        { value: 'range', label: 'å¹´ä»½èŒƒå›´' },
                        { value: 'future', label: 'æœªæ¥Næœˆ' }
                    ];

                    this.plugins.queryTypeSelect = new Select({
                        container: queryTypeSelect,
                        options: typeOptions,
                        placeholder: 'é€‰æ‹©æŸ¥è¯¢ç±»å‹',
                        onChange: (value) => {
                            this.updateBatchQueryUI(value);
                        }
                    });

                    this.plugins.queryTypeSelect.setValue('single');
                } catch (error) {
                    console.warn('Select æ’ä»¶åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿä¸‹æ‹‰æ¡†:', error);
                    queryTypeSelect.innerHTML = `
                        <select id="queryTypeSelectNative" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 1rem;">
                            <option value="single">å•ä¸ªæŸ¥è¯¢</option>
                            <option value="year">æ•´å¹´æŸ¥è¯¢</option>
                            <option value="range">å¹´ä»½èŒƒå›´</option>
                            <option value="future">æœªæ¥Næœˆ</option>
                        </select>
                    `;
                    const nativeSelect = document.getElementById('queryTypeSelectNative');
                    if (nativeSelect) {
                        nativeSelect.addEventListener('change', (e) => {
                            this.updateBatchQueryUI(e.target.value);
                        });
                    }
                }
            }

            // è®¾ç½® InputNumber
            setupInputNumbers() {
                const currentYear = new Date().getFullYear();

                // å¼€å§‹å¹´ä»½
                const startYearInput = document.getElementById('startYearInput');
                if (startYearInput) {
                    try {
                        this.plugins.startYearInput = new InputNumber({
                            container: startYearInput,
                            value: currentYear,
                            min: 1900,
                            max: 2100,
                            step: 1
                        });
                    } catch (error) {
                        console.warn('å¼€å§‹å¹´ä»½ InputNumber å¤±è´¥:', error);
                        startYearInput.innerHTML = `<input type="number" id="startYear" value="${currentYear}" min="1900" max="2100" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 1rem;">`;
                    }
                }

                // ç»“æŸå¹´ä»½
                const endYearInput = document.getElementById('endYearInput');
                if (endYearInput) {
                    try {
                        this.plugins.endYearInput = new InputNumber({
                            container: endYearInput,
                            value: currentYear,
                            min: 1900,
                            max: 2100,
                            step: 1
                        });
                    } catch (error) {
                        console.warn('ç»“æŸå¹´ä»½ InputNumber å¤±è´¥:', error);
                        endYearInput.innerHTML = `<input type="number" id="endYear" value="${currentYear}" min="1900" max="2100" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 1rem;">`;
                    }
                }

                // æœˆæ•°
                const monthCountInput = document.getElementById('monthCountInput');
                if (monthCountInput) {
                    try {
                        this.plugins.monthCountInput = new InputNumber({
                            container: monthCountInput,
                            value: 6,
                            min: 1,
                            max: 24,
                            step: 1
                        });
                    } catch (error) {
                        console.warn('æœˆæ•° InputNumber å¤±è´¥:', error);
                        monthCountInput.innerHTML = `<input type="number" id="monthCount" value="6" min="1" max="24" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 12px; font-size: 1rem;">`;
                    }
                }
            }

            // è®¾ç½®å¤é€‰æ¡†
            setupCheckboxes() {
                const checkboxGroup = document.getElementById('checkboxGroup');
                if (!checkboxGroup) return;

                const options = [
                    { id: 'autoQuery', label: 'è‡ªåŠ¨æŸ¥è¯¢', checked: true },
                    { id: 'showCalendar', label: 'æ˜¾ç¤ºæ—¥å†', checked: true },
                    { id: 'showNotifications', label: 'æ˜¾ç¤ºé€šçŸ¥', checked: true },
                    { id: 'showCode', label: 'æ˜¾ç¤ºä»£ç ', checked: true }
                ];

                try {
                    const checkboxGroupInstance = Checkbox.createCheckboxGroup({
                        items: options.map(option => ({
                            id: option.id,
                            label: option.label,
                            checked: option.checked
                        })),
                        onChange: (checkedStates) => {
                            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å“åº”é€»è¾‘
                        }
                    });

                    checkboxGroup.appendChild(checkboxGroupInstance.container);
                    this.plugins.checkboxGroup = checkboxGroupInstance;
                    this.checkboxOptions = options;
                } catch (error) {
                    console.warn('è‡ªå®šä¹‰å¤é€‰æ¡†åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿå¤é€‰æ¡†:', error);
                    this.setupNativeCheckboxes(options, checkboxGroup);
                }
            }

            // è®¾ç½®åŸç”Ÿå¤é€‰æ¡†
            setupNativeCheckboxes(options, container) {
                options.forEach(option => {
                    const checkboxItem = document.createElement('div');
                    checkboxItem.style.marginBottom = '10px';
                    checkboxItem.innerHTML = `
                        <input type="checkbox" id="${option.id}" ${option.checked ? 'checked' : ''}>
                        <label for="${option.id}" style="margin-left: 8px; cursor: pointer;">${option.label}</label>
                    `;
                    container.appendChild(checkboxItem);
                });
            }

            // è·å–å¤é€‰æ¡†å€¼
            getCheckboxValue(checkboxId) {
                if (this.plugins.checkboxGroup && this.checkboxOptions) {
                    try {
                        const optionIndex = this.checkboxOptions.findIndex(option => option.id === checkboxId);
                        if (optionIndex !== -1) {
                            const checkedStates = this.plugins.checkboxGroup.getAllChecked();
                            return checkedStates[optionIndex] || false;
                        }
                    } catch (error) {
                        console.warn('è·å–å¤é€‰æ¡†å€¼å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿæ–¹æ³•:', error);
                    }
                }

                const checkbox = document.getElementById(checkboxId);
                return checkbox ? checkbox.checked : false;
            }

            // æ›´æ–°æ‰¹é‡æŸ¥è¯¢ UI
            updateBatchQueryUI(type) {
                const yearRangeGroup = document.getElementById('yearRangeGroup');
                const monthCountGroup = document.getElementById('monthCountGroup');

                if (yearRangeGroup) yearRangeGroup.style.display = 'none';
                if (monthCountGroup) monthCountGroup.style.display = 'none';

                if (type === 'range') {
                    if (yearRangeGroup) yearRangeGroup.style.display = 'block';
                } else if (type === 'future') {
                    if (monthCountGroup) monthCountGroup.style.display = 'block';
                }
            }

            // æŸ¥è¯¢æœˆæœ«æ—¥æœŸ
            queryLastDate() {
                try {
                    const lastDate = lastDateOfMonth(this.currentDate);
                    const lastDay = new Date(lastDate).getDate();
                    
                    this.stats.totalQueries++;
                    const monthKey = `${this.currentDate.getFullYear()}-${this.currentDate.getMonth() + 1}`;
                    this.stats.uniqueMonths.add(monthKey);
                    this.stats.monthDays[lastDay]++;

                    this.addToHistory({
                        date: this.currentDate,
                        lastDate: lastDate,
                        lastDay: lastDay
                    });

                    this.displayResult(lastDate);
                    this.updateCalendar(this.currentDate);
                    this.updateStats();

                    if (this.getCheckboxValue('showCode')) {
                        this.showCode(this.currentDate, lastDate);
                    }

                    this.showNotification(`${this.currentDate.getFullYear()}å¹´${this.currentDate.getMonth() + 1}æœˆçš„æœ€åä¸€å¤©æ˜¯ ${lastDate}`, 'success');
                } catch (error) {
                    this.showError('æŸ¥è¯¢å¤±è´¥: ' + error.message);
                }
            }

            // å¿«æ·æŸ¥è¯¢ - ä»Šå¤©æ‰€åœ¨æœˆ
            queryToday() {
                this.currentDate = new Date();
                if (this.plugins.datePicker) {
                    this.plugins.datePicker.setValue(this.currentDate.toISOString().split('T')[0]);
                }
                this.queryLastDate();
            }

            // å¿«æ·æŸ¥è¯¢ - ä¸‹ä¸ªæœˆ
            queryNextMonth() {
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1);
                if (this.plugins.datePicker) {
                    this.plugins.datePicker.setValue(this.currentDate.toISOString().split('T')[0]);
                }
                this.queryLastDate();
            }

            // å¿«æ·æŸ¥è¯¢ - ä¸Šä¸ªæœˆ
            queryPrevMonth() {
                this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() - 1, 1);
                if (this.plugins.datePicker) {
                    this.plugins.datePicker.setValue(this.currentDate.toISOString().split('T')[0]);
                }
                this.queryLastDate();
            }

            // å¿«æ·æŸ¥è¯¢ - å…¨å¹´
            queryThisYear() {
                this.batchQueryYear(this.currentDate.getFullYear());
            }

            // æ‰¹é‡æŸ¥è¯¢
            batchQuery() {
                let queryType = 'single';
                
                if (this.plugins.queryTypeSelect) {
                    try {
                        queryType = this.plugins.queryTypeSelect.getValue();
                    } catch (e) {
                        const select = document.getElementById('queryTypeSelectNative');
                        if (select) queryType = select.value;
                    }
                }

                switch (queryType) {
                    case 'year':
                        this.batchQueryYear(this.currentDate.getFullYear());
                        break;
                    case 'range':
                        this.batchQueryRange();
                        break;
                    case 'future':
                        this.batchQueryFuture();
                        break;
                    default:
                        this.queryLastDate();
                }
            }

            // æ‰¹é‡æŸ¥è¯¢ - æ•´å¹´
            batchQueryYear(year) {
                for (let month = 0; month < 12; month++) {
                    const date = new Date(year, month, 1);
                    const lastDate = lastDateOfMonth(date);
                    const lastDay = new Date(lastDate).getDate();
                    
                    this.stats.totalQueries++;
                    const monthKey = `${year}-${month + 1}`;
                    this.stats.uniqueMonths.add(monthKey);
                    this.stats.monthDays[lastDay]++;

                    this.addToHistory({
                        date: date,
                        lastDate: lastDate,
                        lastDay: lastDay
                    });
                }

                this.updateStats();
                this.showNotification(`å·²æŸ¥è¯¢ ${year} å¹´å…¨éƒ¨ 12 ä¸ªæœˆ`, 'success');
            }

            // æ‰¹é‡æŸ¥è¯¢ - å¹´ä»½èŒƒå›´
            batchQueryRange() {
                let startYear, endYear;

                if (this.plugins.startYearInput && this.plugins.endYearInput) {
                    try {
                        startYear = this.plugins.startYearInput.getValue();
                        endYear = this.plugins.endYearInput.getValue();
                    } catch (e) {
                        const startInput = document.getElementById('startYear');
                        const endInput = document.getElementById('endYear');
                        if (startInput && endInput) {
                            startYear = parseInt(startInput.value);
                            endYear = parseInt(endInput.value);
                        }
                    }
                } else {
                    startYear = this.currentDate.getFullYear();
                    endYear = startYear;
                }

                if (startYear > endYear) {
                    this.showError('å¼€å§‹å¹´ä»½ä¸èƒ½å¤§äºç»“æŸå¹´ä»½');
                    return;
                }

                if (endYear - startYear > 10) {
                    this.showError('å¹´ä»½èŒƒå›´ä¸èƒ½è¶…è¿‡ 10 å¹´');
                    return;
                }

                for (let year = startYear; year <= endYear; year++) {
                    this.batchQueryYear(year);
                }

                this.showNotification(`å·²æŸ¥è¯¢ ${startYear}-${endYear} å¹´å…± ${(endYear - startYear + 1) * 12} ä¸ªæœˆ`, 'success');
            }

            // æ‰¹é‡æŸ¥è¯¢ - æœªæ¥Næœˆ
            batchQueryFuture() {
                let monthCount = 6;

                if (this.plugins.monthCountInput) {
                    try {
                        monthCount = this.plugins.monthCountInput.getValue();
                    } catch (e) {
                        const input = document.getElementById('monthCount');
                        if (input) monthCount = parseInt(input.value);
                    }
                }

                for (let i = 0; i < monthCount; i++) {
                    const date = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + i, 1);
                    const lastDate = lastDateOfMonth(date);
                    const lastDay = new Date(lastDate).getDate();
                    
                    this.stats.totalQueries++;
                    const monthKey = `${date.getFullYear()}-${date.getMonth() + 1}`;
                    this.stats.uniqueMonths.add(monthKey);
                    this.stats.monthDays[lastDay]++;

                    this.addToHistory({
                        date: date,
                        lastDate: lastDate,
                        lastDay: lastDay
                    });
                }

                this.updateStats();
                this.showNotification(`å·²æŸ¥è¯¢æœªæ¥ ${monthCount} ä¸ªæœˆ`, 'success');
            }

            // æ¸²æŸ“æ—¥å†
            renderCalendar() {
                this.updateCalendar(this.calendarDate);
            }

            // æ›´æ–°æ—¥å†
            updateCalendar(date) {
                if (!this.getCheckboxValue('showCalendar')) return;

                this.calendarDate = new Date(date);
                const year = this.calendarDate.getFullYear();
                const month = this.calendarDate.getMonth();
                
                // æ›´æ–°æ ‡é¢˜
                const calendarTitle = document.getElementById('calendarTitle');
                if (calendarTitle) {
                    calendarTitle.textContent = `${year}å¹´${month + 1}æœˆ`;
                }

                // è·å–æœˆä»½ä¿¡æ¯
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const daysInMonth = lastDay.getDate();
                const startDayOfWeek = firstDay.getDay();
                
                // ä¸Šä¸ªæœˆçš„å¤©æ•°
                const prevMonthLastDay = new Date(year, month, 0).getDate();

                const calendarDays = document.getElementById('calendarDays');
                if (!calendarDays) return;

                let html = '';
                
                // ä¸Šä¸ªæœˆçš„æ—¥æœŸ
                for (let i = startDayOfWeek - 1; i >= 0; i--) {
                    html += `<div class="calendar-day other-month">${prevMonthLastDay - i}</div>`;
                }

                // å½“å‰æœˆçš„æ—¥æœŸ
                const today = new Date();
                const lastDateOfThisMonth = lastDay.getDate();

                for (let day = 1; day <= daysInMonth; day++) {
                    const isToday = year === today.getFullYear() && 
                                   month === today.getMonth() && 
                                   day === today.getDate();
                    const isLastDay = day === lastDateOfThisMonth;
                    
                    const classes = ['calendar-day'];
                    if (isToday) classes.push('today');
                    if (isLastDay) classes.push('last-day');

                    html += `<div class="${classes.join(' ')}">${day}</div>`;
                }

                // ä¸‹ä¸ªæœˆçš„æ—¥æœŸï¼ˆå¡«å……å‰©ä½™æ ¼å­ï¼‰
                const totalCells = Math.ceil((startDayOfWeek + daysInMonth) / 7) * 7;
                const remainingCells = totalCells - (startDayOfWeek + daysInMonth);
                for (let day = 1; day <= remainingCells; day++) {
                    html += `<div class="calendar-day other-month">${day}</div>`;
                }

                calendarDays.innerHTML = html;
            }

            // æ—¥å† - ä¸Šä¸ªæœˆ
            prevMonthCalendar() {
                this.calendarDate = new Date(this.calendarDate.getFullYear(), this.calendarDate.getMonth() - 1, 1);
                this.updateCalendar(this.calendarDate);
            }

            // æ—¥å† - ä¸‹ä¸ªæœˆ
            nextMonthCalendar() {
                this.calendarDate = new Date(this.calendarDate.getFullYear(), this.calendarDate.getMonth() + 1, 1);
                this.updateCalendar(this.calendarDate);
            }

            // æ˜¾ç¤ºç»“æœ
            displayResult(lastDate) {
                const resultSection = document.getElementById('resultSection');
                const noResultSection = document.getElementById('noResultSection');
                const resultValue = document.getElementById('resultValue');
                const resultInfo = document.getElementById('resultInfo');

                if (resultSection) resultSection.style.display = 'block';
                if (noResultSection) noResultSection.style.display = 'none';

                if (resultValue) {
                    resultValue.textContent = lastDate;
                }

                if (resultInfo) {
                    const date = new Date(lastDate);
                    const year = date.getFullYear();
                    const month = date.getMonth() + 1;
                    const day = date.getDate();
                    const dayNames = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
                    const dayName = dayNames[date.getDay()];
                    
                    resultInfo.textContent = `${year}å¹´${month}æœˆå…± ${day} å¤©ï¼Œæœ€åä¸€å¤©æ˜¯${dayName}`;
                }
            }

            // æ·»åŠ åˆ°å†å²è®°å½•
            addToHistory(item) {
                this.queryHistory.unshift(item);
                
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                if (this.queryHistory.length > 50) {
                    this.queryHistory = this.queryHistory.slice(0, 50);
                }

                this.updateHistoryDisplay();
            }

            // æ›´æ–°å†å²æ˜¾ç¤º
            updateHistoryDisplay() {
                const monthList = document.getElementById('monthList');
                const queryCount = document.getElementById('queryCount');

                if (!monthList) return;

                if (queryCount) {
                    queryCount.textContent = this.queryHistory.length;
                }

                if (this.queryHistory.length === 0) {
                    monthList.innerHTML = '<div style="text-align: center; padding: 20px; color: #6c757d;">æš‚æ— æŸ¥è¯¢è®°å½•</div>';
                    return;
                }

                let html = '';
                this.queryHistory.slice(0, 20).forEach((item) => {
                    const year = item.date.getFullYear();
                    const month = item.date.getMonth() + 1;
                    
                    html += `
                        <div class="month-item">
                            <div class="month-title">${year}å¹´${month}æœˆ</div>
                            <div class="month-date">${item.lastDate}</div>
                            <div class="month-info">å…± ${item.lastDay} å¤©</div>
                        </div>
                    `;
                });

                monthList.innerHTML = html;
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats() {
                const statsGrid = document.getElementById('statsGrid');
                if (!statsGrid) return;

                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalQueries}</div>
                        <div class="stat-label">æŸ¥è¯¢æ¬¡æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.uniqueMonths.size}</div>
                        <div class="stat-label">ä¸åŒæœˆä»½</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.monthDays[28]}</div>
                        <div class="stat-label">28å¤©æœˆä»½</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.monthDays[29]}</div>
                        <div class="stat-label">29å¤©æœˆä»½</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.monthDays[30]}</div>
                        <div class="stat-label">30å¤©æœˆä»½</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.monthDays[31]}</div>
                        <div class="stat-label">31å¤©æœˆä»½</div>
                    </div>
                `;
            }

            // æ˜¾ç¤ºä»£ç 
            showCode(date, lastDate) {
                const codeSection = document.getElementById('codeSection');
                const codePreview = document.getElementById('codePreview');

                if (!codePreview) return;

                const dateStr = date.toISOString().split('T')[0];
                const code = `// æŸ¥è¯¢æ—¥æœŸ
const date = new Date('${dateStr}');

// è·å–æœˆæœ«æ—¥æœŸ
const lastDate = lastDateOfMonth(date);

// ç»“æœ: '${lastDate}'
// ${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆå…± ${new Date(lastDate).getDate()} å¤©`;

                codePreview.textContent = code;
                // æ¸…é™¤ä¹‹å‰çš„é«˜äº®çŠ¶æ€ï¼Œç„¶åé‡æ–°é«˜äº®
                if (window.hljs) {
                    delete codePreview.dataset.highlighted;
                    codePreview.className = 'language-javascript';
                    hljs.highlightElement(codePreview);
                }

                if (codeSection) {
                    codeSection.style.display = 'block';
                }
            }

            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(message, type) {
                if (this.plugins.notification && this.getCheckboxValue('showNotifications')) {
                    this.plugins.notification.show(message, type);
                } else {
                    console.log(`${type.toUpperCase()}: ${message}`);
                }
            }

            // æ˜¾ç¤ºé”™è¯¯
            showError(message) {
                this.showNotification(message, 'error');
            }

            // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            showWelcomeMessage() {
                if (this.plugins.modal) {
                    this.plugins.modal.show({
                        title: 'ğŸ‰ æ¬¢è¿ä½¿ç”¨æœˆæœ«æ—¥æœŸæŸ¥è¯¢å¹³å°',
                        content: `
                            <div style="padding: 20px;">
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“…</div>
                                    <h3 style="margin: 0 0 10px 0; color: #f5576c;">åŠŸèƒ½ç‰¹è‰²</h3>
                                </div>

                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <ul style="margin: 0; padding-left: 20px; color: #495057;">
                                        <li>å¿«é€ŸæŸ¥è¯¢ä»»æ„æœˆä»½çš„æœ€åä¸€å¤©</li>
                                        <li>å¯è§†åŒ–æ—¥å†å±•ç¤ºï¼ˆé«˜äº®æœˆæœ«æ—¥æœŸï¼‰</li>
                                        <li>æ‰¹é‡æŸ¥è¯¢ï¼ˆæ•´å¹´ã€å¹´ä»½èŒƒå›´ã€æœªæ¥Næœˆï¼‰</li>
                                        <li>è‡ªåŠ¨å¤„ç†é—°å¹´å’Œå¤§å°æœˆ</li>
                                        <li>æŸ¥è¯¢å†å²è®°å½•å’Œç»Ÿè®¡åˆ†æ</li>
                                        <li>ä»£ç é¢„è§ˆå’Œå®æ—¶åé¦ˆ</li>
                                    </ul>
                                </div>

                                <div style="background: #e8f5e8; padding: 12px; border-radius: 6px; border-left: 4px solid #10b981; margin-bottom: 15px;">
                                    <p style="margin: 0; font-size: 14px; color: #16a34a;">
                                        <strong>ğŸ’¡ ä½¿ç”¨æ­¥éª¤ï¼š</strong>
                                    </p>
                                    <ol style="margin: 8px 0 0 0; padding-left: 20px; color: #16a34a; font-size: 14px;">
                                        <li>é€‰æ‹©æ—¥æœŸï¼ˆæˆ–ä½¿ç”¨å¿«æ·æŒ‰é’®ï¼‰</li>
                                        <li>ç‚¹å‡»"æŸ¥è¯¢æœˆæœ«"æŒ‰é’®</li>
                                        <li>æŸ¥çœ‹æ—¥å†è§†å›¾ä¸­çš„é«˜äº®æœˆæœ«æ—¥æœŸ</li>
                                        <li>å°è¯•æ‰¹é‡æŸ¥è¯¢æ•´å¹´æˆ–å¤šå¹´æ•°æ®</li>
                                        <li>æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯å’Œå†å²è®°å½•</li>
                                    </ol>
                                </div>

                                <div style="background: #fef3c7; padding: 12px; border-radius: 6px; border-left: 4px solid #f59e0b;">
                                    <p style="margin: 0; font-size: 14px; color: #d97706;">
                                        <strong>ğŸ¨ æ—¥å†è¯´æ˜ï¼š</strong> è“è‰²è¡¨ç¤ºä»Šå¤©ï¼Œæ¸å˜è‰²ï¼ˆåŠ¨ç”»ï¼‰è¡¨ç¤ºå½“æœˆæœ€åä¸€å¤©ã€‚
                                    </p>
                                </div>
                            </div>
                        `,
                        type: "alert"
                    });
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMå†…å®¹åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            window.lastDateTool = new LastDateTool();
            console.log('æœˆæœ«æ—¥æœŸæŸ¥è¯¢å¹³å°åˆå§‹åŒ–å®Œæˆ');
        });

        // å¦‚æœ DOMContentLoaded å·²ç»è§¦å‘ï¼Œç«‹å³æ‰§è¡Œ
        if (document.readyState === 'loading') {
            console.log('æ–‡æ¡£ä»åœ¨åŠ è½½ï¼Œç­‰å¾… DOMContentLoaded äº‹ä»¶...');
        } else {
            console.log('æ–‡æ¡£å·²åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œåˆå§‹åŒ–...');
            window.lastDateTool = new LastDateTool();
}
    </script>
</body>

</html>

