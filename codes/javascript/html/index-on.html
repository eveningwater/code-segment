<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ªªÂä°ÁÆ°ÁêÜÁ≥ªÁªü - Êèí‰ª∂ÂÆûÊàòÁ§∫‰æã</title>
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/datetime-picker/style.css">
    <link rel="stylesheet" href="../../demo/plugins/input-number/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            background: white;
            height: calc(100% - 40px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .controls-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9rem;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);
            color: #212529;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
        }

        .tasks-section {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid #e9ecef;
        }

        .tasks-header {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tasks-header h3 {
            font-size: 1.3rem;
        }

        .task-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .tasks-list {
            padding: 0;
            max-height: 500px;
            overflow-y: auto;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            transition: all 0.3s ease;
            position: relative;
        }

        .task-item:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }

        .task-item:last-child {
            border-bottom: none;
        }

        .task-checkbox {
            margin-right: 15px;
        }

        .task-content {
            flex: 1;
            margin-right: 20px;
        }

        .task-title {
            font-weight: 600;
            color: #212529;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .task-description {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .task-meta {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            color: #868e96;
        }

        .task-priority {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .priority-high {
            background: #ffe6e6;
            color: #dc3545;
        }

        .priority-medium {
            background: #fff3cd;
            color: #856404;
        }

        .priority-low {
            background: #d1ecf1;
            color: #0c5460;
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        .task-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .task-btn-edit {
            background: #17a2b8;
            color: white;
        }

        .task-btn-edit:hover {
            background: #138496;
        }

        .task-btn-delete {
            background: #dc3545;
            color: white;
        }

        .task-btn-delete:hover {
            background: #c82333;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state h4 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #495057;
        }

        .empty-state p {
            font-size: 1rem;
            opacity: 0.8;
        }

        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .main-content {
                padding: 20px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                justify-content: center;
            }

            .task-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .task-actions {
                align-self: flex-end;
            }
        }

        /* Êèí‰ª∂Ê†∑ÂºèË¶ÜÁõñ */
        .ew-checkbox {
            margin: 0;
        }

        .ew-input-number {
            margin: 0;
        }

        .ew-select {
            margin: 0;
        }

        .ew-datetime-picker {
            margin: 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ ‰ªªÂä°ÁÆ°ÁêÜÁ≥ªÁªü</h1>
            <p>Âü∫‰∫éËá™ÂÆö‰πâÊèí‰ª∂ÁöÑÁªºÂêàÂÆûÊàòÁ§∫‰æã</p>
        </div>

        <div class="main-content">
            <!-- ÁªüËÆ°Âç°Áâá -->
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-number" id="total-tasks">0</div>
                    <div class="stat-label">ÊÄª‰ªªÂä°Êï∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-tasks">0</div>
                    <div class="stat-label">Â∑≤ÂÆåÊàê</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pending-tasks">0</div>
                    <div class="stat-label">ÂæÖÂ§ÑÁêÜ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="high-priority">0</div>
                    <div class="stat-label">È´ò‰ºòÂÖàÁ∫ß</div>
                </div>
            </div>

            <!-- ÊéßÂà∂Èù¢Êùø -->
            <div class="controls-section">
                <h3 style="margin-bottom: 20px; color: #495057;">üìù ‰ªªÂä°ÊéßÂà∂Èù¢Êùø</h3>

                <div class="controls-grid">
                    <div class="control-group">
                        <label>‰ªªÂä°Ê†áÈ¢ò</label>
                        <input type="text" id="task-title" placeholder="ËæìÂÖ•‰ªªÂä°Ê†áÈ¢ò"
                            style="padding: 10px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem;">
                    </div>

                    <div class="control-group">
                        <label>‰ªªÂä°ÊèèËø∞</label>
                        <textarea id="task-description" placeholder="ËæìÂÖ•‰ªªÂä°ÊèèËø∞"
                            style="padding: 10px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 1rem; resize: vertical; min-height: 60px;"></textarea>
                    </div>

                    <div class="control-group">
                        <label>‰ºòÂÖàÁ∫ß</label>
                        <div id="priority-select"></div>
                    </div>

                    <div class="control-group">
                        <label>Êà™Ê≠¢Êó•Êúü</label>
                        <div id="deadline-picker"></div>
                    </div>

                    <div class="control-group">
                        <label>È¢ÑËÆ°Â∑•Êó∂(Â∞èÊó∂)</label>
                        <div id="hours-input"></div>
                    </div>

                    <div class="control-group">
                        <label>Ê†áÁ≠æÈÄâÊã©</label>
                        <div id="tags-checkbox"></div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" id="add-task-btn">‚ûï Ê∑ªÂä†‰ªªÂä°</button>
                    <button class="btn btn-success" id="bulk-complete-btn">‚úÖ ÊâπÈáèÂÆåÊàê</button>
                    <button class="btn btn-warning" id="export-tasks-btn">üì§ ÂØºÂá∫‰ªªÂä°</button>
                    <button class="btn btn-danger" id="clear-completed-btn">üóëÔ∏è Ê∏ÖÁêÜÂ∑≤ÂÆåÊàê</button>
                </div>
            </div>

            <!-- ‰ªªÂä°ÂàóË°® -->
            <div class="tasks-section">
                <div class="tasks-header">
                    <h3>üìã ‰ªªÂä°ÂàóË°®</h3>
                    <div class="task-count" id="task-count">0 ‰∏™‰ªªÂä°</div>
                </div>

                <div class="tasks-list" id="tasks-list">
                    <div class="empty-state">
                        <h4>üì≠ ÊöÇÊó†‰ªªÂä°</h4>
                        <p>ÁÇπÂáª‰∏äÊñπ"Ê∑ªÂä†‰ªªÂä°"ÊåâÈíÆÂºÄÂßãÂàõÂª∫ÊÇ®ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂºïÂÖ•Êèí‰ª∂ -->
    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/datetime-picker/index.js"></script>
    <script src="../../demo/plugins/input-number/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>

    <script>
        // ‰ªªÂä°ÁÆ°ÁêÜÁ≥ªÁªü‰∏ªÁ±ª
        class TaskManager {
            constructor() {
                this.tasks = [];
                this.nextId = 1;
                this.notification = new Notification();
                this.modal = new Modal();

                this.init();
            }

            init() {
                this.initPlugins();
                this.bindEvents();
                this.loadTasks();
                this.updateStats();
            }

            initPlugins() {
                // ÂàùÂßãÂåñ‰ºòÂÖàÁ∫ßÈÄâÊã©Âô®
                this.prioritySelect = new Select({
                    container: '#priority-select',
                    options: [
                        { value: 'low', label: '‰Ωé‰ºòÂÖàÁ∫ß' },
                        { value: 'medium', label: '‰∏≠‰ºòÂÖàÁ∫ß' },
                        { value: 'high', label: 'È´ò‰ºòÂÖàÁ∫ß' }
                    ],
                    onChange: (value) => {
                        console.log('‰ºòÂÖàÁ∫ßÈÄâÊã©:', value);
                    }
                });

                // ÂàùÂßãÂåñÊà™Ê≠¢Êó•ÊúüÈÄâÊã©Âô®
                this.deadlinePicker = new DateTimePicker({
                    container: '#deadline-picker',
                    placeholder: 'ÈÄâÊã©Êà™Ê≠¢Êó•Êúü',
                    onChange: (value) => {
                        console.log('Êà™Ê≠¢Êó•Êúü:', value);
                    }
                });

                // ÂàùÂßãÂåñÂ∑•Êó∂ËæìÂÖ•
                this.hoursInput = new InputNumber({
                    container: '#hours-input',
                    min: 0.5,
                    max: 100,
                    step: 0.5,
                    value: 1,
                    onChange: (value) => {
                        console.log('È¢ÑËÆ°Â∑•Êó∂:', value);
                    }
                });

                // ÂàùÂßãÂåñÊ†áÁ≠æÂ§çÈÄâÊ°ÜÁªÑ - ‰∏ç‰ΩøÁî®ÂÖ®ÈÄâÂäüËÉΩ
                this.tagsCheckbox = this.createTagsCheckboxes();
            }

            createTagsCheckboxes() {
                const container = document.querySelector('#tags-checkbox');
                const checkboxes = [];
                
                const tags = ['Â∑•‰Ωú', 'Â≠¶‰π†', 'ÁîüÊ¥ª', 'Á¥ßÊÄ•'];
                
                tags.forEach(tag => {
                    const checkbox = new Checkbox({
                        label: tag,
                        checked: false,
                        onChange: (checked) => {
                            console.log(`Ê†áÁ≠æ ${tag}: ${checked}`);
                        }
                    });
                    checkbox.mount(container);
                    checkboxes.push(checkbox);
                });
                
                return {
                    container,
                    checkboxes
                };
            }

            bindEvents() {
                // Ê∑ªÂä†‰ªªÂä°ÊåâÈíÆ
                document.getElementById('add-task-btn').addEventListener('click', () => {
                    this.addTask();
                });

                // ÊâπÈáèÂÆåÊàêÊåâÈíÆ
                document.getElementById('bulk-complete-btn').addEventListener('click', () => {
                    this.bulkComplete();
                });

                // ÂØºÂá∫‰ªªÂä°ÊåâÈíÆ
                document.getElementById('export-tasks-btn').addEventListener('click', () => {
                    this.exportTasks();
                });

                // Ê∏ÖÁêÜÂ∑≤ÂÆåÊàêÊåâÈíÆ
                document.getElementById('clear-completed-btn').addEventListener('click', () => {
                    this.clearCompleted();
                });
            }

            addTask() {
                const title = document.getElementById('task-title').value.trim();
                const description = document.getElementById('task-description').value.trim();
                const priority = this.prioritySelect.getValue();
                const deadline = this.deadlinePicker.getValue();
                const hours = this.hoursInput.getValue();
                const tags = this.getSelectedTags();

                if (!title) {
                    this.notification.error('ËØ∑ËæìÂÖ•‰ªªÂä°Ê†áÈ¢ò');
                    return;
                }

                const task = {
                    id: this.nextId++,
                    title,
                    description,
                    priority: priority || 'medium',
                    deadline,
                    hours,
                    tags,
                    completed: false,
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };

                this.tasks.push(task);
                this.saveTasks();
                this.renderTasks();
                this.updateStats();
                this.clearForm();

                this.notification.success(`‰ªªÂä°"${title}"Ê∑ªÂä†ÊàêÂäüÔºÅ`);
            }

            getSelectedTags() {
                const selectedTags = [];
                this.tagsCheckbox.checkboxes.forEach((checkbox) => {
                    if (checkbox.isChecked()) {
                        selectedTags.push(checkbox.options.label);
                    }
                });
                return selectedTags;
            }

            clearForm() {
                document.getElementById('task-title').value = '';
                document.getElementById('task-description').value = '';
                this.prioritySelect.setValue('');
                this.deadlinePicker.setValue('');
                this.hoursInput.setValue(1);
                this.tagsCheckbox.checkboxes.forEach(checkbox => {
                    checkbox.setChecked(false);
                });
            }

            toggleTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    task.completed = !task.completed;
                    task.completedAt = task.completed ? new Date().toISOString() : null;
                    this.saveTasks();
                    this.renderTasks();
                    this.updateStats();

                    const action = task.completed ? 'ÂÆåÊàê' : 'ÂèñÊ∂àÂÆåÊàê';
                    this.notification.success(`‰ªªÂä°"${task.title}"Â∑≤${action}`);
                }
            }

            editTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    this.modal.prompt('ÁºñËæë‰ªªÂä°', task.title).then(newTitle => {
                        if (newTitle && newTitle.trim()) {
                            task.title = newTitle.trim();
                            this.saveTasks();
                            this.renderTasks();
                            this.notification.success('‰ªªÂä°Ê†áÈ¢òÊõ¥Êñ∞ÊàêÂäüÔºÅ');
                        }
                    });
                }
            }

            deleteTask(taskId) {
                const task = this.tasks.find(t => t.id === taskId);
                if (task) {
                    this.modal.confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§‰ªªÂä°"${task.title}"ÂêóÔºü`).then(confirmed => {
                        if (confirmed) {
                            this.tasks = this.tasks.filter(t => t.id !== taskId);
                            this.saveTasks();
                            this.renderTasks();
                            this.updateStats();
                            this.notification.success('‰ªªÂä°Âà†Èô§ÊàêÂäüÔºÅ');
                        }
                    });
                }
            }

            bulkComplete() {
                const pendingTasks = this.tasks.filter(t => !t.completed);
                if (pendingTasks.length === 0) {
                    this.notification.info('Ê≤°ÊúâÂæÖÂ§ÑÁêÜÁöÑ‰ªªÂä°');
                    return;
                }

                this.modal.confirm(`Á°ÆÂÆöË¶ÅÊâπÈáèÂÆåÊàê ${pendingTasks.length} ‰∏™ÂæÖÂ§ÑÁêÜ‰ªªÂä°ÂêóÔºü`).then(confirmed => {
                    if (confirmed) {
                        pendingTasks.forEach(task => {
                            task.completed = true;
                            task.completedAt = new Date().toISOString();
                        });
                        this.saveTasks();
                        this.renderTasks();
                        this.updateStats();
                        this.notification.success(`ÊâπÈáèÂÆåÊàê‰∫Ü ${pendingTasks.length} ‰∏™‰ªªÂä°ÔºÅ`);
                    }
                });
            }

            exportTasks() {
                const exportData = {
                    exportTime: new Date().toISOString(),
                    totalTasks: this.tasks.length,
                    completedTasks: this.tasks.filter(t => t.completed).length,
                    pendingTasks: this.tasks.filter(t => !t.completed).length,
                    tasks: this.tasks
                };

                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);

                const link = document.createElement('a');
                link.href = url;
                link.download = `tasks-export-${new Date().toISOString().split('T')[0]}.json`;
                link.click();

                URL.revokeObjectURL(url);
                this.notification.success('‰ªªÂä°Êï∞ÊçÆÂØºÂá∫ÊàêÂäüÔºÅ');
            }

            clearCompleted() {
                const completedTasks = this.tasks.filter(t => t.completed);
                if (completedTasks.length === 0) {
                    this.notification.info('Ê≤°ÊúâÂ∑≤ÂÆåÊàêÁöÑ‰ªªÂä°');
                    return;
                }

                this.modal.confirm(`Á°ÆÂÆöË¶ÅÊ∏ÖÁêÜ ${completedTasks.length} ‰∏™Â∑≤ÂÆåÊàê‰ªªÂä°ÂêóÔºü`).then(confirmed => {
                    if (confirmed) {
                        this.tasks = this.tasks.filter(t => !t.completed);
                        this.saveTasks();
                        this.renderTasks();
                        this.updateStats();
                        this.notification.success(`Ê∏ÖÁêÜ‰∫Ü ${completedTasks.length} ‰∏™Â∑≤ÂÆåÊàê‰ªªÂä°ÔºÅ`);
                    }
                });
            }

            renderTasks() {
                const tasksList = document.getElementById('tasks-list');

                if (this.tasks.length === 0) {
                    tasksList.innerHTML = `
                        <div class="empty-state">
                            <h4>üì≠ ÊöÇÊó†‰ªªÂä°</h4>
                            <p>ÁÇπÂáª‰∏äÊñπ"Ê∑ªÂä†‰ªªÂä°"ÊåâÈíÆÂºÄÂßãÂàõÂª∫ÊÇ®ÁöÑÁ¨¨‰∏Ä‰∏™‰ªªÂä°</p>
                        </div>
                    `;
                    return;
                }

                const tasksHtml = this.tasks.map(task => this.renderTaskItem(task)).join('');
                tasksList.innerHTML = tasksHtml;

                // ÈáçÊñ∞ÁªëÂÆö‰∫ã‰ª∂
                this.bindTaskEvents();
            }

            renderTaskItem(task) {
                const priorityClass = `priority-${task.priority}`;
                const priorityText = {
                    'low': '‰Ωé',
                    'medium': '‰∏≠',
                    'high': 'È´ò'
                }[task.priority];

                const tagsHtml = task.tags.map(tag => `<span style="background: #e9ecef; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; margin-right: 5px;">${tag}</span>`).join('');

                                return `
                    <div class="task-item ${task.completed ? 'completed' : ''}" data-task-id="${task.id}">
                        <div class="task-checkbox" id="task-checkbox-${task.id}"></div>
                        
                        <div class="task-content">
                            <div class="task-title" style="text-decoration: ${task.completed ? 'line-through' : 'none'}; opacity: ${task.completed ? '0.6' : '1'};">${task.title}</div>
                            <div class="task-description">${task.description || 'ÊöÇÊó†ÊèèËø∞'}</div>
                            <div class="task-meta">
                                <span>‚è∞ ${task.deadline || 'Êó†Êà™Ê≠¢Êó•Êúü'}</span>
                                <span>‚è±Ô∏è ${task.hours}Â∞èÊó∂</span>
                                <span>üìÖ ${new Date(task.createdAt).toLocaleDateString()}</span>
                            </div>
                            <div style="margin-top: 8px;">${tagsHtml}</div>
                        </div>
                        
                        <div class="task-priority ${priorityClass}">${priorityText}</div>
                        
                        <div class="task-actions">
                            <button class="task-btn task-btn-edit" onclick="taskManager.editTask(${task.id})">‚úèÔ∏è</button>
                            <button class="task-btn task-btn-delete" onclick="taskManager.deleteTask(${task.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }

            bindTaskEvents() {
                // ‰∏∫ÊØè‰∏™‰ªªÂä°ÂàõÂª∫Â§çÈÄâÊ°Ü
                document.querySelectorAll('.task-item').forEach(item => {
                    const taskId = parseInt(item.dataset.taskId);
                    const task = this.tasks.find(t => t.id === taskId);
                    const checkboxContainer = item.querySelector('.task-checkbox');
                    
                    if (checkboxContainer && task) {
                        // Ê∏ÖÁ©∫ÂÆπÂô®
                        checkboxContainer.innerHTML = '';
                        
                        // ÂàõÂª∫Êñ∞ÁöÑÂ§çÈÄâÊ°Ü
                        const checkbox = new Checkbox({
                            label: '',
                            checked: task.completed,
                            onChange: (checked) => {
                                this.toggleTask(taskId);
                            }
                        });
                        checkbox.mount(checkboxContainer);
                    }
                });
            }

            updateStats() {
                const totalTasks = this.tasks.length;
                const completedTasks = this.tasks.filter(t => t.completed).length;
                const pendingTasks = totalTasks - completedTasks;
                const highPriority = this.tasks.filter(t => t.priority === 'high').length;

                document.getElementById('total-tasks').textContent = totalTasks;
                document.getElementById('completed-tasks').textContent = completedTasks;
                document.getElementById('pending-tasks').textContent = pendingTasks;
                document.getElementById('high-priority').textContent = highPriority;
                document.getElementById('task-count').textContent = `${totalTasks} ‰∏™‰ªªÂä°`;
            }

            saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(this.tasks));
                localStorage.setItem('nextId', this.nextId.toString());
            }

            loadTasks() {
                const savedTasks = localStorage.getItem('tasks');
                const savedNextId = localStorage.getItem('nextId');

                if (savedTasks) {
                    this.tasks = JSON.parse(savedTasks);
                }

                if (savedNextId) {
                    this.nextId = parseInt(savedNextId);
                }
            }
        }

        // ÂàùÂßãÂåñ‰ªªÂä°ÁÆ°ÁêÜÂô®
        let taskManager;

        // Á≠âÂæÖÈ°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            taskManager = new TaskManager();

            // ÊòæÁ§∫Ê¨¢ËøéÈÄöÁü•
            setTimeout(() => {
                taskManager.notification.info('Ê¨¢Ëøé‰ΩøÁî®‰ªªÂä°ÁÆ°ÁêÜÁ≥ªÁªüÔºÅËøôÊòØ‰∏Ä‰∏™Âü∫‰∫éËá™ÂÆö‰πâÊèí‰ª∂ÁöÑÁªºÂêàÂÆûÊàòÁ§∫‰æã„ÄÇ');
            }, 1000);
        });

        // ÂÖ®Â±ÄËÆøÈóÆ
        window.taskManager = taskManager;
    </script>
</body>

</html>