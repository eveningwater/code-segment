<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šå‡½æ•°æ‰¹é‡å¤„ç†å·¥å…·å¹³å° - juxt</title>
    <link rel="stylesheet" href="../../demo/plugins/modal/style.css">
    <link rel="stylesheet" href="../../demo/plugins/checkbox/style.css">
    <link rel="stylesheet" href="../../demo/plugins/notification/style.css">
    <link rel="stylesheet" href="../../demo/plugins/select/style.css">
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 900px;
            margin: 0 auto;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .card h2 {
            font-size: 1.6rem;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .input-section {
            margin-bottom: 25px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 1rem;
        }

        .input-group input,
        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-group input:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }

        .btn-info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-info:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .items-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            min-height: 60px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .item-tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .item-tag .remove-btn {
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .item-tag .remove-btn:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .empty-state {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-size: 0.95rem;
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .function-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .function-card:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .function-card.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .function-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .function-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        .function-desc {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .result-matrix {
            overflow-x: auto;
            margin-top: 20px;
        }

        .matrix-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .matrix-table th,
        .matrix-table td {
            padding: 15px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .matrix-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
        }

        .matrix-table td {
            background: white;
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.9rem;
        }

        .matrix-table tr:nth-child(even) td {
            background: #f8f9fa;
        }

        .matrix-table tr:hover td {
            background: #e8f5e8;
        }

        .stats-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .code-block {
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
        }

        .code-block pre {
            margin: 0;
            padding: 20px;
            overflow-x: auto;
            background: #282c34;
            border-radius: 8px;
        }

        .code-block pre code {
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            display: block;
        }

        .hljs {
            background: #282c34;
            padding: 0;
        }

        .advanced-options {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .options-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #495057;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            background: #667eea;
            color: white;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                justify-content: center;
            }

            .function-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .modal-content {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ å¤šå‡½æ•°æ‰¹é‡å¤„ç†å·¥å…·å¹³å°</h1>
            <p>åŸºäº juxt å‡½æ•°çš„å¼ºå¤§å·¥å…·ï¼Œå°†å¤šä¸ªå‡½æ•°åŒæ—¶åº”ç”¨åˆ°å¤šä¸ªå‚æ•°ä¸Šï¼Œç”Ÿæˆç»“æœçŸ©é˜µå¯è§†åŒ–å±•ç¤º</p>
        </div>

        <div class="main-content">
            <!-- å·¦ä¾§ï¼šæ•°æ®è¾“å…¥ -->
            <div class="card">
                <h2>ğŸ“Š è¾“å…¥æ•°æ®ç®¡ç†</h2>
                <div class="input-section">
                    <div class="input-group">
                        <label for="dataInput">æ·»åŠ æ•°æ®</label>
                        <input type="text" id="dataInput" placeholder="è¾“å…¥æ•°æ®åæŒ‰å›è½¦æˆ–ç‚¹å‡»æ·»åŠ ">
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" onclick="window.juxtTool?.addData()">â• æ·»åŠ æ•°æ®</button>
                        <button class="btn btn-success" onclick="window.juxtTool?.loadSampleData()">ğŸ“„ åŠ è½½ç¤ºä¾‹</button>
                        <button class="btn btn-danger" onclick="window.juxtTool?.clearData()">ğŸ—‘ï¸ æ¸…ç©ºæ•°æ®</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>å½“å‰æ•°æ®åˆ—è¡¨ (<span id="dataCount">0</span>)</label>
                    <div class="items-container" id="dataContainer">
                        <div class="empty-state">æš‚æ— æ•°æ®ï¼Œè¯·æ·»åŠ </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šå‡½æ•°é€‰æ‹© -->
            <div class="card">
                <h2>ğŸ”§ å¤„ç†å‡½æ•°é€‰æ‹©</h2>
                <div class="input-section">
                    <div class="input-group">
                        <label>æ•°æ®ç±»å‹</label>
                        <div id="dataTypeSelect"></div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-success" onclick="window.juxtTool?.selectAllFunctions()">âœ… å…¨é€‰</button>
                        <button class="btn btn-warning" onclick="window.juxtTool?.clearSelection()">âŒ æ¸…ç©ºé€‰æ‹©</button>
                        <button class="btn btn-info" onclick="window.juxtTool?.showFunctionInfo()">â„¹ï¸ å‡½æ•°è¯´æ˜</button>
                    </div>
                </div>

                <div class="input-group">
                    <label>å·²é€‰å‡½æ•° (<span id="selectedCount">0</span>)</label>
                    <div class="function-grid" id="functionGrid">
                        <!-- å‡½æ•°å¡ç‰‡å°†åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- æ‰§è¡Œæ§åˆ¶ -->
        <div class="card">
            <h2>ğŸš€ æ‰§è¡Œ juxt å‡½æ•°</h2>
            <div class="button-group">
                <button class="btn btn-primary" onclick="window.juxtTool?.executeJuxt()" style="flex: 1;">âš¡ æ‰§è¡Œæ‰¹é‡å¤„ç†</button>
                <button class="btn btn-info" onclick="window.juxtTool?.exportResult()">ğŸ’¾ å¯¼å‡ºç»“æœ</button>
                <button class="btn btn-warning" onclick="window.juxtTool?.clearResult()">ğŸ—‘ï¸ æ¸…ç©ºç»“æœ</button>
            </div>

            <div class="code-block" id="codePreview" style="display: none;">
                <pre><code class="language-javascript">// æ‰§è¡Œä»£ç å°†åœ¨è¿™é‡Œæ˜¾ç¤º</code></pre>
            </div>
        </div>

        <!-- ç»“æœçŸ©é˜µ -->
        <div class="card" id="resultSection" style="display: none;">
            <h2>ğŸ“ˆ ç»“æœçŸ©é˜µå¯è§†åŒ–</h2>
            <div class="result-matrix" id="resultMatrix">
                <!-- ç»“æœè¡¨æ ¼å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="card">
            <h2>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h2>
            <div class="stats-section">
                <div class="stats-grid" id="statsGrid">
                    <!-- ç»Ÿè®¡ä¿¡æ¯å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- é«˜çº§é€‰é¡¹ -->
        <div class="card">
            <h2>âš™ï¸ é«˜çº§é€‰é¡¹</h2>
            <div class="advanced-options">
                <div class="options-title">æ˜¾ç¤ºé€‰é¡¹</div>
                <div id="checkboxGroup">
                    <!-- å¤é€‰æ¡†å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="card">
            <h2>ğŸ“– å‡½æ•°è¯´æ˜</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">juxt å‡½æ•°</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">const juxt = (...fns) => (...args) => 
    [...fns].map(fn => [...args].map(fn));</code></pre>
                </div>

                <h3 style="color: #667eea; margin: 20px 0 15px 0;">æ ¸å¿ƒç‰¹æ€§</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li><code>juxt</code> æ¥å—å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°</li>
                    <li>è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—å‚æ•°åï¼Œå°†æ‰€æœ‰å‡½æ•°åº”ç”¨åˆ°æ‰€æœ‰å‚æ•°ä¸Š</li>
                    <li>ç»“æœæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªå‡½æ•°å¯¹æ‰€æœ‰å‚æ•°çš„å¤„ç†ç»“æœ</li>
                    <li>éå¸¸é€‚åˆæ‰¹é‡æ•°æ®å¤„ç†å’Œè½¬æ¢</li>
                </ul>

                <h3 style="color: #667eea; margin: 20px 0 15px 0;">ä½¿ç”¨ç¤ºä¾‹</h3>
                <div class="code-block">
                    <pre><code class="language-javascript">// å®šä¹‰å¤„ç†å‡½æ•°
const toUpper = str => str.toUpperCase();
const toLower = str => str.toLowerCase();
const getLength = str => str.length;

// åˆ›å»º juxt å‡½æ•°
const process = juxt(toUpper, toLower, getLength);

// æ‰¹é‡å¤„ç†æ•°æ®
const result = process('Hello', 'World', 'JavaScript');

// ç»“æœçŸ©é˜µï¼š
// [
//   ['HELLO', 'WORLD', 'JAVASCRIPT'],      // toUpper çš„ç»“æœ
//   ['hello', 'world', 'javascript'],      // toLower çš„ç»“æœ
//   [5, 5, 10]                              // getLength çš„ç»“æœ
// ]</code></pre>
                </div>

                <h3 style="color: #667eea; margin: 20px 0 15px 0;">åº”ç”¨åœºæ™¯</h3>
                <ul style="color: #495057; padding-left: 20px; line-height: 1.8;">
                    <li>ğŸ“Š <strong>æ•°æ®è½¬æ¢</strong>ï¼šå°†æ•°æ®åŒæ—¶è½¬æ¢ä¸ºå¤šç§æ ¼å¼</li>
                    <li>ğŸ” <strong>å¤šç»´åˆ†æ</strong>ï¼šå¯¹æ•°æ®è¿›è¡Œå¤šè§’åº¦åˆ†æ</li>
                    <li>âœ… <strong>éªŒè¯æ£€æŸ¥</strong>ï¼šåŒæ—¶è¿›è¡Œå¤šç§éªŒè¯è§„åˆ™æ£€æŸ¥</li>
                    <li>ğŸ“ˆ <strong>ç»Ÿè®¡è®¡ç®—</strong>ï¼šè®¡ç®—å¤šä¸ªç»Ÿè®¡æŒ‡æ ‡</li>
                    <li>ğŸ¨ <strong>æ ¼å¼åŒ–å¤„ç†</strong>ï¼šç”Ÿæˆå¤šç§æ ¼å¼çš„è¾“å‡º</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="../../demo/plugins/modal/index.js"></script>
    <script src="../../demo/plugins/checkbox/index.js"></script>
    <script src="../../demo/plugins/notification/index.js"></script>
    <script src="../../demo/plugins/select/index.js"></script>
    <!-- Highlight.js ä»£ç é«˜äº® -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        // æ ¸å¿ƒ juxt å‡½æ•°
        const juxt = (...fns) => (...args) => [...fns].map(fn => [...args].map(fn));

        // å¤šå‡½æ•°æ‰¹é‡å¤„ç†å·¥å…·ç±»
        class JuxtTool {
            constructor() {
                this.plugins = {};
                this.data = [];
                this.selectedFunctions = [];
                this.lastResult = null;
                this.stats = {
                    totalExecutions: 0,
                    totalDataProcessed: 0,
                    totalFunctionsUsed: 0
                };
                
                // é¢„å®šä¹‰å‡½æ•°åº“
                this.functionLibrary = {
                    string: [
                        { 
                            id: 'toUpperCase', 
                            name: 'è½¬å¤§å†™', 
                            icon: 'ğŸ” ', 
                            desc: 'toUpperCase', 
                            fn: str => String(str).toUpperCase() 
                        },
                        { 
                            id: 'toLowerCase', 
                            name: 'è½¬å°å†™', 
                            icon: 'ğŸ”¡', 
                            desc: 'toLowerCase', 
                            fn: str => String(str).toLowerCase() 
                        },
                        { 
                            id: 'length', 
                            name: 'è·å–é•¿åº¦', 
                            icon: 'ğŸ“', 
                            desc: 'length', 
                            fn: str => String(str).length 
                        },
                        { 
                            id: 'reverse', 
                            name: 'åè½¬å­—ç¬¦ä¸²', 
                            icon: 'ğŸ”„', 
                            desc: 'reverse', 
                            fn: str => String(str).split('').reverse().join('') 
                        },
                        { 
                            id: 'capitalize', 
                            name: 'é¦–å­—æ¯å¤§å†™', 
                            icon: 'ğŸ…°ï¸', 
                            desc: 'capitalize', 
                            fn: str => String(str).charAt(0).toUpperCase() + String(str).slice(1).toLowerCase() 
                        },
                        { 
                            id: 'trim', 
                            name: 'å»é™¤ç©ºæ ¼', 
                            icon: 'âœ‚ï¸', 
                            desc: 'trim', 
                            fn: str => String(str).trim() 
                        }
                    ],
                    number: [
                        { 
                            id: 'double', 
                            name: 'ç¿»å€', 
                            icon: 'Ã—2', 
                            desc: 'n * 2', 
                            fn: n => Number(n) * 2 
                        },
                        { 
                            id: 'square', 
                            name: 'å¹³æ–¹', 
                            icon: 'Â²', 
                            desc: 'nÂ²', 
                            fn: n => Number(n) ** 2 
                        },
                        { 
                            id: 'sqrt', 
                            name: 'å¹³æ–¹æ ¹', 
                            icon: 'âˆš', 
                            desc: 'âˆšn', 
                            fn: n => Math.sqrt(Number(n)) 
                        },
                        { 
                            id: 'abs', 
                            name: 'ç»å¯¹å€¼', 
                            icon: '|n|', 
                            desc: 'Math.abs', 
                            fn: n => Math.abs(Number(n)) 
                        },
                        { 
                            id: 'round', 
                            name: 'å››èˆäº”å…¥', 
                            icon: 'â‰ˆ', 
                            desc: 'Math.round', 
                            fn: n => Math.round(Number(n)) 
                        },
                        { 
                            id: 'negate', 
                            name: 'å–å', 
                            icon: 'Â±', 
                            desc: '-n', 
                            fn: n => -Number(n) 
                        }
                    ],
                    mixed: [
                        { 
                            id: 'type', 
                            name: 'ç±»å‹æ£€æµ‹', 
                            icon: 'ğŸ·ï¸', 
                            desc: 'typeof', 
                            fn: val => typeof val 
                        },
                        { 
                            id: 'toString', 
                            name: 'è½¬å­—ç¬¦ä¸²', 
                            icon: 'ğŸ“', 
                            desc: 'String()', 
                            fn: val => String(val) 
                        },
                        { 
                            id: 'toNumber', 
                            name: 'è½¬æ•°å­—', 
                            icon: 'ğŸ”¢', 
                            desc: 'Number()', 
                            fn: val => Number(val) 
                        },
                        { 
                            id: 'toBoolean', 
                            name: 'è½¬å¸ƒå°”', 
                            icon: 'âœ“âœ—', 
                            desc: 'Boolean()', 
                            fn: val => Boolean(val) 
                        },
                        { 
                            id: 'json', 
                            name: 'JSONåºåˆ—åŒ–', 
                            icon: '{ }', 
                            desc: 'JSON.stringify', 
                            fn: val => JSON.stringify(val) 
                        },
                        { 
                            id: 'identity', 
                            name: 'åŸå€¼è¿”å›', 
                            icon: 'â†”ï¸', 
                            desc: 'x => x', 
                            fn: val => val 
                        }
                    ]
                };
                
                this.currentType = 'string';
                this.init();
            }

            // åˆå§‹åŒ–
            async init() {
                try {
                    await this.loadPlugins();
                    this.setupSelects();
                    this.setupCheckboxes();
                    this.initHighlight();
                    this.setupInputEvents();
                    this.renderFunctions();
                    this.updateStats();
                    this.showWelcomeMessage();
                } catch (error) {
                    console.error('åˆå§‹åŒ–å¤±è´¥:', error);
                    this.showError('åˆå§‹åŒ–å¤±è´¥: ' + error.message);
                }
            }

            // åˆå§‹åŒ–ä»£ç é«˜äº®
            initHighlight() {
                if (window.hljs) {
                    document.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                    console.log('Highlight.js åˆå§‹åŒ–å®Œæˆ');
                } else {
                    console.warn('Highlight.js æœªåŠ è½½');
                }
            }

            // åŠ è½½æ’ä»¶
            async loadPlugins() {
                try {
                    this.plugins.modal = new Modal();
                    this.plugins.notification = new Notification();
                } catch (error) {
                    console.warn('éƒ¨åˆ†æ’ä»¶åŠ è½½å¤±è´¥:', error);
                }
            }

            // è®¾ç½®ä¸‹æ‹‰æ¡†
            setupSelects() {
                const dataTypeSelect = document.getElementById('dataTypeSelect');
                if (dataTypeSelect) {
                    const typeOptions = [
                        { value: 'string', label: 'å­—ç¬¦ä¸²å¤„ç†' },
                        { value: 'number', label: 'æ•°å­—å¤„ç†' },
                        { value: 'mixed', label: 'é€šç”¨å¤„ç†' }
                    ];

                    this.plugins.dataTypeSelect = new Select({
                        container: dataTypeSelect,
                        options: typeOptions,
                        placeholder: 'é€‰æ‹©æ•°æ®ç±»å‹',
                        onChange: (value) => {
                            this.currentType = value;
                            this.renderFunctions();
                        }
                    });

                    this.plugins.dataTypeSelect.setValue('string');
                }
            }

            // è®¾ç½®å¤é€‰æ¡†
            setupCheckboxes() {
                const checkboxGroup = document.getElementById('checkboxGroup');
                if (!checkboxGroup) return;

                const options = [
                    { id: 'autoExecute', label: 'è‡ªåŠ¨æ‰§è¡Œ', checked: false },
                    { id: 'showNotifications', label: 'æ˜¾ç¤ºé€šçŸ¥æé†’', checked: true },
                    { id: 'showCode', label: 'æ˜¾ç¤ºæ‰§è¡Œä»£ç ', checked: true },
                    { id: 'highlightMatrix', label: 'ç»“æœçŸ©é˜µé«˜äº®', checked: true }
                ];

                try {
                    const checkboxGroupInstance = Checkbox.createCheckboxGroup({
                        items: options.map(option => ({
                            id: option.id,
                            label: option.label,
                            checked: option.checked
                        })),
                        onChange: (checkedStates) => {
                            console.log('å¤é€‰æ¡†çŠ¶æ€å˜åŒ–:', checkedStates);
                        }
                    });

                    checkboxGroup.appendChild(checkboxGroupInstance.container);
                    this.plugins.checkboxGroup = checkboxGroupInstance;
                    this.checkboxOptions = options;
                } catch (error) {
                    console.warn('è‡ªå®šä¹‰å¤é€‰æ¡†åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿå¤é€‰æ¡†:', error);
                    this.setupNativeCheckboxes(options, checkboxGroup);
                }
            }

            // è®¾ç½®åŸç”Ÿå¤é€‰æ¡†
            setupNativeCheckboxes(options, container) {
                options.forEach(option => {
                    const checkboxItem = document.createElement('div');
                    checkboxItem.style.marginBottom = '10px';
                    checkboxItem.innerHTML = `
                        <input type="checkbox" id="${option.id}" ${option.checked ? 'checked' : ''}>
                        <label for="${option.id}" style="margin-left: 8px; cursor: pointer;">${option.label}</label>
                    `;
                    container.appendChild(checkboxItem);
                });
            }

            // è·å–å¤é€‰æ¡†å€¼
            getCheckboxValue(checkboxId) {
                if (this.plugins.checkboxGroup && this.checkboxOptions) {
                    try {
                        const optionIndex = this.checkboxOptions.findIndex(option => option.id === checkboxId);
                        if (optionIndex !== -1) {
                            const checkedStates = this.plugins.checkboxGroup.getAllChecked();
                            return checkedStates[optionIndex] || false;
                        }
                    } catch (error) {
                        console.warn('è·å–å¤é€‰æ¡†å€¼å¤±è´¥ï¼Œä½¿ç”¨åŸç”Ÿæ–¹æ³•:', error);
                    }
                }

                const checkbox = document.getElementById(checkboxId);
                return checkbox ? checkbox.checked : false;
            }

            // è®¾ç½®è¾“å…¥äº‹ä»¶
            setupInputEvents() {
                const dataInput = document.getElementById('dataInput');
                if (dataInput) {
                    dataInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.addData();
                        }
                    });
                }
            }

            // è½¬ä¹‰ HTML
            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            // æ·»åŠ æ•°æ®
            addData() {
                const dataInput = document.getElementById('dataInput');
                if (!dataInput) return;

                let value = dataInput.value.trim();
                if (!value) {
                    this.showError('è¯·è¾“å…¥æ•°æ®');
                    return;
                }

                this.data.push(value);
                this.stats.totalDataProcessed++;
                
                dataInput.value = '';
                dataInput.focus();

                this.renderData();
                this.updateStats();

                if (this.getCheckboxValue('autoExecute') && this.selectedFunctions.length > 0) {
                    this.executeJuxt();
                }

                this.showNotification(`å·²æ·»åŠ æ•°æ®: ${value}`, 'success');
            }

            // æ¸²æŸ“æ•°æ®
            renderData() {
                const dataContainer = document.getElementById('dataContainer');
                const dataCount = document.getElementById('dataCount');

                if (!dataContainer) return;

                if (dataCount) {
                    dataCount.textContent = this.data.length;
                }

                if (this.data.length === 0) {
                    dataContainer.innerHTML = '<div class="empty-state">æš‚æ— æ•°æ®ï¼Œè¯·æ·»åŠ </div>';
                    return;
                }

                let html = '';
                this.data.forEach((item, index) => {
                    html += `
                        <div class="item-tag">
                            <span>${this.escapeHtml(item)}</span>
                            <button class="remove-btn" onclick="window.juxtTool?.removeData(${index})" title="åˆ é™¤">Ã—</button>
                        </div>
                    `;
                });

                dataContainer.innerHTML = html;
            }

            // ç§»é™¤æ•°æ®
            removeData(index) {
                if (index >= 0 && index < this.data.length) {
                    const removed = this.data.splice(index, 1)[0];
                    this.renderData();
                    this.updateStats();

                    if (this.getCheckboxValue('autoExecute') && this.selectedFunctions.length > 0 && this.data.length > 0) {
                        this.executeJuxt();
                    }

                    this.showNotification(`å·²åˆ é™¤æ•°æ®: ${removed}`, 'info');
                }
            }

            // æ¸…ç©ºæ•°æ®
            clearData() {
                this.data = [];
                this.renderData();
                this.updateStats();
                this.showNotification('æ•°æ®å·²æ¸…ç©º', 'info');
            }

            // åŠ è½½ç¤ºä¾‹æ•°æ®
            loadSampleData() {
                const samples = {
                    string: ['Hello', 'World', 'JavaScript'],
                    number: ['10', '25', '42', '100'],
                    mixed: ['hello', '123', 'true', 'null']
                };

                this.data = [...(samples[this.currentType] || samples.string)];
                this.renderData();
                this.updateStats();

                if (this.getCheckboxValue('autoExecute') && this.selectedFunctions.length > 0) {
                    this.executeJuxt();
                }

                this.showNotification('ç¤ºä¾‹æ•°æ®å·²åŠ è½½', 'success');
            }

            // æ¸²æŸ“å‡½æ•°å¡ç‰‡
            renderFunctions() {
                const functionGrid = document.getElementById('functionGrid');
                if (!functionGrid) return;

                const functions = this.functionLibrary[this.currentType] || [];

                let html = '';
                functions.forEach((func, index) => {
                    const isSelected = this.selectedFunctions.some(f => f.id === func.id);
                    html += `
                        <div class="function-card ${isSelected ? 'selected' : ''}" 
                             onclick="window.juxtTool?.toggleFunction('${func.id}')"
                             style="animation: slideInUp 0.3s ease-out ${index * 0.05}s both;">
                            <div class="function-icon">${func.icon}</div>
                            <div class="function-name">${func.name}</div>
                            <div class="function-desc">${func.desc}</div>
                        </div>
                    `;
                });

                functionGrid.innerHTML = html || '<div class="empty-state">æš‚æ— å¯ç”¨å‡½æ•°</div>';
                this.updateSelectedCount();
            }

            // åˆ‡æ¢å‡½æ•°é€‰æ‹©
            toggleFunction(funcId) {
                const functions = this.functionLibrary[this.currentType] || [];
                const func = functions.find(f => f.id === funcId);
                
                if (!func) return;

                const index = this.selectedFunctions.findIndex(f => f.id === funcId);
                
                if (index > -1) {
                    // å–æ¶ˆé€‰æ‹©
                    this.selectedFunctions.splice(index, 1);
                } else {
                    // æ·»åŠ é€‰æ‹©
                    this.selectedFunctions.push(func);
                }

                this.renderFunctions();

                if (this.getCheckboxValue('autoExecute') && this.data.length > 0 && this.selectedFunctions.length > 0) {
                    this.executeJuxt();
                }
            }

            // æ›´æ–°å·²é€‰å‡½æ•°è®¡æ•°
            updateSelectedCount() {
                const selectedCount = document.getElementById('selectedCount');
                if (selectedCount) {
                    selectedCount.textContent = this.selectedFunctions.length;
                }
            }

            // å…¨é€‰å‡½æ•°
            selectAllFunctions() {
                const functions = this.functionLibrary[this.currentType] || [];
                this.selectedFunctions = [...functions];
                this.renderFunctions();

                if (this.getCheckboxValue('autoExecute') && this.data.length > 0) {
                    this.executeJuxt();
                }

                this.showNotification('å·²é€‰æ‹©æ‰€æœ‰å‡½æ•°', 'success');
            }

            // æ¸…ç©ºé€‰æ‹©
            clearSelection() {
                this.selectedFunctions = [];
                this.renderFunctions();
                this.showNotification('å·²æ¸…ç©ºå‡½æ•°é€‰æ‹©', 'info');
            }

            // æ‰§è¡Œ juxt å‡½æ•°
            executeJuxt() {
                if (this.data.length === 0) {
                    this.showError('è¯·å…ˆæ·»åŠ æ•°æ®');
                    return;
                }

                if (this.selectedFunctions.length === 0) {
                    this.showError('è¯·å…ˆé€‰æ‹©å¤„ç†å‡½æ•°');
                    return;
                }

                try {
                    // è·å–å‡½æ•°åˆ—è¡¨
                    const fns = this.selectedFunctions.map(f => f.fn);
                    
                    // æ‰§è¡Œ juxt
                    const processor = juxt(...fns);
                    const result = processor(...this.data);
                    
                    this.lastResult = result;
                    this.stats.totalExecutions++;
                    this.stats.totalFunctionsUsed += this.selectedFunctions.length;

                    // æ˜¾ç¤ºç»“æœ
                    this.displayResult(result);
                    this.updateStats();

                    // æ˜¾ç¤ºä»£ç 
                    if (this.getCheckboxValue('showCode')) {
                        this.showCode();
                    }

                    this.showNotification('æ‰¹é‡å¤„ç†å®Œæˆï¼', 'success');
                } catch (error) {
                    this.showError('æ‰§è¡Œå¤±è´¥: ' + error.message);
                    console.error('æ‰§è¡Œé”™è¯¯:', error);
                }
            }

            // æ˜¾ç¤ºç»“æœ
            displayResult(result) {
                const resultSection = document.getElementById('resultSection');
                const resultMatrix = document.getElementById('resultMatrix');

                if (!resultMatrix) return;

                // æ„å»ºè¡¨æ ¼
                let html = '<table class="matrix-table">';
                
                // è¡¨å¤´ï¼šæ•°æ®åˆ—
                html += '<thead><tr>';
                html += '<th>å‡½æ•° \\ æ•°æ®</th>';
                this.data.forEach(item => {
                    html += `<th>${this.escapeHtml(String(item))}</th>`;
                });
                html += '</tr></thead>';

                // è¡¨ä½“ï¼šæ¯ä¸ªå‡½æ•°çš„ç»“æœè¡Œ
                html += '<tbody>';
                result.forEach((row, funcIndex) => {
                    const func = this.selectedFunctions[funcIndex];
                    html += '<tr>';
                    html += `<th>${func.icon} ${func.name}</th>`;
                    row.forEach(value => {
                        html += `<td>${this.escapeHtml(String(value))}</td>`;
                    });
                    html += '</tr>';
                });
                html += '</tbody>';
                html += '</table>';

                resultMatrix.innerHTML = html;
                resultSection.style.display = 'block';

                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                setTimeout(() => {
                    resultSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            }

            // æ˜¾ç¤ºä»£ç 
            showCode() {
                const codePreview = document.getElementById('codePreview');
                if (!codePreview) return;

                const funcNames = this.selectedFunctions.map(f => f.desc).join(', ');
                const dataStr = this.data.map(d => JSON.stringify(d)).join(', ');
                
                const code = `// å®šä¹‰å¤„ç†å‡½æ•°
${this.selectedFunctions.map((f, i) => `const fn${i + 1} = ${f.desc === 'x => x' ? 'x => x' : `${f.desc}`};`).join('\n')}

// åˆ›å»º juxt å‡½æ•°
const processor = juxt(${this.selectedFunctions.map((f, i) => `fn${i + 1}`).join(', ')});

// æ‰¹é‡å¤„ç†æ•°æ®
const data = [${dataStr}];
const result = processor(...data);

// ç»“æœçŸ©é˜µï¼š
// [
${this.lastResult.map((row, i) => `//   [${row.map(v => JSON.stringify(v)).join(', ')}],  // ${this.selectedFunctions[i].desc}`).join('\n')}
// ]`;

                const codeElement = codePreview.querySelector('code');
                if (codeElement) {
                    codeElement.textContent = code;
                    if (window.hljs) {
                        hljs.highlightElement(codeElement);
                    }
                }

                codePreview.style.display = 'block';
            }

            // å¯¼å‡ºç»“æœ
            exportResult() {
                if (!this.lastResult) {
                    this.showError('æš‚æ— ç»“æœå¯å¯¼å‡º');
                    return;
                }

                try {
                    const output = {
                        data: this.data,
                        functions: this.selectedFunctions.map(f => ({ name: f.name, desc: f.desc })),
                        result: this.lastResult,
                        timestamp: new Date().toISOString()
                    };

                    const jsonStr = JSON.stringify(output, null, 2);
                    
                    // å¤åˆ¶åˆ°å‰ªè´´æ¿
                    navigator.clipboard.writeText(jsonStr).then(() => {
                        this.showNotification('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆJSONæ ¼å¼ï¼‰', 'success');
                    }).catch(err => {
                        // å¦‚æœå¤åˆ¶å¤±è´¥ï¼Œæ˜¾ç¤ºåœ¨æ¨¡æ€æ¡†ä¸­
                        if (this.plugins.modal) {
                            this.plugins.modal.show({
                                title: 'å¯¼å‡ºç»“æœ',
                                content: `
                                    <div style="padding: 20px;">
                                        <div class="code-block">
                                            <pre><code class="language-json">${this.escapeHtml(jsonStr)}</code></pre>
                                        </div>
                                    </div>
                                `,
                                type: 'alert'
                            });
                            
                            // é‡æ–°åº”ç”¨é«˜äº®
                            setTimeout(() => {
                                if (window.hljs) {
                                    document.querySelectorAll('pre code').forEach(block => {
                                        hljs.highlightElement(block);
                                    });
                                }
                            }, 100);
                        }
                    });
                } catch (error) {
                    this.showError('å¯¼å‡ºå¤±è´¥: ' + error.message);
                }
            }

            // æ¸…ç©ºç»“æœ
            clearResult() {
                const resultSection = document.getElementById('resultSection');
                const codePreview = document.getElementById('codePreview');

                if (resultSection) resultSection.style.display = 'none';
                if (codePreview) codePreview.style.display = 'none';

                this.lastResult = null;
                this.showNotification('ç»“æœå·²æ¸…ç©º', 'info');
            }

            // æ˜¾ç¤ºå‡½æ•°è¯´æ˜
            showFunctionInfo() {
                if (!this.plugins.modal) return;

                const functions = this.functionLibrary[this.currentType] || [];
                
                let functionsHtml = '';
                functions.forEach(func => {
                    functionsHtml += `
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #667eea;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="font-size: 1.5rem;">${func.icon}</span>
                                <strong style="color: #667eea;">${func.name}</strong>
                            </div>
                            <div style="font-family: Monaco, monospace; font-size: 0.9rem; color: #495057;">
                                ${func.desc}
                            </div>
                        </div>
                    `;
                });

                this.plugins.modal.show({
                    title: `ğŸ“š ${this.currentType === 'string' ? 'å­—ç¬¦ä¸²' : this.currentType === 'number' ? 'æ•°å­—' : 'é€šç”¨'}å¤„ç†å‡½æ•°è¯´æ˜`,
                    content: `
                        <div style="padding: 20px; max-height: 500px; overflow-y: auto;">
                            ${functionsHtml}
                            <div style="background: #fef3c7; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b; margin-top: 15px;">
                                <p style="margin: 0; color: #d97706;">
                                    <strong>ğŸ’¡ æç¤ºï¼š</strong> ç‚¹å‡»å‡½æ•°å¡ç‰‡é€‰æ‹©/å–æ¶ˆé€‰æ‹©ï¼Œæ”¯æŒå¤šé€‰ã€‚é€‰æ‹©å®Œæˆåæ·»åŠ æ•°æ®å¹¶æ‰§è¡Œ juxt å‡½æ•°å³å¯æŸ¥çœ‹ç»“æœçŸ©é˜µã€‚
                                </p>
                            </div>
                        </div>
                    `,
                    type: 'alert'
                });
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats() {
                const statsGrid = document.getElementById('statsGrid');
                if (!statsGrid) return;

                const matrixSize = this.lastResult 
                    ? this.selectedFunctions.length * this.data.length 
                    : 0;

                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalExecutions}</div>
                        <div class="stat-label">æ€»æ‰§è¡Œæ¬¡æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.data.length}</div>
                        <div class="stat-label">å½“å‰æ•°æ®æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.selectedFunctions.length}</div>
                        <div class="stat-label">å·²é€‰å‡½æ•°æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalDataProcessed}</div>
                        <div class="stat-label">ç´¯è®¡å¤„ç†æ•°æ®</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${this.stats.totalFunctionsUsed}</div>
                        <div class="stat-label">ç´¯è®¡ä½¿ç”¨å‡½æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${matrixSize}</div>
                        <div class="stat-label">ç»“æœçŸ©é˜µå¤§å°</div>
                    </div>
                `;
            }

            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(message, type) {
                if (this.plugins.notification && this.getCheckboxValue('showNotifications')) {
                    this.plugins.notification.show(message, type);
                } else {
                    console.log(`${type.toUpperCase()}: ${message}`);
                }
            }

            // æ˜¾ç¤ºé”™è¯¯
            showError(message) {
                this.showNotification(message, 'error');
            }

            // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            showWelcomeMessage() {
                if (this.plugins.modal) {
                    this.plugins.modal.show({
                        title: 'ğŸ‰ æ¬¢è¿ä½¿ç”¨å¤šå‡½æ•°æ‰¹é‡å¤„ç†å·¥å…·å¹³å°',
                        content: `
                            <div style="padding: 20px;">
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <div style="font-size: 48px; margin-bottom: 15px;">âš¡</div>
                                    <h3 style="margin: 0 0 10px 0; color: #667eea;">åŠŸèƒ½ç‰¹è‰²</h3>
                                </div>

                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                    <ul style="margin: 0; padding-left: 20px; color: #495057;">
                                        <li>å¼ºå¤§çš„ juxt å‡½æ•°æ‰¹é‡å¤„ç†èƒ½åŠ›</li>
                                        <li>18+ ç§é¢„å®šä¹‰å¤„ç†å‡½æ•°</li>
                                        <li>ç»“æœçŸ©é˜µå¯è§†åŒ–å±•ç¤º</li>
                                        <li>å®æ—¶ä»£ç é¢„è§ˆå’Œæ‰§è¡Œ</li>
                                        <li>æ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€é€šç”¨ä¸‰ç§æ•°æ®ç±»å‹</li>
                                        <li>ä¸€é”®å¯¼å‡ºç»“æœï¼ˆJSONæ ¼å¼ï¼‰</li>
                                    </ul>
                                </div>

                                <div style="background: #e8f5e8; padding: 12px; border-radius: 6px; border-left: 4px solid #10b981; margin-bottom: 15px;">
                                    <p style="margin: 0; font-size: 14px; color: #16a34a;">
                                        <strong>ğŸ’¡ ä½¿ç”¨æ­¥éª¤ï¼š</strong>
                                    </p>
                                    <ol style="margin: 8px 0 0 0; padding-left: 20px; color: #16a34a; font-size: 14px;">
                                        <li>é€‰æ‹©æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²/æ•°å­—/é€šç”¨ï¼‰</li>
                                        <li>æ·»åŠ è¦å¤„ç†çš„æ•°æ®</li>
                                        <li>é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†å‡½æ•°</li>
                                        <li>ç‚¹å‡»"æ‰§è¡Œæ‰¹é‡å¤„ç†"æŸ¥çœ‹ç»“æœçŸ©é˜µ</li>
                                    </ol>
                                </div>

                                <div style="background: #fef3c7; padding: 12px; border-radius: 6px; border-left: 4px solid #f59e0b;">
                                    <p style="margin: 0; font-size: 14px; color: #d97706;">
                                        <strong>ğŸ¨ juxt å‡½æ•°ï¼š</strong> å°†å¤šä¸ªå‡½æ•°åŒæ—¶åº”ç”¨åˆ°å¤šä¸ªå‚æ•°ä¸Šï¼Œç”ŸæˆäºŒç»´ç»“æœçŸ©é˜µã€‚éå¸¸é€‚åˆæ‰¹é‡æ•°æ®è½¬æ¢å’Œå¤šç»´åˆ†æã€‚
                                    </p>
                                </div>
                            </div>
                        `,
                        type: "alert"
                    });
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMå†…å®¹åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
            window.juxtTool = new JuxtTool();
            console.log('å¤šå‡½æ•°æ‰¹é‡å¤„ç†å·¥å…·å¹³å°åˆå§‹åŒ–å®Œæˆ');
        });

        // å¦‚æœ DOMContentLoaded å·²ç»è§¦å‘ï¼Œç«‹å³æ‰§è¡Œ
        if (document.readyState === 'loading') {
            console.log('æ–‡æ¡£ä»åœ¨åŠ è½½ï¼Œç­‰å¾… DOMContentLoaded äº‹ä»¶...');
        } else {
            console.log('æ–‡æ¡£å·²åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œåˆå§‹åŒ–...');
            window.juxtTool = new JuxtTool();
        }
    </script>
</body>
</html>